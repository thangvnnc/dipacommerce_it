!function(e){"use strict";angular.module("vcRecaptcha",[])}(),function(y){"use strict";y.module("vcRecaptcha").provider("vcRecaptchaService",function(){var h=this,g={};h.onLoadFunctionName="vcRecaptchaApiLoaded",h.setDefaults=function(e){y.copy(e,g)},h.setSiteKey=function(e){g.key=e},h.setTheme=function(e){g.theme=e},h.setStoken=function(e){g.stoken=e},h.setSize=function(e){g.size=e},h.setType=function(e){g.type=e},h.setLang=function(e){g.lang=e},h.setBadge=function(e){g.badge=e},h.setOnLoadFunctionName=function(e){h.onLoadFunctionName=e},h.$get=["$rootScope","$window","$q","$document","$interval",function(t,e,a,n,c){var o,r=a.defer(),i=r.promise,s={};e.vcRecaptchaApiLoadedCallback=e.vcRecaptchaApiLoadedCallback||[];var u=function(){o=e.grecaptcha,r.resolve(o)};function d(){if(!o)throw new Error("reCaptcha has not been loaded yet.")}function l(){return y.isFunction((e.grecaptcha||{}).render)}if(e.vcRecaptchaApiLoadedCallback.push(u),e[h.onLoadFunctionName]=function(){e.vcRecaptchaApiLoadedCallback.forEach(function(e){e()})},l())u();else if(e.document.querySelector('script[src^="https://www.google.com/recaptcha/api.js"]'))var p=c(function(){l()&&(c.cancel(p),u())},25);else{var f=e.document.createElement("script");f.async=!0,f.defer=!0,f.src="https://www.google.com/recaptcha/api.js?onload="+h.onLoadFunctionName+"&render=explicit",n.find("body")[0].appendChild(f)}return{create:function(n,c){return c.sitekey=c.key||g.key,c.theme=c.theme||g.theme,c.stoken=c.stoken||g.stoken,c.size=c.size||g.size,c.type=c.type||g.type,c.hl=c.lang||g.lang,c.badge=c.badge||g.badge,c.sitekey||function(){throw new Error('You need to set the "key" attribute to your public reCaptcha key. If you don\'t have a key, please get one from https://www.google.com/recaptcha/admin/create')}(),(o?a.when(o):i).then(function(e){var t=e.render(n,c);return s[t]=n,t})},reload:function(e){d(),o.reset(e),t.$broadcast("reCaptchaReset",e)},execute:function(e){d(),o.execute(e)},useLang:function(e,t){var n=s[e];if(!n)throw new Error("reCaptcha Widget ID not exists",e);var c=n.querySelector("iframe");if(!t)return c&&c.src&&/[?&]hl=\w+/.test(c.src)?c.src.replace(/.+[?&]hl=(\w+)([^\w].+)?/,"$1"):null;if(c&&c.src){var a=c.src;/[?&]hl=/.test(a)?a=a.replace(/([?&]hl=)\w+/,"$1"+t):a+=(-1===a.indexOf("?")?"?":"&")+"hl="+t,c.src=a}},getResponse:function(e){return d(),o.getResponse(e)},getInstance:function(e){return s[e]},destroy:function(e){delete s[e]}}}]})}(angular),function(l){"use strict";l.module("vcRecaptcha").directive("vcRecaptcha",["$document","$timeout","vcRecaptchaService",function(s,u,d){return{restrict:"A",require:"?^^form",scope:{response:"=?ngModel",key:"=?",stoken:"=?",theme:"=?",size:"=?",type:"=?",lang:"=?",badge:"=?",tabindex:"=?",required:"=?",onCreate:"&",onSuccess:"&",onExpire:"&"},link:function(c,t,n,e){c.widgetId=null,e&&l.isDefined(n.required)&&c.$watch("required",i);var a=c.$watch("key",function(e){d.create(t[0],{callback:function(e){u(function(){c.response=e,i(),c.onSuccess({response:e,widgetId:c.widgetId})})},key:e,stoken:c.stoken||n.stoken||null,theme:c.theme||n.theme||null,type:c.type||n.type||null,lang:c.lang||n.lang||null,tabindex:c.tabindex||n.tabindex||null,size:c.size||n.size||null,badge:c.badge||n.badge||null,"expired-callback":r}).then(function(n){i(),c.widgetId=n,c.onCreate({widgetId:n}),c.$on("$destroy",o),c.$on("reCaptchaReset",function(e,t){(l.isUndefined(t)||n===t)&&(c.response="",i())})}),a()});function o(){e&&e.$setValidity("recaptcha",null),d.destroy(c.widgetId),l.element(s[0].querySelectorAll(".pls-container")).parent().remove()}function r(){u(function(){c.response="",i(),c.onExpire({widgetId:c.widgetId})})}function i(){e&&e.$setValidity("recaptcha",!1===c.required?null:Boolean(c.response))}}}}])}(angular);