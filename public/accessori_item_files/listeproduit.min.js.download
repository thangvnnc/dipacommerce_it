(function($){$.fn.validationEngine=function(settings){if($.validationEngineLanguage){allRules=$.validationEngineLanguage.allRules}else{$.validationEngine.debug("Validation engine rules are not loaded check your external file")}settings=jQuery.extend({allrules:allRules,validationEventTriggers:"focusout",inlineValidation:true,returnIsValid:false,liveEvent:true,unbindEngine:true,containerOverflow:false,containerOverflowDOM:"",ajaxSubmit:false,scroll:true,promptPosition:"top",displayType:"",success:false,beforeSubmit:function(){return true},beforeSuccess:function(){},failure:function(){}},settings);$.validationEngine.settings=settings;$.validationEngine.ajaxValidArray=new Array();if(settings.inlineValidation==true){if(!settings.returnIsValid){allowReturnIsvalid=false;if(settings.liveEvent){$(this).find("[class*=validate][type!=checkbox]").live(settings.validationEventTriggers,function(caller){_inlinEvent(this)});$(this).find("[class*=validate][type=checkbox]").live("click",function(caller){_inlinEvent(this)})}else{$(this).find("[class*=validate]").not("[type=checkbox]").bind(settings.validationEventTriggers,function(caller){_inlinEvent(this)});$(this).find("[class*=validate][type=checkbox]").bind("click",function(caller){_inlinEvent(this)})}firstvalid=false}function _inlinEvent(caller){$.validationEngine.settings=settings;if($.validationEngine.intercept==false||!$.validationEngine.intercept){$.validationEngine.onSubmitValid=false;$.validationEngine.loadValidation(caller)}else{$.validationEngine.intercept=false}}}if(settings.returnIsValid){if($.validationEngine.submitValidation(this,settings)){return false}else{return true}}$(this).bind("submit",function(caller){$.validationEngine.onSubmitValid=true;$.validationEngine.settings=settings;if($.validationEngine.submitValidation(this,settings)==false){if($.validationEngine.submitForm(this,settings)==true){return false}}else{settings.failure&&settings.failure();return false}});$(".formError").live("click",function(){$(this).fadeOut(150,function(){$(this).remove()})});$(".formErrorLarge").live("click",function(){$(this).fadeOut(150,function(){$(this).remove()})})};$.validationEngine={defaultSetting:function(caller){if($.validationEngineLanguage){allRules=$.validationEngineLanguage.allRules}else{$.validationEngine.debug("Validation engine rules are not loaded check your external file")}settings={allrules:allRules,validationEventTriggers:"blur",inlineValidation:true,containerOverflow:false,containerOverflowDOM:"",returnIsValid:false,scroll:true,unbindEngine:true,ajaxSubmit:false,promptPosition:"topRight",displayType:"",success:false,failure:function(){}};$.validationEngine.settings=settings},loadValidation:function(caller){if(!$.validationEngine.settings){$.validationEngine.defaultSetting()}rulesParsing=$(caller).attr("class");rulesRegExp=/\[(.*)\]/;getRules=rulesRegExp.exec(rulesParsing);if(getRules==null){return false}str=getRules[1];pattern=/\[|,|\]/;result=str.split(pattern);var validateCalll=$.validationEngine.validateCall(caller,result);return validateCalll},validateCall:function(caller,rules){var promptText="";if(!$(caller).attr("id")){$.validationEngine.debug("This field have no ID attribut( name & class displayed): "+$(caller).attr("name")+" "+$(caller).attr("class"))}caller=caller;ajaxValidate=false;var callerName=$(caller).attr("name");$.validationEngine.isError=false;$.validationEngine.showTriangle=true;callerType=$(caller).attr("type");for(i=0;i<rules.length;i++){switch(rules[i]){case"optional":if(!$(caller).val()){$.validationEngine.closePrompt(caller);return $.validationEngine.isError}break;case"required":_required(caller,rules);if(promptText.length){i=rules.length}break;case"custom":_customRegex(caller,rules,i);break;case"exemptString":_exemptString(caller,rules,i);break;case"ajax":if(!$.validationEngine.onSubmitValid){_ajax(caller,rules,i)}break;case"length":_length(caller,rules,i);break;case"minLength":_minLength(caller,rules,i);break;case"maxCheckbox":_maxCheckbox(caller,rules,i);groupname=$(caller).attr("name");caller=$("input[name='"+groupname+"']");break;case"minCheckbox":_minCheckbox(caller,rules,i);groupname=$(caller).attr("name");caller=$("input[name='"+groupname+"']");break;case"confirm":_confirm(caller,rules,i);break;case"funcCall":_funcCall(caller,rules,i);break;default:}}radioHack();if($.validationEngine.isError==true){var linkTofieldText="."+$.validationEngine.linkTofield(caller);if(linkTofieldText!="."){if(!$(linkTofieldText)[0]){if($.validationEngine.settings.displayType=="short_error"){$.validationEngine.buildPrompt(caller,promptText,"short_error")}else{if($.validationEngine.settings.displayType=="mini_error"){$.validationEngine.buildPrompt(caller,promptText,"mini_error")}else{$.validationEngine.buildPrompt(caller,promptText,"error")}}}else{$.validationEngine.updatePromptText(caller,promptText)}}else{$.validationEngine.updatePromptText(caller,promptText)}}else{$.validationEngine.closePrompt(caller)}function radioHack(){if($("input[name='"+callerName+"']").size()>1&&(callerType=="radio"||callerType=="checkbox")){caller=$("input[name='"+callerName+"'][type!=hidden]:first");$.validationEngine.showTriangle=false}}function _required(caller,rules){callerType=$(caller).attr("type");if(callerType=="text"||callerType=="password"||callerType=="textarea"){if(!$(caller).val()){$.validationEngine.isError=true;promptText+=$.validationEngine.settings.allrules[rules[i]].alertText+"<br />"}}if(callerType=="radio"||callerType=="checkbox"){callerName=$(caller).attr("name");if($("input[name='"+callerName+"']:checked").size()==0){$.validationEngine.isError=true;if($("input[name='"+callerName+"']").size()==1){promptText+=$.validationEngine.settings.allrules[rules[i]].alertTextCheckboxe+"<br />"}else{promptText+=$.validationEngine.settings.allrules[rules[i]].alertTextCheckboxMultiple+"<br />"}}}if(callerType=="select-one"){if(!$(caller).val()){$.validationEngine.isError=true;promptText+=$.validationEngine.settings.allrules[rules[i]].alertText+"<br />"}}if(callerType=="select-multiple"){if(!$(caller).find("option:selected").val()){$.validationEngine.isError=true;promptText+=$.validationEngine.settings.allrules[rules[i]].alertText+"<br />"}}}function _customRegex(caller,rules,position){customRule=rules[position+1];pattern=eval($.validationEngine.settings.allrules[customRule].regex);if(customRule==="pi"||customRule==="cf"||customRule==="nif"){if($(caller).attr("value")!==""){if(!pattern.test($(caller).attr("value"))){$.validationEngine.isError=true;promptText+=$.validationEngine.settings.allrules[customRule].alertText+"<br />"}}}else{if(!pattern.test($(caller).attr("value"))){$.validationEngine.isError=true;promptText+=$.validationEngine.settings.allrules[customRule].alertText+"<br />"}}}function _exemptString(caller,rules,position){customString=rules[position+1];if(customString==$(caller).attr("value")){$.validationEngine.isError=true;promptText+=$.validationEngine.settings.allrules.required.alertText+"<br />"}}function _funcCall(caller,rules,position){customRule=rules[position+1];funce=$.validationEngine.settings.allrules[customRule].nname;var fn=window[funce];if(typeof(fn)==="function"){var fn_result=fn();if(!fn_result){$.validationEngine.isError=true}promptText+=$.validationEngine.settings.allrules[customRule].alertText+"<br />"}}function _ajax(caller,rules,position){customAjaxRule=rules[position+1];postfile=$.validationEngine.settings.allrules[customAjaxRule].file;fieldValue=$(caller).val();ajaxCaller=caller;fieldId=$(caller).attr("id");ajaxValidate=true;ajaxisError=$.validationEngine.isError;if($.validationEngine.settings.allrules[customAjaxRule].extraData){extraData=$.validationEngine.settings.allrules[customAjaxRule].extraData}else{extraData=""}if(!ajaxisError){$.ajax({type:"POST",url:postfile,async:true,data:"validateValue="+fieldValue+"&validateId="+fieldId+"&validateError="+customAjaxRule+"&extraData="+extraData,beforeSend:function(){if($.validationEngine.settings.allrules[customAjaxRule].alertTextLoad){if(!$("div."+fieldId+"formError")[0]){return $.validationEngine.buildPrompt(ajaxCaller,$.validationEngine.settings.allrules[customAjaxRule].alertTextLoad,"load")}else{$.validationEngine.updatePromptText(ajaxCaller,$.validationEngine.settings.allrules[customAjaxRule].alertTextLoad,"load")}}},error:function(data,transport){$.validationEngine.debug("error in the ajax: "+data.status+" "+transport)},success:function(data){data=eval("("+data+")");ajaxisError=data.jsonValidateReturn[2];customAjaxRule=data.jsonValidateReturn[1];ajaxCaller=$("#"+data.jsonValidateReturn[0])[0];fieldId=ajaxCaller;ajaxErrorLength=$.validationEngine.ajaxValidArray.length;existInarray=false;if(ajaxisError=="false"){_checkInArray(false);if(!existInarray){$.validationEngine.ajaxValidArray[ajaxErrorLength]=new Array(2);$.validationEngine.ajaxValidArray[ajaxErrorLength][0]=fieldId;$.validationEngine.ajaxValidArray[ajaxErrorLength][1]=false;existInarray=false}$.validationEngine.ajaxValid=false;promptText+=$.validationEngine.settings.allrules[customAjaxRule].alertText+"<br />";$.validationEngine.updatePromptText(ajaxCaller,promptText,"",true)}else{_checkInArray(true);$.validationEngine.ajaxValid=true;if(!customAjaxRule){$.validationEngine.debug("wrong ajax response, are you on a server or in xampp? if not delete de ajax[ajaxUser] validating rule from your form ")}if($.validationEngine.settings.allrules[customAjaxRule].alertTextOk){$.validationEngine.updatePromptText(ajaxCaller,$.validationEngine.settings.allrules[customAjaxRule].alertTextOk,"pass",true)}else{ajaxValidate=false;$.validationEngine.closePrompt(ajaxCaller)}}function _checkInArray(validate){for(x=0;x<ajaxErrorLength;x++){if($.validationEngine.ajaxValidArray[x][0]==fieldId){$.validationEngine.ajaxValidArray[x][1]=validate;existInarray=true}}}}})}}function _confirm(caller,rules,position){confirmField=rules[position+1];if($(caller).attr("value")!=$("#"+confirmField).attr("value")){$.validationEngine.isError=true;promptText+=$.validationEngine.settings.allrules.confirm.alertText+"<br />"}}function _length(caller,rules,position){startLength=eval(rules[position+1]);endLength=eval(rules[position+2]);feildLength=$(caller).attr("value").length;if(feildLength<startLength||feildLength>endLength){$.validationEngine.isError=true;promptText+=$.validationEngine.settings.allrules.length.alertText+startLength+$.validationEngine.settings.allrules.length.alertText2+endLength+$.validationEngine.settings.allrules.length.alertText3+"<br />"}}function _minLength(caller,rules,position){minLength=eval(rules[position+1]);feildLength=$(caller).attr("value").length;if(feildLength<minLength){$.validationEngine.isError=true;promptText+=$.validationEngine.settings.allrules.minLength.alertText.replace("%s",minLength)+"<br />"}}function _maxCheckbox(caller,rules,position){nbCheck=eval(rules[position+1]);groupname=$(caller).attr("name");groupSize=$("input[name='"+groupname+"']:checked").size();if(groupSize>nbCheck){$.validationEngine.showTriangle=false;$.validationEngine.isError=true;promptText+=$.validationEngine.settings.allrules.maxCheckbox.alertText+"<br />"}}function _minCheckbox(caller,rules,position){nbCheck=eval(rules[position+1]);groupname=$(caller).attr("name");groupSize=$("input[name='"+groupname+"']:checked").size();if(groupSize<nbCheck){$.validationEngine.isError=true;$.validationEngine.showTriangle=false;promptText+=$.validationEngine.settings.allrules.minCheckbox.alertText+" "+nbCheck+" "+$.validationEngine.settings.allrules.minCheckbox.alertText2+"<br />"}}return($.validationEngine.isError)?$.validationEngine.isError:false},submitForm:function(caller){if(!$.validationEngine.settings.beforeSubmit(caller)){return true}if($.validationEngine.settings.ajaxSubmit){if($.validationEngine.settings.ajaxSubmitExtraData){extraData=$.validationEngine.settings.ajaxSubmitExtraData}else{extraData=""}$.ajax({type:"POST",url:$.validationEngine.settings.ajaxSubmitFile,async:true,data:$(caller).serialize()+"&"+extraData,error:function(data,transport){$.validationEngine.debug("error in the ajax: "+data.status+" "+transport)},success:function(data){if(data=="true"){$(caller).css("opacity",1);$(caller).animate({opacity:0,height:0},function(){$(caller).css("display","none");$(caller).before("<div class='ajaxSubmit'>"+$.validationEngine.settings.ajaxSubmitMessage+"</div>");$.validationEngine.closePrompt(".formError",true);$(".ajaxSubmit").show("slow");if($.validationEngine.settings.success){$.validationEngine.settings.success&&$.validationEngine.settings.success();return false}})}else{data=eval("("+data+")");if(!data.jsonValidateReturn){$.validationEngine.debug("you are not going into the success fonction and jsonValidateReturn return nothing")}errorNumber=data.jsonValidateReturn.length;for(index=0;index<errorNumber;index++){fieldId=data.jsonValidateReturn[index][0];promptError=data.jsonValidateReturn[index][1];type=data.jsonValidateReturn[index][2];$.validationEngine.buildPrompt(fieldId,promptError,type)}}}});return true}if(!$.validationEngine.settings.beforeSuccess()){if($.validationEngine.settings.success){if($.validationEngine.settings.unbindEngine){$(caller).unbind("submit")}$.validationEngine.settings.success&&$.validationEngine.settings.success();return true}}else{return true}return false},buildPrompt:function(caller,promptText,type,ajaxed){if(!$.validationEngine.settings){$.validationEngine.defaultSetting()}deleteItself="."+$(caller).attr("id")+"formError";if($(deleteItself)[0]){$(deleteItself).stop();$(deleteItself).remove()}var divFormError=document.createElement("div");var formErrorContent=document.createElement("div");linkTofield=$.validationEngine.linkTofield(caller);$(divFormError).addClass("formError");if(type=="pass"){$(divFormError).addClass("greenPopup")}if(type=="load"){$(divFormError).addClass("blackPopup")}if(type=="short_error"){$(divFormError).addClass("short_error")}if(type=="mini_error"){$(divFormError).addClass("mini_error")}if(ajaxed){$(divFormError).addClass("ajaxed")}$(divFormError).addClass(linkTofield);$(formErrorContent).addClass("formErrorContent");if($.validationEngine.settings.containerOverflow){$(caller).before(divFormError)}else{$("body").append(divFormError)}$(divFormError).append(formErrorContent);if($.validationEngine.showTriangle!=false){var arrow=document.createElement("div");$(arrow).addClass("formErrorArrow");$(divFormError).append(arrow);if($.validationEngine.settings.promptPosition=="bottomLeft"||$.validationEngine.settings.promptPosition=="bottomRight"){$(arrow).addClass("formErrorArrowBottom");$(arrow).html('<div class="line1"><!-- --></div><div class="line2"><!-- --></div><div class="line3"><!-- --></div><div class="line4"><!-- --></div><div class="line5"><!-- --></div><div class="line6"><!-- --></div><div class="line7"><!-- --></div><div class="line8"><!-- --></div><div class="line9"><!-- --></div><div class="line10"><!-- --></div>')}if($.validationEngine.settings.promptPosition=="topLeft"||$.validationEngine.settings.promptPosition=="topRight"||$.validationEngine.settings.promptPosition=="top"){$(divFormError).append(arrow);$(arrow).html('<div class="line10"><!-- --></div><div class="line9"><!-- --></div><div class="line8"><!-- --></div><div class="line7"><!-- --></div><div class="line6"><!-- --></div><div class="line5"><!-- --></div><div class="line4"><!-- --></div><div class="line3"><!-- --></div><div class="line2"><!-- --></div><div class="line1"><!-- --></div>')}}$(formErrorContent).html(promptText);var calculatedPosition=$.validationEngine.calculatePosition(caller,promptText,type,ajaxed,divFormError);calculatedPosition.callerTopPosition+="px";calculatedPosition.callerleftPosition+="px";calculatedPosition.marginTopSize+="px";$(divFormError).css({top:calculatedPosition.callerTopPosition,left:calculatedPosition.callerleftPosition,marginTop:calculatedPosition.marginTopSize,opacity:0});return $(divFormError).animate({opacity:1},function(){return true})},buildPromptLarge:function(caller,promptText,type,ajaxed){if(!$.validationEngine.settings){$.validationEngine.defaultSetting()}deleteItself="."+$(caller).attr("id")+"formError";if($(deleteItself)[0]){$(deleteItself).stop();$(deleteItself).remove()}var divFormError=document.createElement("div");var formErrorContent=document.createElement("div");linkTofield=$.validationEngine.linkTofield(caller);$(divFormError).addClass("formErrorLarge");if(type=="pass"){$(divFormError).addClass("greenPopup")}if(type=="load"){$(divFormError).addClass("blackPopup")}if(ajaxed){$(divFormError).addClass("ajaxed")}$(divFormError).addClass(linkTofield);$(formErrorContent).addClass("formErrorContentLarge");if($.validationEngine.settings.containerOverflow){$(caller).before(divFormError)}else{$("body").append(divFormError)}$(divFormError).append(formErrorContent);if($.validationEngine.showTriangle!=false){var arrow=document.createElement("div");$(arrow).addClass("formErrorArrow");$(divFormError).append(arrow);if($.validationEngine.settings.promptPosition=="bottomLeft"||$.validationEngine.settings.promptPosition=="bottomRight"){$(arrow).addClass("formErrorArrowBottom");$(arrow).html('<div class="line1"><!-- --></div><div class="line2"><!-- --></div><div class="line3"><!-- --></div><div class="line4"><!-- --></div><div class="line5"><!-- --></div><div class="line6"><!-- --></div><div class="line7"><!-- --></div><div class="line8"><!-- --></div><div class="line9"><!-- --></div><div class="line10"><!-- --></div>')}if($.validationEngine.settings.promptPosition=="topLeft"||$.validationEngine.settings.promptPosition=="topRight"||$.validationEngine.settings.promptPosition=="top"){$(divFormError).append(arrow);$(arrow).html('<div class="line10"><!-- --></div><div class="line9"><!-- --></div><div class="line8"><!-- --></div><div class="line7"><!-- --></div><div class="line6"><!-- --></div><div class="line5"><!-- --></div><div class="line4"><!-- --></div><div class="line3"><!-- --></div><div class="line2"><!-- --></div><div class="line1"><!-- --></div>')}}$(formErrorContent).html(promptText);var calculatedPosition=$.validationEngine.calculatePosition(caller,promptText,type,ajaxed,divFormError);calculatedPosition.callerTopPosition+="px";calculatedPosition.callerleftPosition+="px";calculatedPosition.marginTopSize+="px";$(divFormError).css({top:calculatedPosition.callerTopPosition,left:calculatedPosition.callerleftPosition,marginTop:calculatedPosition.marginTopSize,opacity:0});return $(divFormError).animate({opacity:1},function(){return true})},updatePromptText:function(caller,promptText,type,ajaxed){linkTofield=$.validationEngine.linkTofield(caller);var updateThisPrompt="."+linkTofield;if(type=="pass"){$(updateThisPrompt).addClass("greenPopup")}else{$(updateThisPrompt).removeClass("greenPopup")}if(type=="load"){$(updateThisPrompt).addClass("blackPopup")}else{$(updateThisPrompt).removeClass("blackPopup")}if(ajaxed){$(updateThisPrompt).addClass("ajaxed")}else{$(updateThisPrompt).removeClass("ajaxed")}$(updateThisPrompt).find(".formErrorContent").html(promptText);var calculatedPosition=$.validationEngine.calculatePosition(caller,promptText,type,ajaxed,updateThisPrompt);calculatedPosition.callerTopPosition+="px";calculatedPosition.callerleftPosition+="px";calculatedPosition.marginTopSize+="px";$(updateThisPrompt).animate({top:calculatedPosition.callerTopPosition,marginTop:calculatedPosition.marginTopSize})},calculatePosition:function(caller,promptText,type,ajaxed,divFormError){if($.validationEngine.settings.containerOverflow){callerTopPosition=0;callerleftPosition=0;callerWidth=$(caller).width();inputHeight=$(divFormError).height();var marginTopSize="-"+inputHeight}else{callerTopPosition=$(caller).offset().top;callerleftPosition=$(caller).offset().left;callerWidth=$(caller).width();inputHeight=$(divFormError).height();var marginTopSize=0}if($.validationEngine.settings.promptPosition=="topRight"){if($.validationEngine.settings.containerOverflow){callerleftPosition+=callerWidth-30}else{callerleftPosition+=callerWidth-30;callerTopPosition+=-inputHeight}}if($.validationEngine.settings.promptPosition=="topLeft"){callerTopPosition+=-inputHeight-10}if($.validationEngine.settings.promptPosition=="top"){if($.validationEngine.settings.displayType=="short_error"){callerTopPosition+=-inputHeight-5;callerleftPosition+=(callerWidth-150)/2}else{if($.validationEngine.settings.displayType=="mini_error"){callerTopPosition+=-inputHeight-5;callerleftPosition+=(callerWidth-100)/2}else{callerTopPosition+=-inputHeight-10;callerleftPosition+=(callerWidth-235)/2}}}if($.validationEngine.settings.promptPosition=="centerRight"){callerleftPosition+=callerWidth+13}if($.validationEngine.settings.promptPosition=="bottomLeft"){callerHeight=$(caller).height();callerTopPosition=callerTopPosition+callerHeight+15}if($.validationEngine.settings.promptPosition=="bottomRight"){callerHeight=$(caller).height();callerleftPosition+=callerWidth-30;callerTopPosition+=callerHeight+5}return{callerTopPosition:callerTopPosition,callerleftPosition:callerleftPosition,marginTopSize:marginTopSize}},linkTofield:function(caller){var linkTofield=$(caller).attr("id")+"formError";linkTofield=linkTofield.replace(/\[/g,"");linkTofield=linkTofield.replace(/\]/g,"");return linkTofield},closePrompt:function(caller,outside){if(!$.validationEngine.settings){$.validationEngine.defaultSetting()}if(outside){$(caller).fadeTo("fast",0,function(){$(caller).remove()});return false}if(typeof(ajaxValidate)=="undefined"){ajaxValidate=false}if(!ajaxValidate){linkTofield=$.validationEngine.linkTofield(caller);closingPrompt="."+linkTofield;$(closingPrompt).fadeTo("fast",0,function(){$(closingPrompt).remove()})}},debug:function(error){if(!$("#debugMode")[0]){$("body").append("<div id='debugMode'><div class='debugError'><strong>This is a debug mode, you got a problem with your form, it will try to help you, refresh when you think you nailed down the problem</strong></div></div>")}$(".debugError").append("<div class='debugerror'>"+error+"</div>")},submitValidation:function(caller){var stopForm=false;$.validationEngine.ajaxValid=true;var toValidateSize=$(caller).find("[class*=validate]").size();$(caller).find("[class*=validate]").each(function(){linkTofield=$.validationEngine.linkTofield(this);if(!$("."+linkTofield).hasClass("ajaxed")){var validationPass=$.validationEngine.loadValidation(this);return(validationPass)?stopForm=true:""}});ajaxErrorLength=$.validationEngine.ajaxValidArray.length;for(x=0;x<ajaxErrorLength;x++){if($.validationEngine.ajaxValidArray[x][1]==false){$.validationEngine.ajaxValid=false}}if(stopForm||!$.validationEngine.ajaxValid){if($.validationEngine.settings.scroll){if(!$.validationEngine.settings.containerOverflow){var destination=$(".formError:not('.greenPopup'):first").offset().top;$(".formError:not('.greenPopup')").each(function(){testDestination=$(this).offset().top;if(destination>testDestination){destination=$(this).offset().top}});$("html:not(:animated),body:not(:animated)").animate({scrollTop:destination},1100)}else{var destination=$(".formError:not('.greenPopup'):first").offset().top;var scrollContainerScroll=$($.validationEngine.settings.containerOverflowDOM).scrollTop();var scrollContainerPos=-parseInt($($.validationEngine.settings.containerOverflowDOM).offset().top);var destination=scrollContainerScroll+destination+scrollContainerPos-5;var scrollContainer=$.validationEngine.settings.containerOverflowDOM+":not(:animated)";$(scrollContainer).animate({scrollTop:destination},1100)}}return true}else{return false}}}})(jQuery);(function(a){a.fn.validationEngineLanguage=function(){};a.validationEngineLanguage={newLang:function(){a.validationEngineLanguage.allRules={required:{regex:"none",alertText:_lang.Champ_obligatoire,alertTextCheckboxMultiple:_lang.choix_option,alertTextCheckboxe:_lang.checkbox_requis},length:{regex:"none",alertText:_lang.longueur_entre+" ",alertText2:" "+_lang.longueur_et+" ",alertText3:" "+_lang.longueur_carac_requis},minLength:{regex:"none",alertText:_lang["min-x-alpha"]},maxCheckbox:{regex:"none",alertText:_lang.checkbox_depasse},minCheckbox:{regex:"none",alertText:_lang.choix,alertText2:" "+_lang.options},confirm:{regex:"none",alertText:_lang.champ_different},telephone:{regex:"/^[0-9-() ]+$/",alertText:_lang.telephone_invalide},email:{regex:"/^[_a-z0-9-]+(\\.[_a-z0-9-]+)*@[a-z0-9-]+(\\.[a-z0-9-]+)*(\\.[a-z]{2,4})$/i",alertText:_lang.email_invalide},nif:{regex:"/^[0-9]{9}$/",alertText:_lang.nif_invalide},pi:{regex:"/^[0-9-]{11}$/",alertText:_lang.pi_invalide},cf:{regex:"/^[0-9a-zA-Z]{16}$/",alertText:_lang.cf_invalide},date:{regex:"/^(0[1-9]|[12][0-9]|3[01])\\/(0[1-9]|1[012])\\/(19|20)[0-9]{2}$/",alertText:_lang.date_invalide},datemask:{regex:"/^((0[1-9]|[12][0-9]|3[01])\\/(0[1-9]|1[012])\\/(19|20)[0-9]{2})|(__\\/__\\/____)$/",alertText:_lang.date_invalide},onlyNumber:{regex:"/^[0-9 ]+$/",alertText:_lang.chiffre_seulement},noSpecialCaracters:{regex:"/^[0-9a-zA-Z]+$/",alertText:_lang.aucun_caractere_speciaux},onlyLetter:{regex:"/^[a-zA-Z ']+$/",alertText:_lang.lettre_seulement},ajaxUser:{file:"validateUser.php",alertTextOk:_lang.nom_disponible,alertTextLoad:_lang.chargement_attente,alertText:_lang.nom_deja_pris},ajaxName:{file:"validateUser.php",alertText:_lang.nom_deja_pris,alertTextOk:_lang.nom_disponible,alertTextLoad:_lang.chargement_attente},validate2fields:{nname:"validate2fields",alertText:_lang.nom_prenom_obligatoire},alwayscheck:{nname:"alwayscheck",alertText:""}}}}})(jQuery);$(document).ready(function(){$.validationEngineLanguage.newLang()});$(document).ready(function(){$.fancybox.close();if(window.innerWidth>1128){var a=window.innerWidth-100}else{var a=20}var b=window.innerHeight-50;$('a[href="#top"]').hide();$('a[href="#top"]').css("left",a);$('a[href="#top"]').css("top",b);$(document).ready(function(){$(window).scroll(function(){if($(window).scrollTop()>0){$('a[href="#top"]').fadeIn(200)}else{$('a[href="#top"]').fadeOut(200)}})});$("a[href='#top']").click(function(){$("html, body").animate({scrollTop:0},"slow");return false});if(window.location.hash&&window.location.hash!="#"&&window.location.hash!="#undefined"){blocat.slide.anchor(window.location.hash.substring(1))}$(".b_content .col_content .produit_btn .input_l .input_r ._ajout_panier").click(function(){recordOutboundEventFull("[Visites sur page listing et FA v4]","Page Listing","Ajout au panier",__GOOGLE_ANALYTICS__)});$(".b_content .col_content .plusdinfos").click(function(){recordOutboundEventFull("[Visites sur page listing et FA v4]","Page Listing","Click vers FA - plus d’infos",__GOOGLE_ANALYTICS__)});$(".b_content .col_block ul.list_tree ul ul a").click(function(){recordOutboundEventFull("[Visites sur page listing et FA v4]","Page Listing","Clicks sur generique colonne gauche",__GOOGLE_ANALYTICS__)});$(".b_content .col_content .produit_visuel img").click(function(){recordOutboundEventFull("[Visites sur page listing et FA v4]","Page Listing","Click vers FA - photos",__GOOGLE_ANALYTICS__)});$(".main_body_aff._gat_evtclk a").click(function(){recordOutboundEventFull("[Visites sur page listing et FA v4]","Page Listing","Click sur "+(/\bdisplay=liste\b/gi.test(this.href)?"liste":"colonne"),__GOOGLE_ANALYTICS__)});$("a.retourhaut").click(function(){window.location.hash="";scrollToTop(".sommaire")});$("a.go_to_familly").click(function(){var d=$(this).attr("id").substring(12);var c=$("input#famille_"+d).val();var e=0;if($("input#type_produit").val()!="boutique"){e=ktypenr}$.ajax({type:"POST",url:__AJAX__+"select-generique.php",data:"ids="+c+"&ktypenr="+e,success:function(f){$.fancybox({padding:0,margin:0,showCloseButton:false,scrolling:"no",titleshow:false,content:f,onComplete:function(){$("._modal_close").click(function(){$.fancybox.close()});$("a._modal_waiting").click(function(){showFancyboxWaiting()})}})}})});$("a.go_to_category").click(function(){window.location.hash=$(this).attr("id").substring(7);blocat.slide.anchor($(this).attr("id").substring(7))});$("._desactivation-article-vehicule").click(function(){var c=$(this).prev("input[name=reference]").val();$("#ref_article_desactive").val(c);$("#link_action").html("Désactivation");open_thickbox("_modal_desactivation_article_vehicule")});$("._reactivation-article-vehicule").click(function(){var c=$(this).prev("input[name=reference]").val();$("#ref_article_desactive").val(c);$("#article_desactive").val("true");$("#link_action").html("Ré-activation");open_thickbox("_modal_desactivation_article_vehicule")});$(".middle.cleared .ff_search_box_vehicule").css({display:"none"});$(".list_tree input").click(function(){$(this).parents("form").submit()})});var pageColonne;var caracDiscri;var divProduit;var nb_elem=0;var nb_elem_init=0;var previous_marque_action="";$(function(){$(document).ready(function(){var f;caracDiscri=false;nb_elem_init=$("div.main_body_qte").find("strong").html();if($("div.main_body_center_produits").hasClass("_affichage_colonne")){if($("div.main_body_center_produits").hasClass("_has_carac_discri")){caracDiscri=true}pageColonne=true;divProduit="div.produit"}else{pageColonne=false;divProduit="div.produit"}if(pageColonne){a()}$("select[name=filtre_prix]").change(function(){var h=$("div.main_body_filtre").find("a._tri");var g=$("select[name=filtre_prix] option:selected").val();e(h,g);b(this);if(pageColonne){a()}if($("select._triEquipementier").val()=="tri_haut"||$("select._triEquipementier").val()=="tri_bas"){$("select._triEquipementier").find("option:first").attr("selected","selected")}});$("a._tri").click(function(){var h=$("div.main_body_tri").find("a._tri");var g=this;e(h,g);b(this);if(pageColonne){a()}});$("a._toggle_equipementier").click(function(){var g="._"+$(this).attr("id");c(g,196,207);$(this).fadeOut();e($("div.main_body_tri").find("a._tri"),null);if(pageColonne){a()}$("body").trigger("iframeManagerHeightChange");$(".infobulle").hide()});$("img._modalImg").click(function(){f=this;load_img(f,false)});$("a._modalImgNav").click(function(){recordOutboundEventFull("[Visites sur page listing et FA v4]","Page Listing","Click sur photo classique",__GOOGLE_ANALYTICS__);load_img(this,true)});$("a._modalImg360").click(function(){recordOutboundEventFull("[Visites sur page listing et FA v4]","Page Listing","Click sur photo 360",__GOOGLE_ANALYTICS__);load_img360(this,true)});$("._modalVideo").click(function(){load_video(this)});$("div._toggle_carac_bis").mouseover(function(){if(pageColonne){$(this).children(".produit_col_caracteristiques_bis").show()}else{$(this).children(".produit_caracteristiques_bis").show()}});$("div._toggle_carac_bis").mouseout(function(){if(pageColonne){$(this).children(".produit_col_caracteristiques_bis").hide()}else{$(this).children(".produit_caracteristiques_bis").hide()}});$(".select_generique").change(function(){var g=$(this).val();$.each($(".produit, .produit_col"),function(j,h){if(g==""||$(this).hasClass("_"+g)){c(this,196,207);e($("div.main_body_tri").find("a._tri"),null);if(pageColonne){a()}}else{$(this).hide()}})});$("select[name=filtre_marque]").change(function(){nb_elem=0;callback=false;var g=$("select[name=filtre_marque] option:selected").val();if(g=="tri_bas"||g=="tri_haut"){if(previous_marque_action=="filtre"){callback=g}else{previous_marque_action="tri";var h=$("div.main_body_filtre").find("a._tri");e(h,g);b(this);if(pageColonne){a()}$("select.select_prix").find("option:first").attr("selected","selected");return true}}var j=$(this).val();$.each($(".produit, .produit_col"),function(n,m){var l=false;$(this).find("span._equipementier_name").each(function(){if(!l&&$(this).html().toLowerCase()==j.toLowerCase()){l=true}});if(j==""||l||callback){if(callback){previous_marque_action="tri"}else{previous_marque_action="filtre"}nb_elem++;c(this,196,207);e($("div.main_body_tri").find("a._tri"),null);if(pageColonne){a()}}else{$(this).hide()}});if(callback){previous_marque_action="tri";$("select[name=filtre_marque]").trigger("change");$("div.main_body_qte").find("strong").html(nb_elem_init)}else{$("div.main_body_qte").find("strong").html(nb_elem)}$("select.select_dispo").find("option:first").attr("selected","selected");$("select.select_assemblage").find("option:first").attr("selected","selected");$("select.select_prix").find("option:first").attr("selected","selected")});$(".select_assemblage").change(function(){nb_elem=0;var g=$(this).val();$.each($(".produit, .produit_col"),function(j,h){var l=false;$(this).find("span._assemblage").each(function(){if(!l&&$(this).html().toLowerCase()==g.toLowerCase()){l=true}});if(g==""||l){nb_elem++;c(this,196,207);e($("div.main_body_tri").find("a._tri"),null);if(pageColonne){a()}}else{$(this).hide()}});$("div.main_body_qte").find("strong").html(nb_elem);$("select.select_dispo").find("option:first").attr("selected","selected");$("select._triEquipementier").find("option:first").attr("selected","selected");$("select.select_prix").find("option:first").attr("selected","selected")});$(".select_dispo").change(function(){nb_elem=0;var g=$(this).val();$.each($(".produit, .produit_col"),function(j,h){var l=false;$(this).find("div.produit_visual_stock").each(function(){if(!l&&$(this).hasClass("_"+g)){l=true}});if(g==""||l){nb_elem++;c(this,196,207);e($("div.main_body_tri").find("a._tri"),null);if(pageColonne){a()}}else{$(this).hide()}});$("div.main_body_qte").find("strong").html(nb_elem);$("select.select_assemblage").find("option:first").attr("selected","selected");$("select._triEquipementier").find("option:first").attr("selected","selected");$("select.select_prix").find("option:first").attr("selected","selected")});$("._select_input").click(function(){selectText($(this).attr("id"))})});function e(g,f){$.each(g,function(){if(f==this){if($(f).hasClass("tri_bas")){$(f).removeClass("tri_bas");$(f).addClass("tri_haut")}else{$(f).removeClass("tri_haut");$(f).addClass("tri_bas")}}else{$(this).removeClass("tri_haut");$(this).removeClass("tri_bas")}})}function c(h,g,f){$(h).find("img._resizeImage").aeImageResize({width:g,height:f});$(h).show()}function d(){var f=$(divProduit+":visible").find("span.equipementier_id");var g=[];$.each(f,function(j,h){if(g.indexOf($(h).html())<0){g.push($(h).html())}});$.each(g,function(j,h){b($("._triPrix"),"_equipementier_"+h)})}function b(k,j){var o=String("");if(j!=null){var m=divProduit+"."+j;o="span.prix"}else{var m=divProduit+":visible"}if($(k).hasClass("_triPrix")){o="span.prix"}else{if($(k).hasClass("_triEquipementier")){o="span.equipementier"}else{if($(k).hasClass("_triCoteAssemblage")){o="span.cote_assemblage"}}}var f=$(k).children("option:selected").val();if(__ID_STAGE__=="pneus/dimensions"){var g=window.location.origin;g+=window.location.pathname;var p=window.location.search;p=p.split("&");var n="";var l="";$.each(p,function(q,r){if(r.indexOf("page")==-1&&r.indexOf("order")==-1){if(q>0){l="&"}n+=l+r}});g=g+n;var h=f=="tri_bas"?"asc":"desc";g=g+"&order="+h;window.location.href=g}else{if(o!=""){$(m).sort(function(r,q){if(pageColonne){$(m).removeAttr("style")}var s=$(r).find(o).get();var t=$(q).find(o).get();s=$(s[0]).html();t=$(t[0]).html();if(o=="span.prix"&&f!=""){if(f=="tri_bas"||j!=null){return parse_prx(s)>parse_prx(t)?1:-1}else{return parse_prx(s)<parse_prx(t)?1:-1}}if(o=="span.equipementier"&&f!=""){if(f=="tri_bas"||j!=null){return s>t?1:-1}else{return s<t?1:-1}}})}}}function a(){var h=$("div.main_body_center_produits").find(divProduit+":visible").children();var j=true;var g=0;var f=Array();$.each(h,function(k,l){if(j){g=0;f=Array()}if(k%3==2){j=true}else{j=false}if($(l).height()>g){g=$(l).height()+60}f.push(l);if(j||k==h.length-1){$.each(f,function(m,n){if(!caracDiscri){$(n).height(g+"px")}if(m%3==2){$(n).removeClass("vertical_border")}else{$(n).addClass("vertical_border")}})}})}});function TreeviewClick(e){var d=0,b=0;e=e||event;if((e.target||e.srcElement)===this){$(this).removeClass("itm_hlight");var a=this,c=0;while(is_node(a)&&!$(a).hasClass("list_tree")){while((_isnode=is_node(a=a.parentNode))&&(_isstr=is_str(a.tagName))&&(_notul=!/^ul$/i.test(_tagn=a.tagName))){}c++}if($(this).hasClass("collapsed")){$(this).addClass("item_set").children("ul").slideDown(b,function(){$(this).parent("li").removeClass("collapsed")})}else{$(this).removeClass("item_set").children("ul").slideUp(d,function(){$(this).parent("li").addClass("collapsed")})}$("body").trigger("iframeManagerHeightChange");if(e.stopPropagation){e.stopPropagation()}e.cancelBubble=true;if(e.preventDefault){e.preventDefault()}return false}}function TreeviewMouseover(a){a=a||event;if((a.target||a.srcElement)===this){if($(this).hasClass("collapsed")){$(this).addClass("itm_hlight")}}}function TreeviewMouseout(a){a=a||event;if((a.target||a.srcElement)===this){if($(this).hasClass("collapsed")){$(this).removeClass("itm_hlight")}}}$(document).ready(function(){$("ul.list_tree li.children").bind("click",TreeviewClick).bind("mouseover",TreeviewMouseover).bind("mouseout",TreeviewMouseout);$("#treeview-show_boutique, #treeview-show_boutique.picto_boutique").bind("click",function(a){if($("#list_tree_boutique").is(":hidden")==true){$(this).closest("div").find(".picto_boutique.ferme").hide();$(this).closest("div").find(".picto_boutique.ouvert").show();$("#list_tree_boutique").show();$(this).closest("div").addClass("item_set").removeClass("collapsed")}else{$(this).closest("div").find(".picto_boutique.ouvert").hide();$(this).closest("div").find(".picto_boutique.ferme").show();$("#list_tree_boutique").hide();$(this).closest("div").addClass("collapsed").removeClass("item_set")}return false}).bind("mouseover",function(a){if($(this).closest("div").hasClass("collapsed")){$(this).closest("div").addClass("itm_hlight")}}).bind("mouseout",function(a){if($(this).closest("div").hasClass("itm_hlight")){$(this).closest("div").removeClass("itm_hlight")}})});$(document).ready(function(){var d=[];var b=null;if($("input#autocomplete_b_search_engine_example_values").length){var j=$("input#autocomplete_b_search_engine_example_values").val().split("|");var a=3000;var h=j.length;if(h>1){$("input#autocomplete_b_search_engine").val(_lang.exemple+j[0])}else{$("input#autocomplete_b_search_engine").val("")}var g=0;var b=setInterval(function(){if(g==h-1){g=0}else{g++}if(h>1){$("input#autocomplete_b_search_engine").val(_lang.exemple+j[g])}},a)}if(typeof search_data!="undefined"){$.each(search_data,function(k,l){d.push({text:l.libelle,link:l.url,type:l.type,type_item:l.type_item,ids_enfants:l.ids_enfants,weight:l.weight,noshow:l.noshow,libelle_ok:l.libelle_ok})});c(d)}$("._trigger_autocomplete").click(function(){if($("input#autocomplete_b_search_engine").val().indexOf(_lang.exemple)==0){$("input#autocomplete_b_search_engine").val("");clearInterval(b)}f()});$("._clear_autocomplete").click(function(){$("input#autocomplete_b_search_engine").val("").focus();clearInterval(b)});function f(){var u=false;var v=[];var k=$.trim($("input#autocomplete_b_search_engine").val()).toLowerCase();if(!u){try{if($.md5(k)!=__VARCN__){var l=search_data_selected.length;if(l==1&&search_data_selected[0].value==""){if(__TYPE_PAGE__=="cataloguevehicule"){recordOutboundEventFull("[Clicks sur catalogue v4]","Utilisation mdr","Click_bouton | no_result",__GOOGLE_ANALYTICS__)}}else{if(__TYPE_PAGE__=="cataloguevehicule"){recordOutboundEventFull("[Clicks sur catalogue v4]","Utilisation mdr","Click_bouton | result",__GOOGLE_ANALYTICS__)}}}}catch(r){}v=search_data_selected;var s=20;var t=v.length;var p="false";var o=v.slice(0,s);var n=[];var m=(($(".raw_category").length));if(t>0){n=$.toJSON(o)}if(t>s){p="true"}var w=0;if($("input#type_produit").val()=="vehicule"){w=ktypenr}$.ajax({type:"POST",data:"JSON",url:__AJAX__+"select-search.php",data:"params="+n+"&q="+k+"&overflow="+p+"&limit="+s+"&ktypenr="+w,success:function(q){$.fancybox({padding:0,margin:0,showCloseButton:false,scrolling:"no",titleshow:false,content:q,onComplete:function(){$("._modal_close").click(function(){$.fancybox.close()});$("a._modal_waiting").click(function(){if($(this).attr("href")){var y=$(this).attr("href").split("#");var z="autre";if($(this).hasClass("_is_article")){z="article"}else{if($(this).hasClass("_is_generique")){z="generique"}else{if($(this).hasClass("_is_famille")){z="famille"}else{if($(this).hasClass("_is_categorie")){z="categorie"}}}}if(__TYPE_PAGE__=="cataloguevehicule"){recordOutboundEventFull("[Clicks sur catalogue v4]","Utilisation mdr","Click_suggestion | "+z,__GOOGLE_ANALYTICS__)}if(y[1]){blocat.slide.anchor(y[1]);if(m){$.fancybox.close();return false}}showFancyboxWaiting()}})}})}})}}function c(m){var k=true;var n={text:_lang.no_result,link:""};var l=_lang.approximated_search;$("input#autocomplete_b_search_engine").autocomplete(m,{width:0,max:20,minChars:1,matchContains:true,noResult:true,selectFirst:false,nbClicFocus:1,approximatedSearch:l,noResultValues:n,formatItem:function(o){return o.text}}).result(function(o,q,p){if(q.link){e(q);k=false}else{$(this).val("")}}).focus(function(){if($(this).val().indexOf(_lang.exemple)==0){$(this).val("");clearInterval(b)}}).blur(function(){if($(this).val()==""){}else{if(k){}}}).bind("keypress",function(p){var o=(p.keyCode?p.keyCode:p.which);if(o==13){$(".ac_results").hide();f()}})}function e(m){var l=ktypenr;if(m.type_item=="boutique"){l=""}if(m.type=="famille"){$.ajax({type:"POST",url:__AJAX__+"select-generique.php",data:"ids="+m.ids_enfants+"&ktypenr="+l,success:function(n){$.fancybox({padding:0,margin:0,showCloseButton:false,scrolling:"no",titleshow:false,content:n,onComplete:function(){$("._modal_close").click(function(){$.fancybox.close()});$("a._modal_waiting").click(function(){showFancyboxWaiting()})}})}})}else{if(m.type=="categorie"&&__TYPE_PAGE__=="cataloguevehicule"){if(__TYPE_PAGE__=="cataloguevehicule"){recordOutboundEventFull("[Clicks sur catalogue v4]","Utilisation mdr","Click_suggestion | "+m.type,__GOOGLE_ANALYTICS__)}var k=m.link.split("#")[1];blocat.slide.anchor(k)}else{window.location.href=m.link;showFancyboxWaiting()}}}});$(document).ready(function(){var assurance_precoche=false;if($("a.paiementpanier").length>0){if($("input._modifier_assurance_retour").length>0){if(__ASSURANCE_RETOUR_POLLICITATION__){assurance_precoche=true;recordOutboundEvent("[Assurance Retour]","Impression_precoche",__GOOGLE_ANALYTICS__)}else{assurance_precoche=false;recordOutboundEvent("[Assurance Retour]","Impression_decoche",__GOOGLE_ANALYTICS__)}$(".paiementpanier").click(function(){if(assurance_precoche){var prefix_ga="Impression_precoche"}else{var prefix_ga="Impression_decoche"}if($("input._modifier_assurance_retour").attr("checked")==true){recordOutboundEventFull("[Assurance Retour]",prefix_ga,"etape_suivante_coche",__GOOGLE_ANALYTICS__)}else{recordOutboundEventFull("[Assurance Retour]",prefix_ga,"etape_suivante_decoche",__GOOGLE_ANALYTICS__)}})}else{recordOutboundEvent("[Assurance Retour]","Impression_non_eligible_assurance",__GOOGLE_ANALYTICS__)}}if($("a.adressepanier").length>0){if($("input[name=promesse_client]").length>0){recordOutboundEvent("[Promesse Client sur page Livraison]",$("input[name=promesse_client]").val(),__GOOGLE_ANALYTICS__);$(".adressepanier").click(function(){var livr=$("input[name=modelivraisonn]:checked").val();var livr2="Etape-suivante_";if(livr=="24"){livr2+="Express"}else{if(livr=="48"){livr2+="Rapide"}else{if(livr=="72"){livr2+="Eco"}else{if(livr=="relai"){livr2+="Relais"}else{if(livr=="relai-correos"){livr2+="Relais"}else{if(livr=="relai-ma"){livr2+="Relais"}else{livr2+=livr}}}}}}recordOutboundEventFull("[Promesse Client sur page Livraison]",$("input[name=promesse_client]").val(),livr2,__GOOGLE_ANALYTICS__)})}}if(is_func($.scrollTo)&&window.location.hash&&window.location.hash!="#"&&window.location.hash!="#undefined"){elem=window.location.hash.substring(1);if(jQuery("#"+elem).length>0){$.scrollTo(elem)}}if($("#cgv_special_klarna").length>0){var mode_paiement=$('#panier_paiment input[type="radio"][name="d"]:checked').parent("span")[0].className.replace(/[\s\S]*?pp_([\S]+)[\s\S]*/gi,function(){return arguments[1]}).toUpperCase();if(mode_paiement.indexOf("KLARNA")>=0){$("#cgv_special_klarna").show()}}if($("#cgv_special_billpay").length>0){var mode_paiement=$('#panier_paiment input[type="radio"][name="d"]:checked').parent("span")[0].className.replace(/[\s\S]*?pp_([\S]+)[\s\S]*/gi,function(){return arguments[1]}).toUpperCase();if(mode_paiement.indexOf("BILLPAY")>=0){$("#cgv_special_billpay").show()}}var updateSession=function(ref,action,redirectToEmptyCart,qte_pas){updateSessionHorsPanier(ref,action,redirectToEmptyCart,null,qte_pas)};var updateSessionHorsPanier=function(ref,action,redirectToEmptyCart,o_tpl,qte_pas){if(is_obj(o_tpl)){var newref=ref.split("*")[0]+"*"+ref.split("*")[1]+"*"+qte_pas,html_qte="";var mpi_offer_chosen=ref.split("*")[4];var price_to_use,display_pnfo;if(mpi_offer_chosen!=undefined){price_to_use=o_tpl["price_"+mpi_offer_chosen];display_pnfo=false}else{price_to_use=o_tpl.price;display_pnfo=true}if(action=="voir_offres"){var output='					<div>						<div class="float_l pad0_8" style="width:186px;height:162px;overflow:hidden;" ><img class="_resizeImage" src="'+o_tpl.img+'" /></div>						<div style="position:absolute;width:50%;top:8%;height:143px;left:48%;" >							<div class="thikbox_caddie_produit" >'+o_tpl.desc+"<br /><small>"+o_tpl.dref+'</small>		<br /><br /><span style="font-weight:normal;font-style:normal">'+o_tpl.stock+"</span></div>"+html_qte+"							</div>						</div>					</div>";$("#_modal_panier-content").html($(output).html())}else{if(action=="add_article"){if($("#_modal_panier .tbox_cart_img").length>0){$("#_modal_panier .tbox_cart_img").attr("src",o_tpl.img);$("#_modal_panier .tbox_cart_desc").html(o_tpl.desc);$("#_modal_panier .tbox_cart_dref").html(o_tpl.dref+($("#_modal_panier .tbox_cart_dref").hasClass("_setqte")?html_qte:""));$("#_modal_panier .tbox_cart_price").html(price_to_use);$("#_modal_panier .tbox_cart_qte_force_alert").html(o_tpl.qte_force_alert);if(display_pnfo){$("#_modal_panier .tbox_cart_pnfo").html(o_tpl.pnfo)}}else{var output='					<div>						<div class="float_l pad0_8" style="width:186px;height:162px;overflow:hidden;" ><img class="_resizeImage" src="'+o_tpl.img+'" /></div>						<div style="position:absolute;width:50%;top:8%;height:143px;left:48%;" >							<div class="thikbox_caddie_produit" >'+o_tpl.desc+"<br /><small>"+o_tpl.dref+'</small></div>							<div style="position: absolute;bottom:0;left:0">								<div class="thikbox_caddie_prix" >'+price_to_use+"</div>"+html_qte+"							</div>						</div>					</div>";$("#_modal_panier-content").html($(output).html())}}else{var output='				<div>					<div class="float_l pad0_8" style="width:186px;height:162px;overflow:hidden;" ><img class="_resizeImage" src="'+o_tpl.img+'" /></div>					<div style="position:absolute;width:50%;top:8%;height:143px;left:48%;" >						<div class="thikbox_caddie_produit" >'+o_tpl.desc+"<br /><small>"+o_tpl.dref+'</small></div>						<div style="position: absolute;bottom:0;left:0">							<div class="thikbox_caddie_prix" >'+o_tpl.price+"</div>"+html_qte+"						</div>					</div>				</div>";$("#_modal_panier-content").html($(output).html())}}if(action=="voir_offres"&&$("#mpi_price_fast").length){$("#mpi_price_slow").html(o_tpl.price_slow);$("#mpi_price_fast").html(o_tpl.price_fast);if($("#mpi-rectangle-fast").find("a._produits_col").length){$("#mpi-rectangle-fast").find("a._produits_col").attr("id",ref+"**fast")}if($("#mpi-rectangle-slow").find("a._produits_col").length){$("#mpi-rectangle-slow").find("a._produits_col").attr("id",ref+"**slow")}}}var stopSession=false;if($(document.getElementById(ref)).hasClass("_addselling_turbos")){var htmlPopup=$("div#_modal_panier_turbo").html()}else{if($(document.getElementById(ref)).hasClass("_voir_les_offres")){var htmlPopup=$("div#_modal_marketplace").html();stopSession=true}else{var htmlPopup=$("div#_modal_panier").html()}}var actionClose=true;if(htmlPopup){var btn_pos;var has_checked=false;if($("._btn_position_haut").length>0){btn_pos="haut"}else{btn_pos="bas"}$.fancybox({padding:0,margin:0,showCloseButton:false,scrolling:"no",titleshow:false,content:htmlPopup,onClosed:function(){if(actionClose){if($("._addselling").length&&!has_checked){recordOutboundEvent("[Comportement thickbox ajout panier]","avec_push_produit_bouton_"+btn_pos+"|sortie|sans_ajout_ad-selling",__GOOGLE_ANALYTICS__)}else{if($("._addselling").length){recordOutboundEvent("[Comportement thickbox ajout panier]","avec_push_produit_bouton_"+btn_pos+"|sortie|avec_ajout_ad-selling",__GOOGLE_ANALYTICS__)}else{recordOutboundEvent("[Comportement thickbox ajout panier]","sans_push_produit|sortie",__GOOGLE_ANALYTICS__)}}}},onComplete:function(){$("._modal_close").click(function(){$.fancybox.close()});if(stopSession){push_data_layer_marketplaceinside();$("#fancybox-content a._ajout_panier").click(addToCartFunction);var mpi_cutoff=$("#fancybox-content span.mpi-cutoff");if(mpi_cutoff.length){if(o_tpl.cpt_rebour!=null){var txt=mpi_cutoff.html();Rebour(mpi_cutoff,o_tpl.cpt_rebour,txt)}else{Rebour(mpi_cutoff,mpi_cutoff.data("rebour"),mpi_cutoff.data("rebour-affichage"))}}}$("._modal_panier-action-shop").click(function(){if($("._addselling").length&&($("._addselling").find("input[type=checkbox]").filter(":checked").length==0)){recordOutboundEvent("[Comportement thickbox ajout panier]","avec_push_produit_bouton_"+btn_pos+"|continuer_achat|sans_ajout_ad-selling",__GOOGLE_ANALYTICS__)}else{if($("._addselling").length){recordOutboundEvent("[Comportement thickbox ajout panier]","avec_push_produit_bouton_"+btn_pos+"|continuer_achat|avec_ajout_ad-selling",__GOOGLE_ANALYTICS__)}else{recordOutboundEvent("[Comportement thickbox ajout panier]","sans_push_produit|continuer_achat",__GOOGLE_ANALYTICS__)}}actionClose=false;$.fancybox.close();return false});$("._modal_panier-action-pay").click(function(){if($("._addselling").length&&($("._addselling").find("input[type=checkbox]").filter(":checked").length==0)){recordOutboundEvent("[Comportement thickbox ajout panier]","avec_push_produit_bouton_"+btn_pos+"|finaliser_commande|sans_ajout_ad-selling",__GOOGLE_ANALYTICS__)}else{if($("._addselling").length){recordOutboundEvent("[Comportement thickbox ajout panier]","avec_push_produit_bouton_"+btn_pos+"|finaliser_commande|avec_ajout_ad-selling",__GOOGLE_ANALYTICS__)}else{recordOutboundEvent("[Comportement thickbox ajout panier]","sans_push_produit|finaliser_commande",__GOOGLE_ANALYTICS__)}}actionClose=false;$.fancybox.close();window.location=$(this).attr("href");return false});$("._addselling_link").click(function(){recordOutboundEvent("[Comportement thickbox ajout panier]","avec_push_produit_bouton_"+btn_pos+"|clic_push_produit",__GOOGLE_ANALYTICS__);actionClose=false});$("#fancybox-content input._updateQte").click(function(){var ref=$(this).val(),$qte=$("#fancybox-content input[class="+ref+"]"),value=parseInt($qte.val());var qte_pas=parseInt(ref.split("*")[2]);if($(this).hasClass("plus")){value+=qte_pas;if(value>99){value=100-qte_pas}else{tooltip.panier.show("none",ref,"add_article")}}else{value-=qte_pas;if(value<1){value=qte_pas}else{tooltip.panier.show("none",ref,"del_article")}}$qte.attr("value",value)});var $adds_list=$("#adds_list","#fancybox-content").children("li"),$adds_length=$adds_list.length,$pa_left=$('<span class="curs_hand picto pa_left" style="display:none;position:absolute;z-index:3;left:-10px;top:32px;"></span>'),$pa_right=$('<span class="curs_hand picto pa_right" style="position:absolute;z-index: 3;right:-10px;top:32px;"></span>');$("#fancybox-content #adds_list div.checkbox").each(function(){var lbl=$("label",this).attr("for");$("input.checkbox",this).attr("name",lbl).attr("id",lbl).bind("change",function(){if(this.checked){var ref=this.value;if($("input#ref_article").attr("value")){ref+="*"+$("input#ref_article").attr("value")}tooltip.panier.show("none",ref,"add_article")}else{tooltip.panier.show("none",this.value,"sdel_article")}if($("._addselling").length&&($("._addselling").find("input[type=checkbox]").filter(":checked").length>0)){has_checked=true}else{has_checked=false}})});if($adds_length>2){$("#adds_list","#fancybox-content").parent().parent().css("position","relative").append($pa_left).append($pa_right);$("#adds_list","#fancybox-content").parent().jCarouselLite({btnNext:".f_addcart .pa_right",btnPrev:".f_addcart .pa_left",visible:2,circular:false,speed:750,afterEnd:function(elm){var elm_all=[],elm_first=$("#adds_list","#fancybox-content").children("li").first()[0],elm_last=$("#adds_list","#fancybox-content").children("li").last()[0],elm_left=$(".f_addcart .pa_left"),elm_right=$(".f_addcart .pa_right");elm_all=$.makeArray(elm);if($.inArray(elm_last,elm_all)>=0){elm_right.css("display","none")}else{elm_right.css("display","inline-block")}if($.inArray(elm_first,elm_all)>=0){elm_left.css("display","none")}else{elm_left.css("display","inline-block")}}})}$("#fancybox-content img._resizeImage").aeImageResize({width:186,height:162}).scale("center")}})}if(stopSession==false){tooltip.panier.show(o_tpl!=null?"none":"none",ref,action,function(){if(redirectToEmptyCart){window.location.href="./"}})}};var newsprice=function(ref,qte,qteI){var retour="";var prixu=$("td [class=prixu-"+ref+"]").html();var prixuConsigne=$("td [class=prixu-CONSIGNE-"+ref+"]").html();if(prixuConsigne==null||prixuConsigne==""){prixuConsigne="0"}prixu=parse_prx(prixu);prixuConsigne=parse_prx(prixuConsigne);var nprice=prixu*parseInt(qte);var npriceConsigne=prixuConsigne*parseInt(qte);nprice=nprice.toFixed(2);npriceConsigne=npriceConsigne.toFixed(2);$("td [class=prixt-"+ref+"]").html(_PRX(nprice));$("td [class=prixt-CONSIGNE-"+ref+"]").html(_PRX(npriceConsigne));var prixtotal=parse_prx($("[class=prixtt]").html());var refSup=qte-qteI;var difprix=(prixu+prixuConsigne)*parseInt(refSup);difprix=difprix.toFixed(2);var prixfinal=prixtotal+parseFloat(difprix);prixfinal=prixfinal.toFixed(2);$("[class=prixtt]").html(_PRX(prixfinal));if($("#contenupanier #bloc_promo").length||$("#contenupanier #bloc_promo_val").length){retour="refresh"}if($("#progressbar").length){progressebar(prixfinal)}return retour};function confirm_pop_promesse(_this,_func,msg,no,yes){var ids=$(_this).data("ids")||+new Date();yes='<span style="display: inline; position: static; background: url(/img/commun/color/gray/button.png) no-repeat scroll right 1px transparent; font-family: Arial,verdana,Helvetica,sans-serif; font-size: 12px; line-height: 27px; margin-left: 12px; padding: 6px 0 7px; height: auto; *padding: 0; zoom:1;"><span style="display: inline; background: url(/img/commun/color/gray/button.png?v=1542113957) no-repeat scroll left -26px transparent; color: #FFFFFF; font-weight: bold; left: -12px; margin: 0; padding: 6px 0 7px; height: auto; *padding: 0; zoom:1; position: relative; font-family: Arial,verdana,Helvetica,sans-serif; font-size: 12px; line-height: 27px;"><input style="background-color: transparent; border: 0 none; clear: both; color: #FFFFFF; cursor: pointer; display: inline-block; font-size: 11px; font-weight: bold; height: 27px; left: 6px; margin: 0; padding: 0 12px; position: relative; text-shadow: 1px 1px 0 rgba(0, 0, 0, 0.333); text-transform: lowercase; vertical-align: baseline; width: auto;" type="submit" id="_'+ids+'_y" value="'+(yes||_lang.Oui)+'" /></span></span>';no='<span style="display: inline; position: static; background: url(/img/commun/color/tangerine/button.png) no-repeat scroll right 1px transparent; font-family: Arial,verdana,Helvetica,sans-serif; font-size: 12px; line-height: 27px; margin-left: 12px; padding: 6px 0 7px; height: auto; *padding: 0; zoom:1;"><span style="display: inline; background: url(/img/commun/color/tangerine/button.png?v=1542113957) no-repeat scroll left -26px transparent; color: #FFFFFF; font-weight: bold; left: -12px; margin: 0; padding: 6px 0 7px; height: auto; *padding: 0; zoom:1; position: relative; font-family: Arial,verdana,Helvetica,sans-serif; font-size: 12px; line-height: 27px;"><input style="background-color: transparent; border: 0 none; clear: both; color: #FFFFFF; cursor: pointer; display: inline-block; font-size: 11px; font-weight: bold; height: 27px; left: 6px; margin: 0; padding: 0 12px; position: relative; text-shadow: 1px 1px 0 rgba(0, 0, 0, 0.333); text-transform: lowercase; vertical-align: baseline; width: auto;" type="submit" id="_'+ids+'_n" value="'+(no||_lang.Non)+'" /></span></span>';$("#_"+ids+"_c").remove();$(_this).removeData("ids");$(_this).removeData("stop");var pop='<span id="_'+ids+'_c" style="position: absolute; left: 50%; top: 0; z-index: 1; width: 0; height: 0; border: 0 none; padding: 0; visibility: hidden;">			<span style="position: absolute; left: 0; top: 0; width: auto; height: 0; margin: -20px 0 0; border: 0 none; padding: 0; background-color: transparent; font-size: 0; line-height: 0;">				<span style="display: block; position: relative; left: -50%; top: 0; width: 329px; height: 115px; margin: -144px 0 0; border-style: solid; border-width: 1px; border-color: #C7CCD5 #939CA9 #939CA9 #C7CCD5; padding: 12px 0 46px; background: url(/img/commun/main/grids/background.png?v=1542113957) repeat-x scroll center 116% #FFFFFF; color: #000000; font-size: 12px; line-height: normal; vertical-align: baseline; font-weight: normal; box-shadow: 1px 2px 3px #9F9F9F; border-radius: 12px; text-align: left; text-shadow: none; text-transform: none; visibility: visible; cursor: default;">					<span style="overflow: auto; display: block; position: relative; left:0; top: 0; width: auto; height: 150px; margin: 0 16px; border-style: solid; border-width: 0px; border-color: #939CA9 #C7CCD5 #C7CCD5 #939CA9; padding: 6px 12px; background: none repeat-y scroll -1874px 0 transparent; color: #373737; font-size: 12px; line-height: normal; vertical-align: baseline; font-weight: bold; border-radius: 0; text-shadow: none; text-transform: none; visibility: visible; cursor: default;" >'+msg+'			</span>					<span style="position: absolute; left: 0; bottom:0; padding: 0 0 10px; width: 100%; height: auto; cursor: default; text-align: center;">						<span style="display: inline; position: static; padding: 0 4px 0 0; height: auto; cursor: default;">'+yes+'</span>						<span style="display: inline; position: static; padding: 0 0 0 4px; height: auto; cursor: default;">'+no+'</span>					</span>					<span style="position: absolute; left: 0; cursor: default; margin: 0; padding: 0; height: 13px; top: 100%; width: 100%;">';for(var cpt=36;cpt>=0;cpt=cpt-4){pop+='<span style="display:block; position: relative; left: 0; top: 0; cursor: default; padding: 1px 0 0; height: 0; overflow: hidden; margin: 0 auto; width: '+cpt+'px; border-style: solid; border-width: 0 1px; border-color: #C7CCD5 #939CA9 #939CA9 #C7CCD5; background-color: #FFFFFF; box-shadow: 1px 2px 2px #9F9F9F;"></span>'}pop+="</span>				</span>			</span>		</span>";$(_this).data("ids",ids);$(_this).parent("*").append(pop);$("#_"+ids+"_y").click(function(){$("#_"+ids+"_c").remove();$(_this).removeData("ids");$(_this).data("stop",false);_func.call(_this)});$("#_"+ids+"_n").click(function(){$("#_"+ids+"_c").remove();$(_this).removeData("ids");$(_this).data("stop",true);_func.call(_this)});return false}function confirm_pop(_this,_func,msg,no,yes){var ids=$(_this).data("ids")||+new Date();if($("#content_ff").exists()){no_js_action="highlight_ff_selector();"}else{no_js_action="void(0);"}yes='<span style="display: inline; position: static; background: url(/img/commun/color/tangerine/button.png) no-repeat scroll right 1px transparent; font-family: Arial,verdana,Helvetica,sans-serif; font-size: 12px; line-height: 27px; margin-left: 12px; padding: 6px 0 7px; height: auto; *padding: 0; zoom:1;"><span style="display: inline; background: url(/img/commun/color/tangerine/button.png?v=1542113957) no-repeat scroll left -26px transparent; color: #FFFFFF; font-weight: bold; left: -12px; margin: 0; padding: 6px 0 7px; height: auto; *padding: 0; zoom:1; position: relative; font-family: Arial,verdana,Helvetica,sans-serif; font-size: 12px; line-height: 27px;"><input style="background-color: transparent; border: 0 none; clear: both; color: #FFFFFF; cursor: pointer; display: inline-block; font-size: 11px; font-weight: bold; height: 27px; left: 6px; margin: 0; padding: 0 12px; position: relative; text-shadow: 1px 1px 0 rgba(0, 0, 0, 0.333); text-transform: lowercase; vertical-align: baseline; width: auto;" type="submit" id="_'+ids+'_y" value="'+(yes||_lang.Oui)+'"/></span></span>';no='<a href="javascript:'+no_js_action+'" style="background-color: transparent; border: 0 none; color: #4F4F4F; cursor: pointer; display: inline-block; font-size: 11px; font-weight: bold; height: auto; margin: 0; padding: 0; position: static; text-shadow: none; vertical-align: baseline; width: auto; text-decoration: underline;" id="_'+ids+'_n" >&laquo; '+(no||_lang.Non)+"</a>";$("#_"+ids+"_c").remove();$(_this).removeData("ids");$(_this).removeData("stop");var pop='<span id="_'+ids+'_c" style="position: absolute; left: 50%; top: 0; z-index: 1; width: 0; height: 0; border: 0 none; padding: 0; visibility: hidden;">			<span style="position: absolute; left: 0; top: 0; width: auto; height: 0; margin: -20px 0 0; border: 0 none; padding: 0; background-color: transparent; font-size: 0; line-height: 0;">				<span style="display: block; position: relative; left: -50%; top: 0; width: 329px; height: 92px; margin: 4px 0 0; border-style: solid; border-width: 1px; border-color: #C7CCD5 #939CA9 #939CA9 #C7CCD5; padding: 12px 0 46px; background: url(/img/commun/main/grids/background.png?v=1542113957) repeat-x scroll center 116% #FFFFFF; color: #000000; font-size: 12px; line-height: normal; vertical-align: baseline; font-weight: normal; box-shadow: 1px 2px 3px #9F9F9F; border-radius: 12px; text-align: left; text-shadow: none; text-transform: none; visibility: visible; cursor: default;">					<span style="overflow: auto; display: block; position: relative; left:0; top: 0; width: auto; height: 80px; margin: 0 16px; border-style: solid; border-width: 0px; border-color: #939CA9 #C7CCD5 #C7CCD5 #939CA9; padding: 6px 12px; background: none repeat-y scroll -1874px 0 transparent; color: #373737; font-size: 12px; line-height: normal; vertical-align: baseline; font-weight: bold; border-radius: 0; text-shadow: none; text-transform: none; visibility: visible; cursor: default;" >'+msg+'			</span>					<span style="position: absolute; left: 0; bottom:0; padding: 0 0 10px; width: 100%; height: auto; cursor: default; text-align: center;">						<span style="display: inline; position: static; padding: 0 4px 0 0; height: auto; cursor: default;">'+no+'</span>						<span style="display: inline; position: static; padding: 0 0 0 4px; height: auto; cursor: default;">'+yes+'</span>					</span>					<span style="position: absolute; left: 0; cursor: default; margin: 0; padding: 0; height: 13px; top: 100%; width: 100%;">';for(var cpt=36;cpt>=0;cpt=cpt-4){pop+='<span style="display:block; position: relative; left: 0; top: 0; cursor: default; padding: 1px 0 0; height: 0; overflow: hidden; margin: 0 auto; width: '+cpt+'px; border-style: solid; border-width: 0 1px; border-color: #C7CCD5 #939CA9 #939CA9 #C7CCD5; background-color: #FFFFFF; box-shadow: 1px 2px 2px #9F9F9F;"></span>'}pop+="</span>				</span>			</span>		</span>";$(_this).data("ids",ids);$(_this).parent("*").append(pop);$("#_"+ids+"_y").click(function(){$("#_"+ids+"_c").remove();$(_this).removeData("ids");$(_this).data("stop",false);_func.call(_this)});$("#_"+ids+"_n").click(function(){$("#_"+ids+"_c").remove();$(_this).removeData("ids");$(_this).data("stop",true);_func.call(_this)});return false}function addToCartFunction(){var html_img,html_desc,html_dref,html_price,html_price_slow,html_price_fast,html_stock,html_pnfo,html_qte_alert,cpt_rebour,cpt_rebour_affichage,html_brand,msg_pop,ref=$(this).attr("id");var qte_pas_force=1;try{var tmpnr=null;tmpnr=ref.split("*")[0];window.ktypenr=tmpnr>0?tmpnr:null}catch(e){window.ktypenr=null}if(ktypenr==null){msg_pop=_lang.veh_selec_check}else{if($(this).hasClass("_add_checked")){msg_pop=_lang.veh_selec_checked}}if(is_str(msg_pop)&&$(this).hasClass("_type_v")){if($(this).data("stop")==undefined){confirm_pop(this,arguments.callee,msg_pop,((ktypenr==null)?_lang.Non_selec_v:null),null);return false}else{var _ok=!$(this).data("stop");$(this).removeData("stop");if(!_ok){if(ktypenr==null){if(__STAGE__=="/eqgeneriqueserie"){$("form#fs_modal").append('<input type="hidden" id="fs_modal_refarticle" value="'+$(this).closest('div[class^="cadre"]').find(".produit_header a").attr("href")+'" />')}$('a[class^="_modal_select_v"]').click()}return false}}}else{if($(this).hasClass("_add_dispo_a_verifier")){if($(this).data("stop")==undefined){confirm_pop_promesse(this,arguments.callee,_lang.dispo_a_verifier,null,null);return false}else{var _ok=!$(this).data("stop");$(this).removeData("stop");if(!_ok){return false}}}else{if($(this).hasClass("_add_qte_pas_multi")){if($(this).data("stop")==undefined){var multi=$(this).attr("id").split("*");var qte_multi=multi[2];confirm_pop(this,arguments.callee,_lang.veh_selec_multi.replace(/%s/g,qte_multi),null,null);return false}else{var _ok=!$(this).data("stop");$(this).removeData("stop");if(!_ok){return false}}}}}var tmpItem=$(this).attr("id").split("*");if(tmpItem.length>3){var item=$(document.getElementById(tmpItem[0]+"*"+tmpItem[1]+"*"+tmpItem[2]))}else{var item=$(this)}if(item.data("dlpmpi")){push_data_layer_mpi_j0()}if(item.hasClass("_article")){html_img=item.closest("div.article").find("div.article_col_left img._mainImage").attr("src");html_desc=item.closest("div.article").find("div.article_header_name").text();html_dref=item.closest("div.article").find("div.article_header_marqueref").text();html_qte_alert=item.closest("div.article").find("div.produit_qte_force_alert").text();html_stock=item.closest("div.article").find("div.produit_header_etat_stock").text();if(item.closest("div.article").find("span.prix_alt").hasClass("disp_b")){html_price="£"+item.closest("div.article").find("span.prix_alt").html().trim().split("£")[1];if(item.closest("div.article").find("span.prix_alt").data("slowprice")){html_price_slow="£"+item.closest("div.article").find("span.prix_alt").data("slowprice").split("£")[1];html_price_fast="£"+item.closest("div.article").find("span.prix_alt").data("fastprice").split("£")[1]}}else{if(item.closest("div.article").find("span.prix_img").hasClass("disp_b")){html_price=item.closest("div.article").find("span.prix_img").html().trim();html_price_slow=item.closest("div.article").find("span.prix_img").data("slowprice");html_price_fast=item.closest("div.article").find("span.prix_img").data("fastprice")}else{html_price=item.closest("div.article").find("span.prix").html().trim();html_price_slow=item.closest("div.article").find("span.prix").data("slowprice");html_price_fast=item.closest("div.article").find("span.prix").data("fastprice")}}html_pnfo=item.closest("div.article").find("span.pnfo").text();html_brand=item.closest("div.article").find("span._equipementier").text();qte_pas_force=item.closest("div.article").find(".qte_pas_force").val()}else{if($(this).hasClass("_produits")){if($("#_modal_marketplace").length){$("#_modal_marketplace").find('a[class~="_ajout_panier"]').addClass("_produits")}html_img=item.closest("div.produit").find("div.produit_visuel img._mainImage").attr("src");html_desc=item.closest("div.produit").find("div.produit_header_name").text();html_dref=item.closest("div.produit").find("div.produit_header_marqueref").text();html_qte_alert=item.closest("div.produit").find("div.produit_qte_force_alert").text();html_stock=item.closest("div.produit").find("div.produit_header_etat_stock").text();if(item.closest("div.produit").find("span.prix_alt").hasClass("disp_b")){html_price="£"+item.closest("div.produit_col").find("span.prix_alt").html().trim().split("£")[1];if(item.closest("div.produit_col").find("span.prix_alt").data("slowprice")){html_price_slow="£"+item.closest("div.produit_col").find("span.prix_alt").data("slowprice").split("£")[1];html_price_fast="£"+item.closest("div.produit_col").find("span.prix_alt").data("fastprice").split("£")[1]}}else{if(item.closest("div.produit").find("span.prix_img").hasClass("disp_b")){html_price=item.closest("div.produit").find("span.prix_img").html().trim();html_price_slow=item.closest("div.produit").find("span.prix_img").data("slowprice");html_price_fast=item.closest("div.produit").find("span.prix_img").data("fastprice")}else{html_price=item.closest("div.produit").find("span.prix").html().trim();html_price_slow=item.closest("div.produit").find("span.prix").data("slowprice");html_price_fast=item.closest("div.produit").find("span.prix").data("fastprice")}}html_pnfo=item.closest("div.produit").find("span.pnfo").text();html_brand=item.closest("div.produit").find("span.equipementier").find("span").text();qte_pas_force=item.closest("div.produit").find(".qte_pas_force").val()}else{if(item.hasClass("_produits_col")){if($("#_modal_marketplace").length){$("#_modal_marketplace").find('a[class~="_ajout_panier"]').addClass("_produits_col")}html_img=item.closest("div.produit_col").find("div.produit_visuel img._mainImage").attr("src");html_desc=item.closest("div.produit_col").find("div.produit_header_name").text();html_dref=item.closest("div.produit_col").find("div.produit_header_marqueref").text();html_qte_alert=item.closest("div.produit_col").find("div.produit_qte_force_alert").text();html_stock=item.closest("div.produit_col").find("div.produit_header_etat_stock").text();if(item.closest("div.produit_col").find("span.prix_alt").hasClass("disp_b")){html_price="£"+item.closest("div.produit_col").find("span.prix_alt").html().trim().split("£")[1];if(item.closest("div.produit_col").find("span.prix_alt").data("slowprice")){html_price_slow="£"+item.closest("div.produit_col").find("span.prix_alt").data("slowprice").split("£")[1];html_price_fast="£"+item.closest("div.produit_col").find("span.prix_alt").data("fastprice").split("£")[1]}}else{if(item.closest("div.produit_col").find("span.prix_img").hasClass("disp_b")){html_price=item.closest("div.produit_col").find("span.prix_img").html().trim();html_price_slow=item.closest("div.produit_col").find("span.prix_img").data("slowprice");html_price_fast=item.closest("div.produit_col").find("span.prix_img").data("fastprice")}else{html_price=item.closest("div.produit_col").find("span.prix").html().trim();html_price_slow=item.closest("div.produit_col").find("span.prix").data("slowprice");html_price_fast=item.closest("div.produit_col").find("span.prix").data("fastprice")}}html_pnfo=item.closest("div.produit_col").find("span.pnfo").text();html_brand=item.closest("div.produit_col").find("span.equipementier").find("span").text();qte_pas_force=item.closest("div.produit_col").find(".qte_pas_force").val()}}}if($(this).hasClass("_voir_les_offres")){var action="voir_offres"}else{var action="add_article"}if(item.data("rebour")){cpt_rebour=item.data("rebour")}var html_price_datalayer=html_price.replace(/&nbsp;/gi," ").replace(/<([^>]+?)([^>]*?)>(.*?)<\/\1>/ig,"");var price_datalayer=Number(html_price_datalayer.replace(/[^0-9\.-]+/g,""));var references_article=ref.split("*");var qte_dl=references_article[2].trim()*qte_pas_force;var category=dataLayer[0]["product_category"];$("input#ref_article").attr("value",references_article[1]);if(action!="voir_offres"){$("#quantitePanier").removeClass("disp_n");var p={name:html_desc.trim(),id:references_article[1].trim(),price:price_datalayer.toString(),brand:html_brand,category:category,quantity:qte_dl.toString()};push_data_layer_product("add",html_desc.trim(),p)}if(__TYPE_PAGE__=="listeproduit"||__STAGE__=="/eqgeneriqueserie"||__STAGE__=="/dimensions"){var attrClass=$(this).parents().find("div.produit").attr("class").split(" ")[4];var id_gen=attrClass.split("_")[2];$.ajax({async:false,type:"POST",url:__AJAX__+"_addselling.php",data:"ref_article="+references_article[1]+"&id_gen="+id_gen+"&country="+__COUNTRY__,success:function(msg){$("#containeraddsell").html(msg)}})}var ajaxCookie=__AJAX__+"majCookieCrossBasket.php";var post={data:{c:"addAds",r:references_article[1]}};$.post(ajaxCookie,post);updateSessionHorsPanier(ref,action,false,{img:html_img,cpt_rebour:cpt_rebour,cpt_rebour_affichage:cpt_rebour_affichage,desc:html_desc,dref:html_dref,stock:html_stock,price:html_price,price_slow:html_price_slow,price_fast:html_price_fast,pnfo:html_pnfo,qte_force_alert:html_qte_alert},ref.split("*")[2]);$.ajax({async:false,type:"POST",url:__AJAX__+"afficher_infos_ope.php",data:"",success:function(infos){$(".frame_modal #afficher_infos_ope").html(infos)}});return false}$("a._ajout_panier").click(addToCartFunction);$("._ajouter_panier_addselling_turbos").click(function(){var MyArray=$(".reference_addselling_turbo:checked");MyArray.each(function(index,value){tooltip.panier.show("none",$(value).attr("id"),"add_article")});return true});$(".ajout_panier_nothickbox").click(function(){var ref=$(this).attr("id");updateSession(ref,"add_article",false,ref.split("*")[2])});$("input._updateQte").click(function(){if($(this).parent().hasClass("_active")){var action;var recalculate;var redirectToEmptyCart=false;var ref=$(this).val();var references=ref.split("*");var qte_pas=parseInt(references[2]);var value=$("[class="+ref+"]").val();if($(this).hasClass("plus")){action="add_article";recalculate=parseInt(value)+qte_pas;if(recalculate>=99){recalculate=99-(99%qte_pas)}}else{action="del_article";recalculate=parseInt(value)-qte_pas;if(recalculate<=qte_pas){recalculate=qte_pas}}$("[class="+ref+"]").attr("value",recalculate);if(newsprice(ref,recalculate,value)=="refresh"){redirectToEmptyCart=true}updateSession(ref,action,redirectToEmptyCart,qte_pas)}});$("input.corbeille").click(function(){if($(this).parent().hasClass("_active")){var value=$(this).val();var i=value.split("*");var id=i["0"];var prixt=$("td [class*=prixt-"+value+"]").html();var prixtConsigne=$("td [class*=prixt-CONSIGNE-"+value+"]").html();if(prixtConsigne==null){prixtConsigne=0}prixt=parse_prx(prixt);prixtConsigne=parse_prx(prixtConsigne);var l=$("[class*=tr-"+id+"]").length;var nbElemeToDelete=$("[class*=tr-"+value+"]").length;var row=parseInt(l)-nbElemeToDelete;var c=$("[class*=tr-"+value+"] td").length;var nbC=6;if($(this).hasClass("_has_consigne")){nbC=11}var tdfirst=$("[class*=tr-"+id+"] td:first").html();if(row<1){row=1}var redirectToEmptyCart=false;if($("#contenupanier tr.groupe td.operation input[class*=corbeille_active]").length==1){redirectToEmptyCart=true}else{$("[class=groupe tr-"+id+" tr-"+value+"]").remove();if(c==nbC&&(l>1||(l-1==1))){$("[class*=tr-"+id+"] td:first").before("<td class='vehicule'>"+tdfirst+"</tr>")}$("[class*=tr-"+id+"] td:first").attr("rowspan",row);var prixtotal=parse_prx($("[class=prixtt]").html());var prixfinal=prixtotal-prixt-prixtConsigne;prixfinal=prixfinal.toFixed(2);$("[class=prixtt]").html(_PRX(prixfinal))}updateSession(value,"corbeille",redirectToEmptyCart,1);if($("#contenupanier #bloc_promo").length){window.location.href=$("[name=formcodepromo]").attr("action")}if($("#contenupanier #bloc_promo_val").length){window.location.href=$("[name=formcodepromo]").attr("action")}if($("#progressbar").length){progressebar(parse_prx($("[class=prixtt]").html()))}}});$("input.corbeille_codepromo").click(function(){$("#formcodepromo").submit()});progressebar=function(prixfinal){$.ajax({type:"POST",url:__AJAX__+"mon_panier-livraison-gratuite.php",success:function(msg){$("#livraison_gratuite .texte").load(__AJAX__+"mon_panier-livraison-gratuite.php").fadeIn("callback",function(){var ratio=$("[class=ratio]").html();var pourcent=parseFloat(prixfinal)*ratio;if(pourcent<=100){$("#progressbar").progressBar(pourcent)}else{$("#progressbar").progressBar(100)}})}})};$(".del").click(function(){var nb_adresses=$.find("._adresse").length;var current_adress=$(this).parents("._adresse").filter(":first");var id_current_adress=current_adress.attr("id").substring(8);var flagme=false;if(nb_adresses>=2){current_adress.remove();var first_adress=$("._adresse").first();first_adress.find("input:radio").attr("checked","checked");if(nb_adresses==2){first_adress.find("a.del").remove()}$.ajax({type:"POST",url:__AJAX__+"mon_panier-adresse.php",data:"id="+id_current_adress+"&action=del",success:function(msg){}});$.ajax({type:"POST",url:__AJAX__+"mon_panier-adresse.php",data:"id="+first_adress.attr("id").substring(8)+"&action=choix",success:function(msg){$("#container [class=mode]").fadeOut("slow",function(){});$("#container").load(__AJAX__+"mon_panier-livraison.php").fadeIn("slow")}})}else{}});$("input[type=radio][name=adresse]").click(function(){$.ajax({type:"POST",url:__AJAX__+"mon_panier-adresse.php",data:"id="+$(this).val()+"&action=choix",success:function(msg){$("#container div.middle").height($("#container div.middle").height());$("#container [class=mode]").fadeOut("slow",function(){});$("#container").load(__AJAX__+"mon_panier-livraison.php").fadeIn("slow")}})});$("a.paiementpanier").click(function(){var $cb=$("input[type=checkbox][class*=conditiongeneralvente]");var $cgvklarna=$("input[type=checkbox][class*=conditiongeneralventeklarna]");var $cgvbillpay=$("input[type=checkbox][class*=conditiongeneralventebillpay]");if($cb.length&&$(this).parents().hasClass("next")&&!$(this).parents().hasClass("disabled")){if(!$cb.is(":checked")){$.validationEngine.buildPromptLarge($cb,_lang["accept-cgv-error"],"error");return false}else{if(($cgvklarna.length&&$cgvklarna.is(":visible")&&!$cgvklarna.is(":checked"))){$.validationEngine.buildPromptLarge($cgvklarna,_lang["accept-cgv-klarna-error"],"error");return false}else{if(($cgvbillpay.length&&$cgvbillpay.is(":visible")&&!$cgvbillpay.is(":checked"))){$.validationEngine.buildPromptLarge($cgvbillpay,_lang["accept-cgv-klarna-error"],"error");return false}else{var mode_paiement=$('#panier_paiment input[type="radio"][name="d"]:checked').parent("span")[0].className.replace(/[\s\S]*?pp_([\S]+)[\s\S]*/gi,function(){return arguments[1]}).toUpperCase();if(mode_paiement.indexOf("BILLPAY")>=0&&$("#b_identifier_billpay").length>0){var input_billpay=$("#b_identifier_billpay");if(input_billpay.val()==""){alert(_lang.id_klarna_invalide);return false}else{var reussi=false;$.fancybox.showActivity();$.ajax({type:"POST",async:false,url:__AJAX__+"billpay_maj.php",data:"billpay_date_naissance="+input_billpay.val(),success:function(msg){$.fancybox.hideActivity();if(msg=="true"){thickboxgenerercommande();reussi=true}else{alert(_lang.id_klarna_invalide)}return false}});if(reussi){return true}else{return false}}}if(mode_paiement.indexOf("KLARNA")>=0&&($("#b_identifier_klarna").length>0||$("#b_identifier_klarna_account").length>0)){if(mode_paiement.indexOf("KLARNA_ACCOUNT")>=0){var input_klarna=$("#b_identifier_klarna_account")}else{var input_klarna=$("#b_identifier_klarna")}if(input_klarna.val()==""){alert(_lang.id_klarna_invalide);return false}else{var reussi=false;$.fancybox.showActivity();$.ajax({type:"POST",async:false,url:__AJAX__+"klarna-commande.php",data:"id_client_klarna="+input_klarna.val(),success:function(msg){$.fancybox.hideActivity();try{var arrayOfObjects=eval(msg)}catch(e){var arrayOfObjects=null}if(arrayOfObjects&&arrayOfObjects.length){var html='<div class="_content_adress_klarna"><center><table cellspacing="10">';for(var i=0;i<arrayOfObjects.length;i++){if(i==0){var selected='checked="checked"'}else{var selected=""}if(arrayOfObjects[i].civilite!==undefined){html+='<tr><td valign="middle"><input type="radio" '+selected+' name="adress_klarna" value="?action=update_adress_klarna&livr_civilite='+arrayOfObjects[i].civilite+"&livr_nom="+arrayOfObjects[i].nom+"&livr_prenom="+arrayOfObjects[i].prenom+"&livr_adresse1="+arrayOfObjects[i].adresse1+"&livr_cp="+arrayOfObjects[i].cp+"&livr_ville="+arrayOfObjects[i].ville+'"></td><td valign="middle" align="left">';html+=arrayOfObjects[i].civilite+" "+arrayOfObjects[i].nom+" "+arrayOfObjects[i].prenom+"<br>"}else{html+='<tr><td valign="middle"><input type="radio" '+selected+' name="adress_klarna" value="?action=update_adress_klarna&livr_nom='+arrayOfObjects[i].nom+"&livr_prenom="+arrayOfObjects[i].prenom+"&livr_adresse1="+arrayOfObjects[i].adresse1+"&livr_cp="+arrayOfObjects[i].cp+"&livr_ville="+arrayOfObjects[i].ville+'"></td><td valign="middle" align="left">';html+=arrayOfObjects[i].nom+" "+arrayOfObjects[i].prenom+"<br>"}html+=arrayOfObjects[i].adresse1+"<br>";html+=arrayOfObjects[i].cp+" "+arrayOfObjects[i].ville+"";html+="</td></tr>"}html+="</table></center></div>";open_thickbox("klarna_adresses");$("._content_adress_klarna").remove();$("._content_modal").html($("._content_modal").html()+html);var href=$("._target_link1").attr("href");$("._target_link1").attr("href","javascript:;");$("._target_link1").click(function(){$("._target_link1").attr("href",$("input[name=adress_klarna]:checked").val())})}else{if(msg=="true"){thickboxgenerercommande();reussi=true}else{if(msg=="error_klarna"){alert(_lang.klarna_error)}else{alert(_lang.id_klarna_invalide)}}}return false}});if(reussi){return true}else{return false}}}if($("div#modal_payment_"+mode_paiement).length){var link_redirect=$(this).attr("href");var cb_redirect=function(){thickboxgenerercommande();window.location=link_redirect};$.fancybox({padding:0,margin:0,showCloseButton:false,scrolling:"no",titleshow:false,content:$("div#modal_payment_"+mode_paiement).html(),onClosed:function(){cb_redirect()},onComplete:function(){$("._modal_close").click(function(){$.fancybox.close()});setTimeout(cb_redirect,4*1000)}});return false}else{thickboxgenerercommande()}}}}}});$("._info_supp_cr").live("click",function(){openmodal("paiement_cr_infos")});$("._info_supp_colisprive").live("click",function(){openmodal("colis_prive_infos")});$("._info_supp_klarna").live("click",function(){if($("div#paiement_klarna_infos").length){openmodal("paiement_klarna_infos")}});var thickboxcgv=function(e){openmodal("avertissement_cgv",e)};var thickboxgenerercommande=function(){var htmlPopup=$("#modal_waiting").html();$.fancybox({padding:0,margin:0,modal:true,showCloseButton:false,scrolling:"no",titleshow:false,content:htmlPopup,onComplete:function(){}})};$(".consultation_cgv").click(function(){thickboxcgv(this);return false});if($("#modal_paiementlivr").length){$(".infopaiementlivr").click(function(){openmodal("modal_paiementlivr",this)})}if($("#progressbar").length){var prixtotal=parse_prx($("[class=prixtt]").html());if(isNaN(prixtotal)){var prixtotal=0}progressebar(prixtotal)}if($("#modal_marketing").length){openmodal("modal_marketing",this)}$("._afficher_assurance_retour").click(function(){openmodal("assurance_retour_infos",this)});$("._modifier_assurance_retour").click(function(){var action;if($(this).attr("checked")==false){action="false"}else{action="true"}showFancyboxWaiting();window.document.location=$("input#url_action").val()+action+"#"+window.pageYOffset});$("#no_user").change(function(){var id_user=$(this).val();var url=$("[class=next]").children().children().children().attr("href");var url=url.split("?");var new_url=url[0]+"?id_user="+id_user;$("[class=next]").children().children().children().attr("href",new_url)});$(".bonachat").change(function(){redirectToEmptyCart=false;$.ajax({type:"POST",url:__AJAX__+"mon_panier-bonachat.php",data:"id_ba="+$(this).val(),success:function(msg){if(redirectToEmptyCart){$(location).attr("href","./")}location.reload()}})});$(".print").click(function(){print()});$("input.retourlivraison").click(function(){var url=$("[class=urldestination]").html();window.location.href=url});$(".utilisationcodepromo").click(function(){$(".utilisationcodepromo").hide();$(".formcodepromo").attr("class","")});$(".ajoutcodepromo").click(function(){$("[name=formcodepromo]").submit()});if($("#livraison_information").length>0){open_thickbox("livraison_information")}if($("input[name='modelivraisonn']:checked").val()=="relai"){if($("#_modal_relai").hasClass("_show_relai")){open_thickbox("_modal_relai")}}if($("input[name='modelivraisonn']:checked").val()=="relai24"){if($("#_modal_relai24").hasClass("_show_relai")){open_thickbox("_modal_relai24")}}if($("input[name='modelivraisonn']:checked").val()=="relai-correos"){if($("#_modal_relai-correos").hasClass("_show_relai")){open_thickbox("_modal_relai-correos")}}if($("input[name='modelivraisonn']:checked").val()=="relai-postnord"){if($("#_modal_relai-postnord").hasClass("_show_relai")){open_thickbox("_modal_relai-postnord")}}if($("input[name='modelivraisonn']:checked").val()=="relai-ma"){if($("#_modal_relai-ma").hasClass("_show_relai")){open_thickbox("_modal_relai-ma")}}if($(".ref_cadeau").find("input[type=radio]:checked")){if($(".ref_cadeau").find("input[type=radio]:checked").parent().parent().attr("id")!=undefined){$("#ref_cadeau").val($(".ref_cadeau").find("input[type=radio]:checked").parent().parent().attr("id"))}}$(".ref_cadeau").not(".no_stock").click(function(){$(this).find("input[type=radio]").attr("checked","checked");$("#ref_cadeau").val($(this).attr("id"));$(".ref_cadeau").removeClass("borderHighlight");$(this).addClass("borderHighlight")})});var modedelivraison=function(b){if(b!="24"&&b!="48"&&b!="relai"&&b!="relai-proximite"&&b!="relai24"&&b!="relai-correos"&&b!="relai-postnord"&&b!="relai-ma"&&b!="pointretrait"&&b!="paiementlivraison"&&b!="72"){b="48"}if(b!="paiementlivraison"){if($(".optionpaiementlivr input[name=modelivraisonn]").length){$(".optionpaiementlivr input[name=modelivraisonn]").attr("checked",false)}}if(b=="paiementlivraison"){if($(".optionpaiementlivr input[name=modelivraisonn]").length){if($(".optionpaiementlivr input[name=modelivraisonn]").is(":checked")==false){b="48"}if($(".optionpaiementlivr input[name=modelivraisonn]").is(":checked")==true){$("input:radio[class=livraisonrapide48]").attr("checked",true);$(".optionpaiementlivr input[name=modelivraisonn]").attr("checked",true)}}}$.ajax({type:"POST",url:__AJAX__+"mon_panier-modelivraison.php",data:"mode="+b,success:function(c){if(b=="relai"){open_thickbox("_modal_relai")}else{if(b=="relai24"){open_thickbox("_modal_relai24")}else{if(b=="relai-correos"){open_thickbox("_modal_relai-correos")}else{if(b=="relai-postnord"){open_thickbox("_modal_relai-postnord")}else{if(b=="relai-ma"){open_thickbox("_modal_relai-ma")}}}}}}});var a=$("._adresse").find("input:radio:checked").val();if(!(a>0)){a=$("._adresse:first").find("input:radio").attr("checked","checked").val()}if(b=="relai"||b=="relai24"||b=="relai-correos"||b=="relai-postnord"||b=="relai-ma"||b=="pointretrait"){$.ajax({type:"POST",url:__AJAX__+"mon_panier-adresse.php",data:b+"=true"})}else{$.ajax({type:"POST",url:__AJAX__+"mon_panier-adresse.php",data:"id="+a+"&action=choix",success:function(c){}})}};function tcd_callback(a){switch(a.tcd.t){case"paiement":switch(a.tcd.c){case"del":break;case"add":break;case"see":break;default:break}break;default:break}if(is_str(a.loc)){location=a.loc}}function change_ref_cadeau(a){a.find("input[type=radio]").attr("checked","checked");$("#ref_cadeau").val($(".ref_cadeau").find("input[type=radio]:checked").parent().parent().attr("id"));$(".ref_cadeau").removeClass("borderHighlight");a.addClass("borderHighlight")}$(document).ready(function(){var j=null;var d;var h=function(p,m,o,l,n){this.brand=p;this.model=m;this.width=o;this.height=l;this.diameter=n};$("div.input_submit_chaines a").click(function(){if(b()){var l=new h($("._select_chaines_input#marque").val(),$("._select_chaines_input#modele").val(),$("._select_chaines_input#largeur").val(),$("._select_chaines_input#hauteur").val(),$("._select_chaines_input#diametre").val())}localStorage.setItem("previous_chainesSelection",JSON.stringify(l))});if(b()){$("div.input_submit_chaines").removeClass("disabled").find("a").attr("href",$("#url_target_chaines").val()+"-"+$("select#largeur").val()+"-"+$("select#hauteur").val()+"-"+$("select#diametre option:selected").html()+"_c"+$("select#diametre").val()+"_"+$("select#modele").val()+".html");$(".input_submit_chaines a").addClass("activateButton")}var k={};$("._select_chaines_input").each(function(l,m){k[$(m).attr("id")]=$(m).css("border")});function c(){for(var l=0;l<arguments.length;l++){var m=arguments[l];var n=$("select#"+m+" option:first");$("select#"+m).find("option").remove().end().append('<option value="">'+n.html()+"</option>").val(n.html())}j=null;$("div.input_submit_chaines").addClass("disabled").find("a").removeAttr("href");$(".input_submit_chaines a").removeClass("activateButton")}function g(m){var l="modele";$.ajax({type:"POST",url:__AJAX__+"select-chaines.php",dataType:"json",async:false,data:"level=5&brandId="+m,success:function(n){c("modele");$.each(n,function(o,p){$("select#"+l).find("option").end().append('<option value="'+p.KModNr+'">'+p.lib+"</option>").val(p)});$("select#"+l+" option:first").attr("selected","selected")}})}function f(){var q=arguments[0];var m=$("select#largeur").val();var o=$("select#hauteur").val();var l=$("select#diametre").val();for(var n=1;n<arguments.length;n++){var p=arguments[n];$.ajax({type:"POST",url:__AJAX__+"select-chaines.php",dataType:"json",async:false,data:"level="+q+"&largeur="+m+"&hauteur="+o+"&diametre="+l+"&id_chaines="+j,success:function(r){$.each(r,function(s,t){if(p=="diametre"){$("select#"+p).find("option").end().append('<option value="'+s+'">'+t+"</option>").val(s)}else{$("select#"+p).find("option").end().append('<option value="'+t+'">'+t+"</option>").val(t)}});$("select#"+p+" option:first").attr("selected","selected")}})}}$(".input_submit_chaines a").click(function(n){$("._select_chaines_input").each(function(p,q){if(!$(q).hasClass("optional")&&(isNaN($(q).val())||$(q).val()=="")){$(q).css({border:"1px solid red"})}});var m=$(this).attr("href");var o="";var l="";$("select._select_chaines_input").each(function(p){if(!isNaN(parseInt($(this).val()))&&parseInt($(this).val())!=0){o+=$(this).attr("id");if($(this).attr("id")!="diametre"){l+=$(this).val()}else{l+=$(this).find("option:selected").text()}o+="_";l+="_"}});o=o.slice(0,-1);l=l.slice(0,-1);push_data_layer("EventGA","Selecteur - Chaine",o,l)});$("._select_chaines_input").change(function(){$("._select_chaines_input").each(function(p,q){$(q).css({border:k[$(q).attr("id")]})});var o=$(this).attr("id");if(o=="marque"){g($(this).val());$("select#modele").trigger("change")}else{if(o=="modele"){if($(this).hasClass("optional")){if($("select#largeur").val()&&$("select#hauteur").val()&&$("select#diametre").val()&&$("select#marque").val()){$("div.input_submit_chaines").removeClass("disabled").find("a").attr("href",$("#url_target_chaines").val()+"-"+$("select#largeur").val()+"-"+$("select#hauteur").val()+"-"+$("select#diametre option:selected").html()+"_c"+$("select#diametre").val()+($("select#modele").val()!=""?("_"+$("select#modele").val()):"")+".html");$(".input_submit_chaines a").addClass("activateButton")}}if($(this).hasClass("mandatory")){if($("select#largeur").val()&&$("select#hauteur").val()&&$("select#diametre").val()&&$("select#marque").val()&&$(this).val()){$("div.input_submit_chaines").removeClass("disabled").find("a").attr("href",$("#url_target_chaines").val()+"-"+$("select#largeur").val()+"-"+$("select#hauteur").val()+"-"+$("select#diametre option:selected").html()+"_c"+$("select#diametre").val()+"_"+$("select#modele").val()+".html");$(".input_submit_chaines a").addClass("activateButton")}else{$("div.input_submit_chaines").addClass("disabled").find("a").removeAttr("href");$(".input_submit_chaines a").removeClass("activateButton")}}}else{if(o=="diametre"&&$("select#largeur").val()&&$("select#hauteur").val()){d=$("._select_chaines_input#modele").val();var n=(!isNaN(parseInt(d))&&parseInt(d)!=0)?true:false;var l=$("._select_chaines_input#modele").hasClass("optional")?false:true;if($("select#diametre").val()&&((l&&n)||!l)){j=$("select#diametre");var m=$("#url_target_chaines").val()+"-"+$("select#largeur").val()+"-"+$("select#hauteur").val()+"-"+$("select#diametre option:selected").html()+"_c"+$("select#diametre").val();if(n){m+=("_"+d)}m+=".html";$("div.input_submit_chaines").removeClass("disabled").find("a").attr("href",m);$(".input_submit_chaines a").addClass("activateButton");$(this).bind("keypress",function(q){var p=(q.keyCode?q.keyCode:q.which);if(p==13){window.location.href=$("div.input_submit_chaines").find("a").attr("href")}})}else{j=null;$("div.input_submit_chaines").addClass("disabled").find("a").removeAttr("href");$(".input_submit_chaines a").removeClass("activateButton")}}else{if(o=="hauteur"&&$("select#largeur").val()){c("diametre");f(3,"diametre")}else{if(o=="largeur"){c("hauteur","diametre");f(2,"hauteur")}else{c("largeur","hauteur","diametre");f(1,"largeur")}}}}}});function b(){return((!isNaN($("._select_chaines_input#marque").val())&&$("._select_chaines_input#marque").val()!="")||$("._select_chaines_input#marque").hasClass("optional"))&&((!isNaN($("._select_chaines_input#modele").val())&&$("._select_chaines_input#modele").val()!="")||$("._select_chaines_input#modele").hasClass("optional"))&&!isNaN($("._select_chaines_input#largeur").val())&&$("._select_chaines_input#largeur").val()!=""&&!isNaN($("._select_chaines_input#hauteur").val())&&$("._select_chaines_input#hauteur").val()!=""&&!isNaN($("._select_chaines_input#diametre").val())&&$("._select_chaines_input#diametre").val()!=""}if(!!$("div.top.chainSelector").length){if(!!localStorage.getItem("previous_chainesSelection")){var a=JSON.parse(localStorage.getItem("previous_chainesSelection"));$("._select_chaines_input#marque").val(a.brand).trigger("change");$("._select_chaines_input#modele").val(a.model);$("._select_chaines_input#largeur").val(a.width).trigger("change");$("._select_chaines_input#hauteur").val(a.height).trigger("change");$("._select_chaines_input#diametre").val(a.diameter).trigger("change");if(b()){var e=$("#url_target_chaines").val()+"-"+$("select#largeur").val()+"-"+$("select#hauteur").val()+"-"+$("select#diametre option:selected").html();e=e+"_c"+$("select#diametre").val();if($("select#modele").val()){e=e+"_"+$("select#modele").val()}e=e+".html";$("div.input_submit_chaines").removeClass("disabled").find("a").attr("href",e);$(".input_submit_chaines a").addClass("activateButton")}}}});$(document).ready(function(){if($("div.f_thide").length==1){$('[class*="f_tab["]').addClass("curs_dflt")}$("#verif_circ_IT").click(function(){recordOutboundEventFull("[Clicks sur encarts]","Colonne_carta",__TYPE_PAGE__,__GOOGLE_ANALYTICS__);$.fancybox({padding:0,margin:0,showCloseButton:false,scrolling:"no",titleshow:false,content:$("#titleImg").html(),onComplete:function(){$("._modal_close").click(function(){$.fancybox.close()})}})});$("#asso_aicel_IT").click(function(){recordOutboundEventFull("[Clicks sur encarts]","Colonne_aicel",__TYPE_PAGE__,__GOOGLE_ANALYTICS__)});$('[class*="f_tab["]').live("click mouseenter mouseleave",function(b){b=b||event;var e=$($(this).parent())[0],g=$(this)[0];if(b.type=="mouseenter"){if(!$(g).hasClass("set")){$(g).addClass("hover")}}else{if(b.type=="mouseleave"){if(!$(g).hasClass("set")){$(g).removeClass("hover")}}else{if(b.type=="click"){var j=g.className.match(/f_tab\[[^\]]+\]/gi).join("").split(/\[|\]/gi)[1],a=$("div.f_thide:has(#"+j+")")[0];var d=$('[class*="f_tab["]',e),f=$("div.f_thide");var c=0;var h=arguments.callee;if(is_func(jQuery.fn.validationEngine)){$.validationEngine.closePrompt(".formError",true)}d.removeClass("set");f.hide(c,function(){});$(g).addClass("set").removeClass("hover");$(a).show(c,function(){$($('input:visible[type!="submit"], select',a)[0]).focus();if(j=="msearch_selecteur"){window.clearTimeout($("#f_select").data("ts_out"));$(".hlp_action","#f_select").slideDown(0);$(".hlp_info","#f_select").slideUp(0)}})}}}});$("div.f_slide div.f_shide").slideUp(0);$("div.f_slide").live("click mousemove mouseout",function(b){b=b||event;var d=$("div.middle",this)[0],f=$("div.top h2",this)[0],a=$("div.f_shide",this)[0];var e=$("div.f_slide div.f_shide"),h=$("div.f_slide div.top h2");var c=$.browser.msie?0:250;var j=750;var g=arguments.callee;clearTimeout(g._fto);if(b.type=="mousemove"){c=750;g._fto=setTimeout(function(){if(!$(a).is(":visible")){e.slideUp(c);h.addClass("curs_hand");$(a).slideDown(c,function(){$($('input:visible[type!="submit"], select',d)[0]).focus()});$(f).removeClass("curs_hand")}},j)}else{if(b.type=="click"){if(!$(a).is(":visible")){e.slideUp(c);h.addClass("curs_hand");$(a).slideDown(c,function(){$($("input:visible, select",d)[0]).focus()});$(f).removeClass("curs_hand")}}}});$(".infocartegrise").hide();$(".icoinfo, .mf-info2").bind("mouseover",function(){$(".infocartegrise").stop().show();$.validationEngine.closePrompt(".formError",true)});$(".icoinfo, .mf-info2").bind("mouseout",{},function(){$(".infocartegrise").stop().hide()});$(".text_info_gdpr").hide();$().ready(function(){$(".notice").click(function(){$(".text_info_gdpr").stop().show();return false});$(document).click(function(a){if($(a.target).closest(".notice").length===0){$(".text_info_gdpr").stop().hide()}})})});$(document).ready(function(){$("div#msearch_reference").find("input:submit").click(function(){var c;var b="";if(__TYPE_PAGE__=="sousdomaine"||__TYPE_PAGE__=="landing_page"||__TYPE_PAGE__=="landinghppa"){var d="LP"}else{var d="HP"}if($(this).hasClass("_oem")){c="oem";b=$("div#msearch_reference").find("input#oem").val()}if($(this).hasClass("_ref")){c="ref";b=$("div#msearch_reference").find("input#ref").val()}if($(this).hasClass("_refoem")){c="refoem";b=$("div#msearch_reference").find("input#refoem").val()}window.location.href="search_s_"+c+"_"+b.toUpperCase()+".html"});$("div#msearch_reference a._refoem").click(function(){a()});$("div#msearch_reference").find("input:text").bind("keypress",function(c){var b=(c.keyCode?c.keyCode:c.which);if(b==13){a()}});function a(){if(__TYPE_PAGE__=="sousdomaine"||__TYPE_PAGE__=="landing_page"||__TYPE_PAGE__=="landinghppa"){var c="LP"}else{var c="HP"}typeSearch="refoem";querySearch=$("div#msearch_reference").find("input#refoem").val();var b="search_s_"+typeSearch+"_"+querySearch.toUpperCase()+".html";push_data_layer("selecteur","reference",querySearch.toUpperCase());if(__HOMEPAGE_SPECIFIQUE__){if(querySearch==""||querySearch==_lang.refoem){$.validationEngine.settings.promptPosition="topLeft";$.validationEngine.buildPrompt($("#refoem"),_lang.refsearch_empty,"error")}else{$.validationEngine.closePrompt(".refoemformError",true);window.location.href=b}}else{window.location.href=b}}if($("#refoem").val()!==_lang.refoem){$("#refoem").val(_lang.refoem)}$("#msearch_reference input#refoem").click(function(){$.validationEngine.closePrompt(".refoemformError",true);if($("#refoem").val()==_lang.refoem){$("#refoem").val("");$("#refoem").css({color:"#000000","font-style":"inherit"})}});$("#msearch_reference input#refoem").blur(function(){if($("#refoem").val()==""){$("#refoem").val(_lang.refoem);$("#refoem").css({color:"#B2B2B2","font-style":"italic"})}});$("div.b_content.home div.parent_custom_scrollbar span.scroll_up").click(function(){if(!$(".custom_scrollbar").is(":animated")){$(".custom_scrollbar").animate({scrollTop:"-=70px"},150)}});$("div.b_content.home div.parent_custom_scrollbar span.scroll_down").click(function(){if(!$(".custom_scrollbar").is(":animated")){$(".custom_scrollbar").animate({scrollTop:"+=70px"},150)}});$(".custom_scrollbar").scroll(function(){var b=$(this);if(b[0].scrollHeight-b.scrollTop()==b.height()){$("div.b_content.home div.parent_custom_scrollbar span.scroll_down").toggleClass("lowOpacity")}else{if(b.scrollTop()==0){$("div.b_content.home div.parent_custom_scrollbar span.scroll_up").toggleClass("lowOpacity")}else{$("div.b_content.home div.parent_custom_scrollbar span.scroll_up").removeClass("lowOpacity");$("div.b_content.home div.parent_custom_scrollbar span.scroll_down").removeClass("lowOpacity")}}})});$(document).ready(function(){if($("input#numero").length){$("input#numero").bind("keyup keypress keydown blur",regPlate).keyup()}$("#puce_submit_immat").click(function(){eventFire(document.getElementById("button_submit_immat"),"click");$.validationEngine.closePrompt(".f_select_marqueformError",true);$.validationEngine.closePrompt(".type_mineformError",true);$.validationEngine.closePrompt(".f_select_vehiculeformError",true);$.validationEngine.closePrompt(".f_select_modeleformError",true);return false});if(is_func(jQuery.fn.validationEngine)){$("form#msearch_immatriculation").validationEngine({scroll:false,inlineValidation:false,promptPosition:"topLeft",beforeSubmit:function(){errormsg=_lang.regplatemiss;if(!$("#numero").hasClass("green")){if($("input#numero").val()==""){if(_lang.regplatemiss_empty!=undefined){errormsg=_lang.regplatemiss_empty}$.validationEngine.buildPrompt($("#input_numero_immat"),errormsg,"error")}else{if(_lang.regplatemiss_error!=undefined){errormsg=_lang.regplatemiss_error}$.validationEngine.buildPrompt($("#input_numero_immat"),errormsg,"error")}return false}else{if($("input#numero").val()==""){if(_lang.regplatemiss_empty!=undefined){errormsg=_lang.regplatemiss_empty}$.validationEngine.buildPrompt($("#input_numero_immat"),errormsg,"error")}triggerSearch()}}});$('input[class^="validate"]').click(function(){$.validationEngine.closePrompt(".formError",true)});$("input#numero").click(function(){$.validationEngine.closePrompt(".formError",true)})}$("#search_part1_content a._submit_new_immat_search").click(function(){if($("#numero").val()==_lang.your_reg){$("#numero").val("");$("#numero").css("color","#000000")}$("form#msearch_immatriculation").submit();if($("#numero").val()==""){$("#numero").val(_lang.your_reg);$("#numero").css("color","#B2B2B2")}});$("#search_part1_content input#numero").click(function(){if($("#numero").val()==_lang.your_reg){$("#numero").val("");$("#numero").css("color","#000000")}});$("#search_part1_content input#numero").blur(function(){if($("#numero").val()==""){$("#numero").val(_lang.your_reg);$("#numero").css("color","#B2B2B2")}})});function triggerSearch(){if($("#useRcptinv").length>0&&typeof grecaptcha!=="undefined"){var a=grecaptcha.render("recaptcha");grecaptcha.reset(a);grecaptcha.execute()}else{confirmImmatriculationSearch()}}function confirmImmatriculationSearch(){var h=false;if($("#useRcptinv").length>0&&typeof grecaptcha!=="undefined"){h=grecaptcha.getResponse()}var j=$("#msearch_immatriculation").find("input#numero").val();var d=$("#msearch_immatriculation").find("input#titulaire");var c=true;if(d.length==0){c=false}var e="none";if(c){e=d.val()}if(j&&((!c)||(c&&e.length>0&&e.length<=3))){var a=$("input#id_categorie").val();var k=$("input#id_famille").val();var b=$("input#id_generique").val();var f=$("input[name=immat_s]").val();var g=$("input#force_ktypenr_session").val();$.fancybox({padding:0,margin:0,showCloseButton:false,scrolling:"no",titleshow:false,content:$("div#_modal_accueil").html(),onComplete:function(){$("._modal_close").click(function(){window.location.reload()});if($("#content-car-captcha").length>0){requestSearchPlate(j,e,a,k,b,__ID_STAGE__,g,f,h)}else{if($("#content-car").length>0){requestSearchPlate(j,e,a,k,b,__ID_STAGE__,g,f,h)}else{if(captchaAlreadyDisplay===false){requestSearchPlate(j,e,a,k,b,__ID_STAGE__,g,f,h)}else{$("#fancybox-outer #form_modal_immat_search").attr("id",$("#form_modal_immat_search").attr("id")+"_active");$("#fancybox-outer #myCaptcha").attr("id",$(" #myCaptcha").attr("id")+"_active");$("#fancybox-content #submit_immat_search_active").after("<input type='hidden' value='"+$("input#numero").val()+"'>");var l=grecaptcha.render("myCaptcha_active",{sitekey:"6LfP5SgTAAAAAPyi_Y-bcBDE31CCiPetN3WTKbV5",callback:function(m){if(m!=""){formCaptchaPlate(j,e,a,k,b,__ID_STAGE__,g,f)}}})}}}}})}}function init_selecteur_immat(){$(".js_nodisp").css("display","none");$(".js_disp_i").css("display","inline");$(".js_disp_b").css("display","block");$(".js_noheight").css("height","auto");$(".js_nopad").css("padding","0");selecteur.init("f_select_immat",function(a,b){button.enable("#"+b+"_go");$("#"+b+"_go").css("cursor","default");if(location.search!="?test_selecteur_infobulle"){window.clearTimeout($("#"+b).data("ts_out"));$(".hlp_action","#"+b).slideDown(250);$(".hlp_info","#"+b).slideUp(250)}else{$.validationEngine.closePrompt(".formError",true)}},function(a,b){var c=$("#"+b+"_type").val();if(is_nbr_formulate(c)){$("#"+b+"_go").css("cursor","pointer")}},function(c,a){if(button.isEnable(c)){var b=$("#"+a+"_type").val();if($("input[name=dir_selecteur]").length){if(is_nbr_formulate(b)){$.post(__AJAX__+"session-ktypenr.php",{ktypenr:b},function(d){location.reload()});return false}}}else{if(location.search!="?test_selecteur_infobulle"){$(".hlp_action","#"+a).slideUp(250);$(".hlp_info","#"+a).slideDown(250);$("#"+a).data("ts_out",window.setTimeout(function(){$(".hlp_action","#"+a).slideDown(250);$(".hlp_info","#"+a).slideUp(250)},4000))}else{$("select","#"+a).each(function(){if($(this).val()==""||$(this).is(":disabled")){$.validationEngine.buildPrompt($(this),$("option.head",this).html(),"error");return false}})}}})}function regPlate(e){var n=arguments.callee;if(!is_str(this.tagName)||this.tagName.toLowerCase()!="input"){return}e=e||event;var f=e.type;if(f=="keydown"||f=="keyup"){n.key_code=e.which||e.keyCode||0;var c=e.shiftKey||(e.modifiers&4);var l=e.ctrlKey||(e.modifiers&2);var d=e.altKey||(e.modifiers&1);if(f=="keydown"){n.char_code=0;return true}}else{if(f=="keypress"){n.char_code=e.which||e.charCode||0}else{if(f=="blur"){f="keyup";n.key_code=0;n.char_code="!"}}}var m=n.key_code;var k=n.char_code;switch(m){case 9:case 13:case 27:case 35:case 36:case 33:case 34:case 37:case 38:case 39:case 40:return true;break;case 8:case 46:k=n.char_code=0;default:var r=$(this).val().replace(/[^A-Z0-9]/gi,"");if(f=="keypress"&&k!=0){r+=String.fromCharCode(k)}var h=i18n[__COUNTRY__].plate;for(var g=0;g<h.length;g++){if(is_func(h[g].check)){if(h[g].check(r)){h=h[g];break}}else{h=h[g];break}}if(!is_def(h.match)){h={}}if(f=="keypress"&&k!=0){if(String.fromCharCode(k).match(h.disallow||/[^\S ]/gi)){$(this).addClass("red");return false}if(r.length>h.length){$(this).addClass("yellow");return false}}if(__COUNTRY__==="ES"){var a=[];for(g=0;g<i18n.ES.plate.length;g++){var b=i18n.ES.plate[g].match;var o={match:b,group:i18n.ES.plate[g].group,matches:r.split(b||/^(?:([a-z0-9]+))$/i)};a.push(o)}$.each(a,function(s,u){if(is_arr(u.matches)){for(var t=0;t<u.matches.length;t++){if(!is_str(u.matches[t])){u.matches.splice(t,1);--t}}}});var p=this;if(f=="keyup"){$(this).removeClass("red yellow green");$.each(a,function(s,t){if(is_arr(t.matches)&&t.matches.length==(t.group||1)){$(p).addClass("green")}})}}else{var j=r.split(h.match||/^(?:([a-z0-9]+))$/i);if(is_arr(j)){for(var g=0;g<j.length;g++){if(!is_str(j[g])){j.splice(g,1);--g}}}if(f=="keyup"){var q=String.fromCharCode(k)!=" ";q*=String.fromCharCode(k)!="-";q*=is_arr(j)&&j.length>1;if(q){$(this).val(j.join(h.separator||""))}$(this).removeClass("red yellow green");if(is_arr(j)&&j.length==(h.group||1)){$(this).addClass("green")}}}break}}function requestApiCaptcha(){$.ajax({type:"POST",url:__AJAX__+"captcha-google.php",dataType:"html",async:false,data:{captchaResponse:$("#g-recaptcha-response").val()},success:function(a){return true},error:function(a,c,b){return false}})}function requestSearchPlate(j,e,b,k,d,a,h,f,g){var c={immatriculation:j,titulaire:e,id_categorie:b,id_famille:k,id_generique:d,id_stage:a,req_uri:location.pathname,force_ktypenr_session:h,immat_s:f};if(g){c.recaptcha=g}$.ajax({type:"POST",url:__AJAX__+"select-immatriculation.php",data:c,success:function(l){var m=$(l).find("a.immat-info-vehicule").attr("data-vh");if(typeof m=="undefined"){m=""}push_data_layer("selecteur","immatriculation",m);if(__TYPE_PAGE__=="sousdomaine"||__TYPE_PAGE__=="landing_page"||__TYPE_PAGE__=="landinghppa"){var n="LP"}else{var n="HP"}$(".js_nodisp").css("display","none");if($("#fancybox-wrap:visible").length){$("#fancybox-content").html(l);$("._modal_close").click(function(){window.location.reload()});$("a#link_selecteur").click(function(){$($('[class*="f_tab[msearch_selecteur]"]')[0]).click();$.fancybox.close();return false});$("#_modal_accueil .immatriculation_vehicule_thickbox_catalogue a.white").click(function(){recordOutboundEventFullSD("Selecteur v4 "+n,"Immatriculation",$(this).attr("id"),__GOOGLE_ANALYTICS__)})}if($("#fancybox-wrap .middle.cleared div").hasClass("infobulle")){$("#fancybox-wrap #fancybox-content #_modal_accueil").addClass("result");recordOutboundEventFullSD("Selecteur v4 "+n,"Immatriculation",$("#_modal_accueil .immat-vehicule .immat-info-vehicule").attr("data-vh"),__GOOGLE_ANALYTICS__)}else{$("#fancybox-wrap #fancybox-content #_modal_accueil").addClass("no-result");recordOutboundEventFullSD("Selecteur v4 "+n,"Immatriculation","no-result",__GOOGLE_ANALYTICS__)}if($("#_modal_accueil.no-result").length){$("#_modal_accueil.no-result a._modal_close, #fancybox-overlay").click(function(){recordOutboundEventFullSD("Selecteur v4 "+n+" pop-up error","Immatriculation","not-used",__GOOGLE_ANALYTICS__);window.location.reload()});$("#_modal_accueil.no-result #f_select_immat_go").click(function(){if($(this).attr("href")){var p=$(this).attr("href");var o=p.split("/");var q=o.length-1;o=o[q].substr(0,o[q].length-5);recordOutboundEventFullSD("Selecteur v4 "+n+" pop-up error","Immatriculation",o,__GOOGLE_ANALYTICS__)}})}$("#_modal_accueil.result #f_select_immat_go").click(function(){if($(this).attr("href")){var p=$("#_modal_accueil.result #f_select_immat_go").attr("href");var o=p.split("/");o=o[3].substr(0,o[3].length-5);recordOutboundEventFullSD("Selecteur v4 "+n,"Immatriculation",o,__GOOGLE_ANALYTICS__)}});$("#_modal_accueil.result a._modal_close,  #fancybox-overlay").click(function(){recordOutboundEventFullSD("Selecteur v4 "+n,"Immatriculation","not-used",__GOOGLE_ANALYTICS__);window.location.reload()});init_selecteur_immat()}})}function formCaptchaPlate(c,b,a,f,d,h,g,e){if(requestApiCaptcha()==false){return false}else{$("#form_modal_immat_search_active").hide();$("#form_modal_immat_search").hide();$("#submit_immat_search_active").hide();$.ajax({type:"POST",url:__AJAX__+"select-immatriculation.php",data:{immatriculation:c,titulaire:b,id_categorie:a,id_famille:f,id_generique:d,id_stage:h,req_uri:location.pathname,force_ktypenr_session:g,immat_s:e},success:function(j){if(__TYPE_PAGE__=="sousdomaine"||__TYPE_PAGE__=="landing_page"||__TYPE_PAGE__=="landinghppa"){var k="LP"}else{var k="HP"}$(".js_nodisp").css("display","none");if($("#fancybox-wrap:visible").length){$("#fancybox-content").html(j);$("._modal_close").click(function(){window.location.reload()});$("a#link_selecteur").click(function(){$($('[class*="f_tab[msearch_selecteur]"]')[0]).click();$.fancybox.close();return false});$("#_modal_accueil .immatriculation_vehicule_thickbox_catalogue a.white").click(function(){recordOutboundEventFullSD("Selecteur v4 "+k,"Immatriculation",$(this).attr("id"),__GOOGLE_ANALYTICS__)})}if($("#fancybox-wrap .middle.cleared div").hasClass("infobulle")){$("#fancybox-wrap #fancybox-content #_modal_accueil").addClass("result");recordOutboundEventFullSD("Selecteur v4 "+k,"Immatriculation",$("#_modal_accueil .immat-vehicule .immat-info-vehicule").attr("data-vh"),__GOOGLE_ANALYTICS__)}else{$("#fancybox-wrap #fancybox-content #_modal_accueil").addClass("no-result");recordOutboundEventFullSD("Selecteur v4 "+k,"Immatriculation","no-result",__GOOGLE_ANALYTICS__)}if($("#_modal_accueil.no-result").length){$("#_modal_accueil.no-result a._modal_close, #fancybox-overlay").click(function(){recordOutboundEventFullSD("Selecteur v4 "+k+" pop-up error","Immatriculation","not-used",__GOOGLE_ANALYTICS__);window.location.reload()});$("#_modal_accueil.no-result #f_select_immat_go").click(function(){if($(this).attr("href")){var m=$(this).attr("href");var l=m.split("/");var n=l.length-1;l=l[n].substr(0,l[n].length-5);recordOutboundEventFullSD("Selecteur v4 "+k+" pop-up error","Immatriculation",l,__GOOGLE_ANALYTICS__)}})}$("#_modal_accueil.result #f_select_immat_go").click(function(){if($(this).attr("href")){var m=$("#_modal_accueil.result #f_select_immat_go").attr("href");var l=m.split("/");l=l[3].substr(0,l[3].length-5);recordOutboundEventFullSD("Selecteur v4 "+k,"Immatriculation",l,__GOOGLE_ANALYTICS__)}});$("#_modal_accueil.result a._modal_close,  #fancybox-overlay").click(function(){recordOutboundEventFullSD("Selecteur v4 "+k,"Immatriculation","not-used",__GOOGLE_ANALYTICS__);window.location.reload()});init_selecteur_immat()}})}}$(document).ready(function(){var e="",h=$("select#f_select_vehicule"),g=$("#type_mine"),k=$("#f_select_typemine");h.attr("disabled",true);g.keydown(function(l){if(l.keyCode==13){if($(this).val().length==0){var m=_lang.typemine_empty;$.validationEngine.buildPrompt(g,m,"error")}l.preventDefault();return false}});if(is_func(jQuery.fn.validationEngine)){$("form#msearch_type_mine").validationEngine({scroll:false,inlineValidation:false,promptPosition:"topLeft",beforeSubmit:function(){}})}if(__TYPE_PAGE__=="sousdomaine"||__TYPE_PAGE__=="landing_page"||__TYPE_PAGE__=="landinghppa"){var f="LP"}else{var f="HP"}k.click(function(){if(g.val().length==0||g.val()==_lang.type_mine||g.val()==_lang.enter_type_mine+" "+_lang.type_mine){var l=_lang.typemine_empty;$.validationEngine.buildPrompt(g,l,"error")}else{if(h.find("option").length==0){if(g.val().length>3){recordOutboundEventFullSD("Selecteur v4 "+f,"Carte grise","no-result",__GOOGLE_ANALYTICS__);$.fancybox({padding:0,margin:0,showCloseButton:false,scrolling:"no",titleshow:false,content:$("div#_modal_accueil").html(),onComplete:function(){$("._modal_close").click(function(){$.fancybox.close()});$.ajax({type:"POST",url:__AJAX__+"select-immatriculation.php",data:"immatriculation=null&type_mine=true",success:function(m){var n=m.split('id="f_select_immat_go"');n=n[1].split('href="');n=n[1].split('"');n=n[0].split("/");n=n[n.length-1].replace(".html","");push_data_layer("selecteur","carte_grise",n);$(".js_nodisp").css("display","none");if($("#fancybox-wrap:visible").length){$("#fancybox-content").html(m);$("._modal_close").click(function(){$.fancybox.close()});$("a#link_selecteur").click(function(){$($('[class*="f_tab[msearch_selecteur]"]')[0]).click();$.fancybox.close();return false});if($("#_modal_accueil").length){$("#_modal_accueil a._modal_close, #fancybox-overlay").click(function(){recordOutboundEventFullSD("Selecteur v4 "+f+" pop-up error","Carte grise","not-used",__GOOGLE_ANALYTICS__)});$("#_modal_accueil #f_select_immat_go").click(function(){if($(this).attr("href")){var p=$("#_modal_accueil #f_select_immat_go").attr("href");var o=p.split("/");o=o[3].substr(0,o[3].length-5);recordOutboundEventFullSD("Selecteur v4 "+f+" pop-up error","Carte grise",o,__GOOGLE_ANALYTICS__)}})}}init_selecteur_immat()}})}})}else{var l=_lang.typemine_error;$.validationEngine.buildPrompt(g,l,"error")}}else{if(h.val()==0){var l=_lang.typemine_vehicule;$.validationEngine.buildPrompt(h,l,"error")}}}if($(this).attr("data-id")){recordOutboundEventFullSD("Selecteur v4 "+f,"Carte grise",$(this).attr("data-id"),__GOOGLE_ANALYTICS__)}});g.click(function(){$.validationEngine.closePrompt(".formError",true)});k.click(function(){$.validationEngine.closePrompt(".f_select_marqueformError",true);$.validationEngine.closePrompt(".input_numero_immatformError",true)});g.bind("change paste keyup",function(){if($(this).val().length==0){h.empty();h.attr("disabled",true)}if($(this).val().length<3){k.removeAttr("href").removeAttr("data-id")}});var c;var d=100;g.keyup(function(){if(g.val().length>2&&g.val()!==_lang.type_mine){clearTimeout(c);c=setTimeout(j,d)}else{h.empty();h.attr("disabled",true)}});g.keydown(function(){clearTimeout(c)});function a(l){return l.substring(0,1).toUpperCase()+l.substring(1).toLowerCase()}function j(){var l=$("#msearch_type_mine").find("input#type_mine").val().toUpperCase();var m=$("input#id_categorie").val();var o=$("input#id_famille").val();var n=$("input#id_generique").val();if(l){h.css("background",'white url("/img/commun/jquery/loading.gif?v=1542113957") no-repeat scroll 3.14% center');$.ajax({type:"POST",url:__AJAX__+"select-typemine.php",dataType:"json",async:true,data:"typemine="+l+"&id_categorie="+m+"&id_famille="+o+"&id_generique="+n,success:function(s){h.css("background","");h.empty();if(s!=""){h.append('<option value="0">'+_lang.typemine_select_vehicule+"</option>");h.attr("disabled",false)}else{k.removeAttr("href").removeAttr("data-id");h.attr("disabled",true)}for(var q in s){var r=s[q];var t=r.annee.split("*");var p="";if(t.length==1){p=_lang.de_a_aujourdhui.replace(/%s/gi,t[0].replace("-","/"))}else{p=_lang.de_a.replace(/%s1/gi,t[0].replace("-","/")).replace(/%s2/gi,t[1].replace("-","/"))}h.append('<option value="'+r.ktypenr+'" data-url="'+r.url+'">'+r.full+" "+a(r.carburant)+" ["+p+"]</option>").val(r.full)}}})}}h.change(function(){if($(this).val()=="0"){k.removeAttr("href").removeAttr("data-id")}else{var m=h.find("option:selected").attr("data-url");var l=m.split("/");if(f=="HP"){l=l[3].substr(0,l[3].length-5)}else{if(l.length==5){l=l[4].substr(0,l[4].length-5)}else{l=l[3].substr(0,l[3].length-5)}}k.attr("data-id",l);k.attr("href",m);$.validationEngine.closePrompt(".formError",true)}});$("#search_part4_content input#type_mine").click(function(){if($("#type_mine").val()==_lang.type_mine){$("#type_mine").val("");$("#type_mine").css({color:"#000000","font-style":"inherit","font-weight":"inherit"})}});$("#search_part4_content input#type_mine").blur(function(){if($("#type_mine").val()==""){$("#type_mine").val(_lang.type_mine);$("#type_mine").css({color:"#B2B2B2","font-style":"italic","font-weight":"bold"})}});if($("input#type_mine").length){$("input#type_mine").bind("keyup keypress keydown blur",b).keyup()}function b(n){var u=arguments.callee;if(!is_str(this.tagName)||this.tagName.toLowerCase()!="input"){return}n=n||event;var o=n.type;if(o=="keydown"||o=="keyup"){u.key_code=n.which||n.keyCode||0;var l=n.shiftKey||(n.modifiers&4);var s=n.ctrlKey||(n.modifiers&2);var m=n.altKey||(n.modifiers&1);if(o=="keydown"){u.char_code=0;return true}}else{if(o=="keypress"){u.char_code=n.which||n.charCode||0}else{if(o=="blur"){o="keyup";u.key_code=0;u.char_code="!"}}}var t=u.key_code;var r=u.char_code;switch(t){case 9:case 13:case 27:case 35:case 36:case 33:case 34:case 37:case 38:case 39:case 40:return true;break;case 8:case 46:r=u.char_code=0;default:var v=$(this).val().replace(/[^A-Z0-9\s]/gi,"");if(o=="keypress"&&r!=0){v+=String.fromCharCode(r)}if(t==32||t==109||t==54){return false}var q=i18n[__COUNTRY__].plate;for(var p=0;p<q.length;p++){if(is_func(q[p].check)){if(q[p].check(v)){q=q[p];break}}else{q=q[p];break}}if(o=="keypress"&&r!=0){if(String.fromCharCode(r).match(q.disallow||/[^\S ]/gi)){return false}}break}}});$(document).ready(function(){$("#cartegrise_champ1").keyup(function(){if(this.value.length>=4){$("#cartegrise_champ2").focus()}});$("#puce_submit_cartegrise").click(function(){eventFire(document.getElementById("validation_cartegrise"),"click");$.validationEngine.closePrompt(".f_select_marqueformError",true);return false});if(is_func(jQuery.fn.validationEngine)){$(".f_select_cartegrise").click(function(){$.validationEngine.closePrompt(".f_select_marqueformError",true)});$("form#msearch_cartegrise").validationEngine({scroll:false,inlineValidation:false,displayType:"mini_error",beforeSubmit:function(){a()}});$('input[class^="validate"]').click(function(){$.validationEngine.closePrompt(".formError",true)})}function a(){var e=$("#msearch_cartegrise").find("input#cartegrise_champ1").val();var d=$("#msearch_cartegrise").find("input#cartegrise_champ2").val();var b=$("input#id_categorie").val();var f=$("input#id_famille").val();var c=$("input#id_generique").val();if(__TYPE_PAGE__=="sousdomaine"||__TYPE_PAGE__=="landing_page"||__TYPE_PAGE__=="landinghppa"){var g="LP"}else{var g="HP"}if(e&&d){$.fancybox({padding:0,margin:0,showCloseButton:false,scrolling:"no",titleshow:false,content:$("div#_modal_accueil").html(),onComplete:function(){$("._modal_close").click(function(){$.fancybox.close()});$.ajax({type:"POST",url:__AJAX__+"select-cartegrise.php",data:"champ1="+e+"&champ2="+d+"&id_categorie="+b+"&id_famille="+f+"&id_generique="+c,success:function(h){if($("#fancybox-wrap:visible").length){$.fancybox({padding:0,margin:0,showCloseButton:false,scrolling:"no",titleshow:false,content:h,onComplete:function(){$("._modal_close").click(function(){recordOutboundEventFullSD("Selecteur v4 "+g,"Immatriculation","not-used",__GOOGLE_ANALYTICS__);$.fancybox.close()});$("a#link_selecteur").click(function(){$($('[class*="f_tab[msearch_selecteur]"]')[0]).click();recordOutboundEventFullSD("Selecteur v4 "+g+" pop-up error","Immatriculation","no-result",__GOOGLE_ANALYTICS__);$.fancybox.close();return false});if($("#fancybox-wrap .middle.cleared div").hasClass("infobulle")){$("#fancybox-wrap #fancybox-content #_modal_accueil").addClass("result");recordOutboundEventFullSD("Selecteur v4 "+g,"Immatriculation",$("#_modal_accueil .immatriculation_vehicule_thickbox_catalogue a.white").attr("id"),__GOOGLE_ANALYTICS__)}else{$("#fancybox-wrap #fancybox-content #_modal_accueil").addClass("no-result");recordOutboundEventFullSD("Selecteur v4 "+g,"Immatriculation","no-result",__GOOGLE_ANALYTICS__)}if($("#_modal_accueil.no-result").length){$("#_modal_accueil.no-result a._modal_close, #fancybox-overlay").click(function(){recordOutboundEventFullSD("Selecteur v4 "+g+" pop-up error","Immatriculation","not-used",__GOOGLE_ANALYTICS__)})}$("#_modal_accueil .immatriculation_vehicule_thickbox_catalogue a.white").click(function(){recordOutboundEventFullSD("Selecteur v4 "+g,"Immatriculation",$(this).attr("id"),__GOOGLE_ANALYTICS__)})}})}}})}})}}});$(document).ready(function(){$.fancybox.close();if(window.location.hash&&window.location.hash!="#"&&window.location.hash!="#undefined"){blocat.slide.anchor(window.location.hash.substring(1))}$.validationEngine.settings.promptPosition="topLeft";if((__TYPE_PAGE__=="landing_page"&&__TYPE_LANDING__=="generique"&&!__IS_BOUTIQUE__)||(__TYPE_PAGE__=="sousdomaine"&&__STAGE__=="/pagenerique")){try{var d="";var b=document.location.pathname;var f=b.split(/[.]*_lg([0-9]{1,})/gi);if(f.length==3){d=f[1]+"_"}var h="";if(__TYPE_PAGE__=="landing_page"&&__TYPE_LANDING__=="generique"&&!__IS_BOUTIQUE__){h=$("#ariane").find("span").last().text()}else{if(__TYPE_PAGE__=="sousdomaine"&&__STAGE__=="/pagenerique"){h=$("#ariane").find("span").last().attr("data-libelle")}}recordOutboundEventFull("[Visites sur générique]",d+h,"landing_page_generique",__GOOGLE_ANALYTICS__)}catch(c){}}else{if((__TYPE_PAGE__=="landing_page"&&__TYPE_LANDING__=="generiquemarque")||(__TYPE_PAGE__=="sousdomaine"&&__STAGE__=="/pageneriquemarque")){try{var d="";var b=document.location.pathname;var f=b.split(/[.]*_lg([0-9]{1,})/gi);if(f.length==3){d=f[1]+"_"}var a=$("#ariane").find("span").last().text();var h=$("#ariane").find("a").last().text();recordOutboundEventFull("[Visites sur générique]",d+h,"landing_page_marque_"+a,__GOOGLE_ANALYTICS__)}catch(c){}}}if($("div#_modal_multiple_generique_renamed").length>0){open_thickbox("_modal_multiple_generique_renamed")}$("a.retourhaut").click(function(){window.location.hash="";scrollToTop(".sommaire")});$("a.go_to_familly").click(function(){var k=$(this).attr("id").substring(12);var j=$("input#famille_"+k).val();var l=0;if($("input#type_produit").val()=="vehicule"){l=ktypenr}$.ajax({type:"POST",url:__AJAX__+"select-generique.php",data:"ids="+j+"&ktypenr="+l,success:function(m){$.fancybox({padding:0,margin:0,showCloseButton:false,scrolling:"no",titleshow:false,content:m,onComplete:function(){$("._modal_close").click(function(){$.fancybox.close()});$("a._modal_waiting").click(function(){showFancyboxWaiting()})}})}})});$("a.go_to_category").click(function(){window.location.hash=$(this).attr("id").substring(7);blocat.slide.anchor($(this).attr("id").substring(7))});$(".textevoirplus").click(function(){$("html,body").animate({scrollTop:$("#ancre").offset().top},1000)});$(".hideshow").click(function(){if($(this).next(".blc_hideshow").hasClass("hide")){$(this).find(".blc").removeClass("item").addClass("item_set");$(this).next(".blc_hideshow").removeClass("hide").addClass("show").show()}else{$(this).find(".blc").removeClass("item_set").addClass("item");$(this).next(".blc_hideshow").removeClass("show").addClass("hide").hide()}});if($(".vehicule_selected").length){if($("#search_vehicule_viscosite").length){e()}if($("#search_vehicule_amperage").length){g()}}$("#search_viscosite").mouseenter(function(){$(".selecteur_viscosite").removeClass("showVehSel");$("#search_viscosite").addClass("active");$("#search_vehicule_viscosite").removeClass("active")});$("#search_vehicule_viscosite").mouseenter(function(){e()});$("#search_amperage").mouseenter(function(){$(".selecteur_amperage").removeClass("showVehSel");$("#search_amperage").addClass("active");$("#search_vehicule_amperage").removeClass("active")});$("#search_vehicule_amperage").mouseenter(function(){g()});function e(){$(".selecteur_viscosite").addClass("showVehSel");$("#search_viscosite").removeClass("active");$("#search_vehicule_viscosite").addClass("active")}function g(){$(".selecteur_amperage").addClass("showVehSel");$("#search_amperage").removeClass("active");$("#search_vehicule_amperage").addClass("active")}$("#msearch_selecteur.twice").mouseenter(function(){$("#msearch_selecteur.twice").addClass("active");$("#msearch_selecteur.twice").removeClass("hide");$("#msearch_immat.twice").removeClass("active");$("#msearch_immat.twice").addClass("hide");$("#msearch_de.twice").addClass("hide");$("#msearch_de.twice").removeClass("active")});$("#msearch_immat.twice").mouseenter(function(){$("#msearch_selecteur.twice").removeClass("active");$("#msearch_selecteur.twice").addClass("hide");$("#msearch_immat.twice").addClass("active");$("#msearch_immat.twice").removeClass("hide")});$("#msearch_de.twice").mouseenter(function(){$("#msearch_selecteur.twice").removeClass("active");$("#msearch_selecteur.twice").addClass("hide");$("#msearch_de.twice").addClass("active");$("#msearch_de.twice").removeClass("hide")});$("#msearch_immat.third").mouseenter(function(){$("#msearch_selecteur.third").removeClass("active");$("#msearch_selecteur.third").addClass("hide");$("#msearch_immat.third").addClass("active");$("#msearch_immat.third").removeClass("hide");$("#msearch_type.third").addClass("hide");$("#msearch_type.third").removeClass("active")});$("#msearch_selecteur.third").mouseenter(function(){$("#msearch_immat.third").removeClass("active");$("#msearch_immat.third").addClass("hide");$("#msearch_selecteur.third").addClass("active");$("#msearch_selecteur.third").removeClass("hide");$("#msearch_type.third").addClass("hide");$("#msearch_type.third").removeClass("active")});$("#msearch_type.third").mouseenter(function(){$("#msearch_selecteur.third").removeClass("active");$("#msearch_selecteur.third").addClass("hide");$("#msearch_type.third").addClass("active");$("#msearch_type.third").removeClass("hide");$("#msearch_immat.third").addClass("hide");$("#msearch_immat.third").removeClass("active")});if($("#msearch_de").hasClass("active")){$("#msearch_selecteur").addClass("hide")}else{if($("#msearch_de").hasClass("hide")){$("#msearch_selecteur").addClass("active")}}if($(".b_content").hasClass("gnr3224")||$(".b_content").hasClass("gnr3465")){$("img._resizeImage").wrap("<p></p>");$(".img_gen").addClass("tab_img")}else{if(!$(".img_gen").hasClass("sd_accueil")){$(".img_gen").addClass("padt70");$(".img_gen").removeClass("padt16")}}$(".content_l.one .picto_mf .mf").wrap("<p></p>");$(".content_l.third#msearch_immat .bouton_wrap.shadow_orange").wrapAll("<p></p>");if($(".content_l.twice#msearch_selecteur .fields_select .fld_select").length==1){$(".content_l.twice#msearch_selecteur .fields_select").addClass("padt18")}if($(".content_l.twice#msearch_selecteur .fields_select .fld_select").length==2){$(".content_l.twice#msearch_selecteur .fields_select").addClass("padt22");$(".content_l.twice#msearch_selecteur .fields_select .fld_select").removeClass("marb8").addClass("marb18")}if($(".content_l.twice#msearch_selecteur .fields_select .fld_select").length==3){$(".content_l.twice#msearch_selecteur .content").addClass("mart18")}if($(".content_l.one#msearch_selecteur .fields_select .fld_select").length==2){$(".content_l.one#msearch_selecteur .fields_select").addClass("padt22");$(".content_l.one#msearch_selecteur .fields_select .fld_select").removeClass("marb8").addClass("marb18")}if($(".content_l.third#msearch_selecteur .fields_select .fld_select").length==2){$(".content_l.third#msearch_selecteur .fields_select").addClass("padt14")}$("#msearch_immatriculation input[type=submit]").click(function(){if($("#numero").val()==_lang.your_reg){$("#numero").val("");$("#numero").css("color","#000000")}$("form#msearch_immatriculation").submit()});$("#msearch_immatriculation input#numero").click(function(){if($("#numero").val()==_lang.your_reg){$("#numero").val("");$("#numero").css("color","#000000")}});$("#msearch_immatriculation input#numero").blur(function(){if($("#numero").val()==""){$("#numero").val(_lang.your_reg);$("#numero").css("color","#B2B2B2")}});$("#msearch_type_mine #type_mine").click(function(){if($("#type_mine").val()==_lang.enter_type_mine+" "+_lang.type_mine){$("#type_mine").val("");$("#type_mine").css({color:"#000000",textTransform:"uppercase"})}});$("#msearch_type_mine #type_mine").blur(function(){if($("#type_mine").val()==""){$("#type_mine").val(_lang.enter_type_mine+" "+_lang.type_mine);$("#type_mine").css({color:"#B2B2B2",textTransform:"inherit"})}})});(function(a){a.fn.seeMoreOnFrame=function(){var d=1000;var c="96px";var b=a(this).selector;function e(g){var h,f;h=a(g).find(".wrapper")[0];f=a(g).find(".middle")[0];a(f).css("height",c);a(h).css({"z-index":"0",position:"static"});a(g).clearQueue()}return this.each(function(){var k,m,h,f,g,j,l;k=a(this);m=a(this).find(".wrapper")[0];h=a(this).find(".middle")[0];f=a(this).find(".bottom")[0];j=a(h).children()[0];l=f.getAttribute("data-wording");a(k).css({height:a(this).height()});if(a(h).height()<a(j).height()){a(f).append('<div class="f_bottom_more png24 font_s18"><div class="padt6">'+l+" &raquo;</div></div>")}g=a(this).find(".f_bottom_more")[0];a(g).bind("click",function(){a(b).each(function(){e(a(this))});a(".frame.f_third.f_more").css({"z-index":"0"});a(h).css("height","auto");a(m).css({position:"absolute","z-index":"9999"});a("#footer").css({position:"relative","z-index":"-999"});a(k).css("z-index","8888")});a(this).hover(null,function(){a(this).delay(d).queue(function(){e(this)})})})}}(jQuery));jQuery.fn.sort=(function(){var a=[].sort;return function(c,d){d=d||function(){return this};var b=this.map(function(){var f=d.call(this),e=f.parentNode,g=e.insertBefore(document.createTextNode(""),f.nextSibling);return function(){if(e===this){throw new Error("You can't sort elements if any one is a descendant of another.")}e.insertBefore(this,g);e.removeChild(g)}});return a.call(this,c).each(function(e){b[e].call(d.call(this))})}})();(function(a){a.fn.aeImageResize=function(d){var b=a(this),f=Math.floor,c=a.browser,h=c.msie&&(parseInt(c.version)==6),e=0,g=a.extend({height:0,width:0},d);if(!g.height&&!g.width){return b}if(g.height&&g.width){e=g.width/g.height}return b.one("load",function(){a(this).removeAttr("height").removeAttr("width").css({height:"",width:""});var j=this.height,k=this.width,n=k/j,l=g.height,m=g.width,o=e;if(!o){if(l===0){o=n-1}else{o=n+1}}if((l&&j>l)||(m&&k>m)){if(n>e){l=f(j/k*m)}else{m=f(k/j*l)}a(this).attr({height:l,width:m})}}).each(function(){if(this.complete||h){a(this).trigger("load")}})}})(jQuery);(function(a){a.fn.extend({scale:function(d,c,b){return this.each(function(){j("jquery.scale is starting...");j('jquery.scale: Using browser "'+navigator.appName+'" version "'+navigator.appVersion+'"');var e=false;var f=false;var g=false;if(d=="center"||c=="center"||b=="center"){e=true}if(d=="stretch"||c=="stretch"||b=="stretch"){f=true}if(d=="debug"||c=="debug"||b=="debug"){g=true}var n=a(this);if(n.attr("src")&&!n.attr("jquery_scale_orig-height")){j("jquery.scale: object is an image");var k=new Date();var o=n.attr("src");var p=o;if(o.indexOf("?")!=-1){p=o.substring(0,o.indexOf("?"))}p=p+"?"+k.getTime();n.attr("src",p);j("jquery.scale: img src changed to "+p+" to force a reload");this.onload=l}else{j("jquery.scale: object is NOT an image");l()}function l(){if(!n.attr("jquery_scale_orig-height")){n.attr("jquery_scale_orig-height",n.height());n.attr("jquery_scale_orig-width",n.width());j("jquery.scale: is starting for the first time. Captured the original dimensions of "+n.width()+"x"+n.height())}else{n.height(parseInt(n.attr("jquery_scale_orig-height")));n.width(parseInt(n.attr("jquery_scale_orig-width")));j("jquery.scale: has been run before. Reset the object to its original dimensions of "+n.width()+"x"+n.height())}j("jquery.scale: BEFORE scaling, object's outer size = "+n.outerWidth()+"x"+n.outerHeight()+", object's parent's inner size = "+n.parent().width()+"x"+n.parent().height());if(n.outerHeight()>n.parent().height()&&n.outerWidth()<=n.parent().width()){j("jquery.scale: object is too tall, but width is OK");h()}else{if(n.outerWidth()>n.parent().width()&&n.outerHeight()<=n.parent().height()){j("jquery.scale: object is too wide, but height is OK");m()}else{if(n.outerWidth()<n.parent().width()&&n.outerHeight()<n.parent().height()&&f){j("jquery.scale: object is too short and skinny, and stretch option enabled");if(n.parent().height()/n.outerHeight()<=n.parent().width()/n.outerWidth()){j("jquery.scale: height is closer to being correct, or height and width are equally close to being correct");h()}else{j("jquery.scale: width is closer to being correct");m()}}else{if(n.outerWidth()>n.parent().width()&&n.outerHeight()>n.parent().height()){j("jquery.scale: object is too tall and wide");if(n.parent().height()/n.outerHeight()>n.parent().width()/n.outerWidth()){j("jquery.scale: width is closer to being correct");m()}else{j("jquery.scale: height is closer to being correct, or height and width are equally close to being correct");h()}}}}}if(e){j("jquery.scale: centering option enabled");n.css("position","relative");n.css("margin-top",n.parent().height()/2-n.outerHeight()/2);n.css("margin-left",n.parent().width()/2-n.outerWidth()/2)}this.onload=null;j("jquery.scale: AFTER scaling, object's size = "+n.outerWidth()+"x"+n.outerHeight()+", object's parent's size = "+n.parent().width()+"x"+n.parent().height()+".'")}function h(){j("jquery.scale: matching height");n.width(n.outerWidth()*n.parent().height()/n.outerHeight()-(n.outerWidth()-n.width()));n.height(n.parent().height()-(n.outerHeight()-n.height()))}function m(){j("jquery.scale: matching width");n.height(n.outerHeight()*n.parent().width()/n.outerWidth()-(n.outerHeight()-n.height()));n.width(n.parent().width()-(n.outerWidth()-n.width()))}function j(q){if(window.console&&g){console.log(q)}}})}})})(jQuery);(function(d){d.fn.jCarouselLite=function(e){e=d.extend({btnPrev:null,btnNext:null,btnGo:null,mouseWheel:false,auto:null,speed:200,easing:null,vertical:false,circular:true,visible:3,start:0,scroll:1,beforeStart:null,afterEnd:null},e||{});return this.each(function(){var o=false,m=e.vertical?"top":"left",g=e.vertical?"height":"width";var f=d(this),q=d("ul",f),j=d("li",q),u=j.size(),t=e.visible;if(e.circular){q.prepend(j.slice(u-t-1+1).clone()).append(j.slice(0,t).clone());e.start+=t}var s=d("li",q),p=s.size(),w=e.start;f.css("visibility","visible");s.css({overflow:"hidden"});q.css({margin:"0",padding:"0",position:"relative","list-style-type":"none","z-index":"1"});f.css({overflow:"hidden",position:"relative","z-index":"2",left:"0px"});var l=e.vertical?a(s):c(s);var r=l*p;var n=l*t;s.css({width:s.width(),height:s.height()});q.css(g,r+"px").css(m,-(w*l));f.css(g,n+"px");if(e.btnPrev){d(e.btnPrev).click(function(){return k(w-e.scroll)})}if(e.btnNext){d(e.btnNext).click(function(){return k(w+e.scroll)})}if(e.btnGo){d.each(e.btnGo,function(v,y){d(y).click(function(){return k(e.circular?e.visible+v:v)})})}if(e.mouseWheel&&f.mousewheel){f.mousewheel(function(v,y){return y>0?k(w-e.scroll):k(w+e.scroll)})}if(e.auto){setInterval(function(){k(w+e.scroll)},e.auto+e.speed)}function h(){return s.slice(w).slice(0,t)}function k(v){if(!o){if(e.beforeStart){e.beforeStart.call(this,h())}if(e.circular){if(v<=e.start-t-1){q.css(m,-((p-(t*2))*l)+"px");w=v==e.start-t-1?p-(t*2)-1:p-(t*2)-e.scroll}else{if(v>=p-t+1){q.css(m,-((t)*l)+"px");w=v==p-t+1?t+1:t+e.scroll}else{w=v}}}else{if(v<0||v>p-t){return}else{w=v}}o=true;q.animate(m=="left"?{left:-(w*l)}:{top:-(w*l)},e.speed,e.easing,function(){if(e.afterEnd){e.afterEnd.call(this,h())}o=false});if(!e.circular){d(e.btnPrev+","+e.btnNext).removeClass("disabled");d((w-e.scroll<0&&e.btnPrev)||(w+e.scroll>p-t&&e.btnNext)||[]).addClass("disabled")}}return false}})};function b(e,f){return parseInt(d.css(e[0],f))||0}function c(e){return e[0].offsetWidth+b(e,"marginLeft")+b(e,"marginRight")}function a(e){return e[0].offsetHeight+b(e,"marginTop")+b(e,"marginBottom")}})(jQuery);(function(c){var a=new RegExp("[^a-z0-9]","gi");c.fn.extend({autocomplete:function(e,f){var g=typeof e=="string";f=c.extend({},c.Autocompleter.defaults,{url:g?e:null,data:g?null:e,delay:g?c.Autocompleter.defaults.delay:10,max:f&&!f.scroll?10:150,noResult:false,characToExclude:["le","la","de","a","un","une","d"],unselectOnMouseOut:true,noResultValues:{},approximatedSearch:"",nbClicFocus:2},f);f.highlight=f.highlight||function(h){return h};f.formatMatch=f.formatMatch||f.formatItem;f.nbClicFocus=f.nbClicFocus-1;return this.each(function(){new c.Autocompleter(this,f)})},result:function(e){return this.bind("result",e)},search:function(e){return this.trigger("search",[e])},flushCache:function(){return this.trigger("flushCache")},setOptions:function(e){return this.trigger("setOptions",[e])},unautocomplete:function(){return this.trigger("unautocomplete")}});c.Autocompleter=function(q,k){var f={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8};var e=c(q).attr("autocomplete","off").addClass(k.inputClass);var o;var u="";var r=c.Autocompleter.Cache(k);var h=0;var A;var D={mouseDownOnSelect:false};var w=c.Autocompleter.Select(k,q,g,D);var C;c.browser.opera&&c(q.form).bind("submit.autocomplete",function(){if(C){C=false;return false}});e.bind((c.browser.opera?"keypress":"keydown")+".autocomplete",function(E){h=1;A=E.keyCode;switch(E.keyCode){case f.UP:E.preventDefault();if(w.visible()){w.prev()}else{z(0,true)}break;case f.DOWN:E.preventDefault();if(w.visible()){w.next()}else{z(0,true)}break;case f.PAGEUP:E.preventDefault();if(w.visible()){w.pageUp()}else{z(0,true)}break;case f.PAGEDOWN:E.preventDefault();if(w.visible()){w.pageDown()}else{z(0,true)}break;case k.multiple&&c.trim(k.multipleSeparator)==","&&f.COMMA:case f.TAB:case f.RETURN:if(g()){E.preventDefault();C=true;return false}break;case f.ESC:w.hide();break;default:clearTimeout(o);o=setTimeout(z,k.delay);break}}).focus(function(){h++}).blur(function(){h=0;if(!D.mouseDownOnSelect){y()}}).click(function(){if(h++>k.nbClicFocus&&!w.visible()){z(0,true)}}).bind("search",function(){var E=(arguments.length>1)?arguments[1]:null;function F(J,I){var G;if(I&&I.length){for(var H=0;H<I.length;H++){if(I[H].result.toLowerCase()==J.toLowerCase()){G=I[H];break}}}if(typeof E=="function"){E(G)}else{e.trigger("result",G&&[G.data,G.value])}}c.each(l(e.val()),function(G,H){j(H,F,F)})}).bind("flushCache",function(){r.flush()}).bind("setOptions",function(){c.extend(k,arguments[1]);if("data" in arguments[1]){r.populate()}}).bind("unautocomplete",function(){w.unbind();e.unbind();c(q.form).unbind(".autocomplete")});function g(){var H=w.selected();if(!H){return false}var E=H.result;u=E;if(k.multiple){var K=l(e.val());if(K.length>1){var G=k.multipleSeparator.length;var J=c(q).selection().start;var I,F=0;c.each(K,function(L,M){F+=M.length;if(J<=F){I=L;return false}F+=G});K[I]=E;E=K.join(k.multipleSeparator)}E+=k.multipleSeparator}e.val(E);B();e.trigger("result",[H.data,H.value]);return true}function z(G,F){if(A==f.DEL){w.hide();return}var E=e.val();if(!F&&E==u){return}u=E;E=n(E);if(E.length>=k.minChars){e.addClass(k.loadingClass);if(!k.matchCase){E=E.toLowerCase()}j(E,p,B)}else{s();w.hide()}}function l(E){if(!E){return[""]}if(!k.multiple){return[c.trim(E)]}return c.map(E.split(k.multipleSeparator),function(F){return c.trim(E).length?c.trim(F):null})}function n(E){if(!k.multiple){return E}var G=l(E);if(G.length==1){return G[0]}var F=c(q).selection().start;if(F==E.length){G=l(E)}else{G=l(E.replace(E.substring(F),""))}return G[G.length-1]}function v(E,F){if(k.autoFill&&(n(e.val()).toLowerCase()==E.toLowerCase())&&A!=f.BACKSPACE){e.val(e.val()+F.substring(n(u).length));c(q).selection(u.length,u.length+F.length)}}function y(){clearTimeout(o);o=setTimeout(B,200)}function B(){var E=w.visible();w.hide();clearTimeout(o);s();if(k.mustMatch){e.search(function(F){if(!F){if(k.multiple){var G=l(e.val()).slice(0,-1);e.val(G.join(k.multipleSeparator)+(G.length?k.multipleSeparator:""))}else{e.val("");e.trigger("result",null)}}})}}function p(F,E){if(E&&E.length&&h){s();w.display(E,F);v(F,E[0].value);w.show()}else{B()}}function m(G,F){var J=parseInt(G.data.weight);var I=G.data.link;var E=parseInt(F.data.weight);var H=F.data.link;if((E==J)){if(H<=I){return 1}else{return -1}}else{if(E<J){return -1}else{return 1}}}function j(G,K,F){if(!k.matchCase){G=G.toLowerCase()}var I=r.load(G);if(I!=null&&k.noResult&&I.length==0){I[0]={value:"",data:k.noResultValues}}var J=[];var E=[];var H=[];c.each(I,function(N,M){if(M.data.noshow){var O=clone(M);if(jQuery.inArray(serialize(M.data.libelle_ok),E)==-1){O.value=M.data.libelle_ok;J.push(O);E.push(serialize(M.data.libelle_ok))}}else{H.push(M)}});if(H.length==0&&J.length>0){I=[];c.each(J,function(N,M){c.each(M.value,function(P,O){I.push({value:O,data:{text:O,link:M.data.link}})})});I.push({value:"",data:{text:k.approximatedSearch,link:""}})}else{I=H}if(I&&I.length){I.sort(m);search_data_selected=I;K(G,I)}else{if((typeof k.url=="string")&&(k.url.length>0)){var L={timestamp:+new Date()};c.each(k.extraParams,function(M,N){L[M]=typeof N=="function"?N():N});c.ajax({mode:"abort",port:"autocomplete"+q.name,dataType:k.dataType,url:k.url,data:c.extend({q:n(G),limit:k.max},L),success:function(N){var M=k.parse&&k.parse(N)||t(N);r.add(G,M);K(G,M)}})}else{w.emptyList();F(G)}}}function t(H){var E=[];var G=H.split("\n");for(var F=0;F<G.length;F++){var I=c.trim(G[F]);if(I){I=I.split("|");E[E.length]={data:I,value:I[0],result:k.formatResult&&k.formatResult(I,I[0])||I[0]}}}return E}function s(){e.removeClass(k.loadingClass)}};function b(f,e){if(f.position<=e.position){return -1}else{return 1}}function d(f,e){if(f.length<=e.length){return 1}else{return -1}}c.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:false,matchSubset:true,matchContains:false,cacheLength:10,max:100,mustMatch:false,extraParams:{},selectFirst:true,formatItem:function(e){return e[0]},formatMatch:null,autoFill:false,width:0,multiple:false,multipleSeparator:", ",highlight:function(n,h){var j=n;var e=true;var l=0;var o=remove_accent(n).toLowerCase();var m=remove_accent(h).toLowerCase().split(a).sort(d);var k=[];var g=[];c.each(m,function(q,p){p=c.trim(p);if(p.length>0){var r=true;c.each(g,function(u,t){if(t.indexOf(p)!=-1){r=false}});if(r){g.push(p);l=0;e=true;while(e){var s=o.indexOf(p,l);if(s>=0&&p.length>0){k.push({position:s,longueur:p.length})}else{e=false}l+=s+p.length+1}}}});k.sort(b);var f=0;c.each(k,function(q,p){f+=p.position;j=j.substr(0,f)+"<strong>"+j.substr(f,p.longueur)+"</strong>"+j.substring(f+p.longueur);f=(q+1)*17});return j},scroll:true,scrollHeight:180};c.Autocompleter.Cache=function(f){var j={};var g=0;function l(r,q){r=remove_accent(r);q=remove_accent(q);if(!f.matchCase){r=r.toLowerCase()}for(var u in f.characToExclude){var t=q.indexOf(f.characToExclude[u]);var m=f.characToExclude[u].length;if(t==-1){q=q}else{if(t==0){q=q.replace(f.characToExclude[u]+" "," ")}else{if(t+m==u.strlen){q=q.replace(" "+f.characToExclude[u]," ")}else{q=q.replace(" "+f.characToExclude[u]+" "," ")}}}}var n=q.split(a);var o=0;c.each(n,function(p,s){if(o!=-1){o=r.indexOf(s);if(f.matchContains=="word"){o=r.toLowerCase().search("\\b"+s.toLowerCase())}}});if(o==-1){return false}return o==0||f.matchContains}function k(n,m){if(g>f.cacheLength){e()}if(!j[n]){g++}j[n]=m}function h(){if(!f.data){return false}var n={},m=0;if(!f.url){f.cacheLength=1}n[""]=[];for(var p=0,o=f.data.length;p<o;p++){var s=f.data[p];s=(typeof s=="string")?[s]:s;var r=f.formatMatch(s,p+1,f.data.length);if(r===false){continue}var q=r.charAt(0).toLowerCase();if(!n[q]){n[q]=[]}var t={value:r,data:s,result:f.formatResult&&f.formatResult(s)||r};n[q].push(t);if(m++<f.max){n[""].push(t)}}c.each(n,function(u,v){f.cacheLength++;k(u,v)})}setTimeout(h,25);function e(){j={};g=0}return{flush:e,add:k,populate:h,load:function(p){if(!f.cacheLength||!g){return null}if(!f.url&&f.matchContains){var o=[];for(var m in j){if(m.length>0){var r=j[m];c.each(r,function(s,q){if(l(q.value,p)){o.push(q)}})}}return o}else{if(j[p]){return j[p]}else{if(f.matchSubset){for(var n=p.length-1;n>=f.minChars;n--){var r=j[p.substr(0,n)];if(r){var o=[];c.each(r,function(s,q){if(l(q.value,p)){o[o.length]=q}});return o}}}}}return null}}};c.Autocompleter.Select=function(h,n,p,t){var m={ACTIVE:"ac_over"};var o,j=-1,v,q="",w=true,f,s;function r(){if(!w){return}f=c("<div/>").hide().addClass(h.resultsClass).css("position","absolute").appendTo(document.body);s=c("<ul/>").appendTo(f).mousemove(function(y){if(u(y).nodeName&&u(y).nodeName.toUpperCase()=="LI"){j=c("li",s).removeClass(m.ACTIVE).index(u(y));c(u(y)).addClass(m.ACTIVE)}}).click(function(y){c(u(y)).addClass(m.ACTIVE);p();return false}).mousedown(function(){t.mouseDownOnSelect=true}).mouseup(function(){t.mouseDownOnSelect=false}).mouseout(function(y){if(h.unselectOnMouseOut){j=c("li",s).removeClass(m.ACTIVE).index(u(y))}});if(h.width>0){f.css("width",h.width)}w=false}function u(z){var y=z.target;while(y&&y.tagName!="LI"){y=y.parentNode}if(!y){return[]}return y}function l(y){o.slice(j,j+1).removeClass(m.ACTIVE);k(y);var A=o.slice(j,j+1).addClass(m.ACTIVE);if(h.scroll){var z=0;o.slice(0,j).each(function(){z+=this.offsetHeight});if((z+A[0].offsetHeight-s.scrollTop())>s[0].clientHeight){s.scrollTop(z+A[0].offsetHeight-s.innerHeight())}else{if(z<s.scrollTop()){s.scrollTop(z)}}}}function k(y){j+=y;if(j<0){j=o.size()-1}else{if(j>=o.size()){j=0}}}function e(y){return h.max&&h.max<y?h.max:y}function g(){s.empty();var A=e(v.length);for(var C=0;C<A;C++){if(!v[C]){continue}var B=v[C].data.link;var E=new RegExp("^[^,]+_g([0-9]+)","i");var z=B.match(E);var F="";if(z!=null&&z.length>=2&&parseInt(z[1]).toString()==z[1].toString()){F=z[1]}var D=h.formatItem(v[C].data,C+1,A,v[C].value,q);if(D===false){continue}var y=c("<li/>").html(h.highlight(D,q)).addClass(C%2==0?"ac_even":"ac_odd").attr("id-generique",F).appendTo(s)[0];c.data(y,"ac_data",v[C])}o=s.find("li");if(h.selectFirst){o.slice(0,1).addClass(m.ACTIVE);j=0}if(c.fn.bgiframe){s.bgiframe()}}return{display:function(z,y){r();v=z;q=y;g()},next:function(){l(1)},prev:function(){l(-1)},pageUp:function(){if(j!=0&&j-8<0){l(-j)}else{l(-8)}},pageDown:function(){if(j!=o.size()-1&&j+8>o.size()){l(o.size()-1-j)}else{l(8)}},hide:function(){f&&f.hide();o&&o.removeClass(m.ACTIVE);j=-1},visible:function(){return f&&f.is(":visible")},current:function(){return this.visible()&&(o.filter("."+m.ACTIVE)[0]||h.selectFirst&&o[0])},show:function(){var A=c(n).offset();f.css({width:typeof h.width=="string"||h.width>0?h.width:Math.max(c(n).width()+44,320),top:A.top+n.offsetHeight,left:A.left}).show();if(h.scroll){s.scrollTop(0);s.css({maxHeight:h.scrollHeight,overflow:"auto"});if(c.browser.msie&&typeof document.body.style.maxHeight==="undefined"){var y=0;o.each(function(){y+=this.offsetHeight});var z=y>h.scrollHeight;s.css("height",z?h.scrollHeight:y);if(!z){o.width(s.width()-parseInt(o.css("padding-left"))-parseInt(o.css("padding-right")))}}}},selected:function(){var y=o&&o.filter("."+m.ACTIVE).removeClass(m.ACTIVE);return y&&y.length&&c.data(y[0],"ac_data")},emptyList:function(){s&&s.empty()},unbind:function(){f&&f.remove()}}};c.fn.selection=function(m,e){if(m!==undefined){return this.each(function(){if(this.createTextRange){var n=this.createTextRange();if(e===undefined||m==e){n.move("character",m);n.select()}else{n.collapse(true);n.moveStart("character",m);n.moveEnd("character",e);n.select()}}else{if(this.setSelectionRange){this.setSelectionRange(m,e)}else{if(this.selectionStart){this.selectionStart=m;this.selectionEnd=e}}}})}var k=this[0];if(k.createTextRange){var f=document.selection.createRange(),l=k.value,j="<->",g=f.text.length;f.text=j;var h=k.value.indexOf(j);k.value=l;this.selection(h,h+g);return{start:h,end:h+g}}else{if(k.selectionStart!==undefined){return{start:k.selectionStart,end:k.selectionEnd}}}}})(jQuery);
/*!
 * jQCloud Plugin for jQuery
 *
 * Version 0.1.3
 *
 * Copyright 2011, Luca Ongaro
 * Licensed under the MIT license.
 *
 * Date: Wed Feb 16 11:41:32 2011 +0100
 */
(function(a){a.fn.jQCloud=function(c,e){var d=this;var b=function(){var g=function(q,n,p){if(p){return true}var m=function(s,r){if(Math.abs(2*s.offsetLeft+s.offsetWidth-2*r.offsetLeft-r.offsetWidth)<s.offsetWidth+r.offsetWidth){if(Math.abs(2*s.offsetTop+s.offsetHeight-2*r.offsetTop-r.offsetHeight)<s.offsetHeight+r.offsetHeight){return true}}return false};var o=0;for(o=0;o<n.length;o++){if(m(q,n[o])){return true}}return false};c.sort(function(n,m){if(n.weight<m.weight){return 1}else{if(n.weight>m.weight){return -1}else{return 0}}});var j=2;var f=[];var h=d.width()/d.height();var l=d.width()/2;var k=d.height()/2;a.each(c,function(t,m){var q=6.28*Math.random();var u=0;var s=Math.round((m.weight-c[c.length-1].weight)/(c[0].weight-c[c.length-1].weight)*9)+1;var z;if(m.url!==undefined){var r;if(m.multiple){z='<a href="javascript:;" class="_multiple_generique" style="cursor:pointer;" id="'+m.ids+"\" onclick=\"recordOutboundLink(this, 'Catalogue : nuage de mots', '"+m.text.replace(/\'/g,"\\'")+"', '"+__GOOGLE_ANALYTICS__+"');\">"+m.text+"</a></span>"}else{z='<a href="'+m.url+"\" onclick=\"recordOutboundLink(this, 'Catalogue : nuage de mots', '"+m.text.replace(/\'/g,"\\'")+"', '"+__GOOGLE_ANALYTICS__+"');\">"+m.text+"</a></span>"}}else{z=m.text}d.append("<span id='word_"+t+"' class='w"+s+"' title='"+(m.title||"")+"'>"+z+"</span>");var o=a("#word_"+t).width();var y=a("#word_"+t).height();var p=l-o/2;var w=k-y/2;a("#word_"+t).css("position","absolute");a("#word_"+t).css("left",p+"px");a("#word_"+t).css("top",w+"px");while(g(document.getElementById("word_"+t),f,false)){u+=j;q+=(t%2===0?1:-1)*j;q+=j;p=l+(u*Math.cos(q)-(o/2))*h;w=k+u*Math.sin(q)-(y/2);a("#word_"+t).css("left",p+"px");a("#word_"+t).css("top",w+"px")}if(p<0||w<0||(document.getElementById("word_"+t).offsetHeight+w>d.height())){var v=true;var n=0;while(g(document.getElementById("word_"+t),f,v)){n++;u+=j;q+=(t%2===0?1:-1)*j;p=l+(u*Math.cos(q)-(o/2))*h;w=k+u*Math.sin(q)-(y/2);a("#word_"+t).css("left",p+"px");a("#word_"+t).css("top",w+"px");if((p<0||w<0)&&n<30){v=true}else{if((document.getElementById("word_"+t).offsetHeight+w>d.height())&&n<30){v=true}else{v=false}}if(n>=30){}}}f.push(document.getElementById("word_"+t))});if(typeof e==="function"){e.call(this)}};setTimeout(function(){b()},100);return this}})(jQuery);decodeBase64=function(t){var j={},h,n=0,m,p,g=0,o,d="",q=String.fromCharCode,k=t.length;var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(h=0;h<64;h++){j[f.charAt(h)]=h}for(p=0;p<k;p++){m=j[t.charAt(p)];n=(n<<6)+m;g+=6;while(g>=8){((o=(n>>>(g-=8))&255)||(p<(k-2)))&&(d+=q(o))}}return d};data_to_action=function(a){$(a).click(function(){document.location=decodeBase64($(a).attr("data-to"))})};