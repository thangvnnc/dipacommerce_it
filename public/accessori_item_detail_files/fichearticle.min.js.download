$(document).ready(function(){try{var a=null;a=$("div.panier a").attr("id").split("*")[0];window.ktypenr=a>0?a:null}catch(b){window.ktypenr=null}if(__TYPE_PAGE__=="fichearticle"||__TYPE_PAGE__=="listeproduit"){$('div[class="marque_modele_titre"]').click(function(){recordOutboundEvent("[ListeVehicule FA]","MarqueSerie_"+$(this).text(),__GOOGLE_ANALYTICS__)});$('div[class="marque_modele_type"]').click(function(){recordOutboundEvent("[ListeVehicule FA]","ModeleType_"+$(this).text(),__GOOGLE_ANALYTICS__)});$(".b_content .col_block ul.list_tree ul ul a").click(function(){recordOutboundEventFull("[Visites sur page listing et FA v4]","Fiche Article","Clicks sur generique colonne gauche",__GOOGLE_ANALYTICS__)});$(".article_col_right ._ajout_panier").click(function(){recordOutboundEventFull("[Visites sur page listing et FA v4]","Fiche Article","Ajout au panier",__GOOGLE_ANALYTICS__)})}$("div.col_block div.marque_modele_type a").click(function(){var c=get_url_evcfga(this.href);if(c.v){$.post(__AJAX__+"session-ktypenr.php",{ktypenr:c.v},function(d){document.location.reload()});return false}});$('a[class^="_modal_select_v"]').click(function(){var c=$("#f_modal_select").html();$.fancybox({padding:0,margin:0,showCloseButton:false,scrolling:"no",titleshow:false,content:c,onComplete:function(){$("._modal_close").click(function(){$.fancybox.close()});selecteur.init("fs_modal",function(e,f){var h=$('option[value="'+e.value+'"]',e)[0],g=(is_func(h.onclick)?h.onclick():null),d=$(e).parents("form#"+f);if(is_str(g)){button.enable($("#"+f+"_go",d),"#")}else{button.disable($("#"+f+"_go",d))}},undefined,function(g,f){if(button.isEnable(g)){var d=$(g).parents("form#"+f);var e=$('select[name="'+f+'[v_type]"]',d).val();if(e){$.post(__AJAX__+"session-ktypenr.php",{ktypenr:e},function(h){$.fancybox.close();if(__STAGE__=="/eqgeneriqueserie"){var i=$("input#fs_modal_refarticle").val();window.location=i+"?select";return false}window.location=window.location.pathname+"?select"})}return false}})}});return false});$("img._modalImg").click(function(){var c=$(".article_content").find("input._images").val().split("*");$.fancybox(c,{padding:20,transitionIn:"none",transitionOut:"none",type:"image",changeFade:0})});$("a._modalImgNav").click(function(){recordOutboundEventFull("[Visites sur page listing et FA v4]","Fiche Article","Click sur photo classique",__GOOGLE_ANALYTICS__);load_img(this,true)});$("a._modalImg360").click(function(){recordOutboundEventFull("[Visites sur page listing et FA v4]","Fiche Article","Click sur photo 360",__GOOGLE_ANALYTICS__);load_img360(this,true)});$("img._modalVideo").click(function(){load_video(this)});$("div.marque_modele_titre_container").click(function(){$(this).toggleClass("marque_modele_titre_plus");$(this).toggleClass("marque_modele_titre_moins");$(this).parent().children(".marque_modele_type").toggle()});$(".jCarouselLite").jCarouselLite({btnNext:".thubnails_next",btnPrev:".thubnails_prev",visible:2.8,circular:false});$("._updateQte").click(function(){var h=parseInt($("input:hidden[name=qte_force_unitaire]").val());var g=$(".ajout_panier a").attr("id");var e=g.split("*");var c=parseInt($("input:hidden[name=qte_pas]").val());var f=parseInt($("input:hidden[name=qte_pas_force]").val());if($(this).hasClass("plus")){recalculate=parseInt(h)+c;if(recalculate>=99){recalculate=99-(99%c)}}else{recalculate=parseInt(h)-c;if(recalculate<=c){recalculate=c}}$(".qte_view_unitaire input").attr("value",(recalculate));$(".qte_view input").attr("value",(recalculate*f));var d=e[0]+"*"+e[1]+"*"+recalculate;$(".ajout_panier a").attr("id",d)});$("#cp_bresil").keypress(function(d){if(d.which==13){d.preventDefault();var e=$("#cp_bresil").val();var c=$("#reference_article").val();$.ajax({type:"post",asyc:false,url:__AJAX__+"display_fdp_bresil.php",data:{code_postal:e,reference:c},complete:function(f){if(f.responseText!=""){$("#content_fdp_br").html(f.responseText)}}})}});$("#btn_fdp_br").click(function(d){d.preventDefault();var e=$("#cp_bresil").val();var c=$("#reference_article").val();$.ajax({type:"post",asyc:false,url:__AJAX__+"display_fdp_bresil.php",data:{code_postal:e,reference:c},complete:function(f){if(f.responseText!=""){$("#content_fdp_br").html(f.responseText)}}})});$(function(){$("a[href*=#]:not([href=#])").click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var c=$(this.hash);c=c.length?c:$("[id="+this.hash.slice(1)+"]");if(c.length){$("html,body").animate({scrollTop:c.offset().top},500);return false}}})})});function displayShippingPrice(){document.getElementById("shippingPrice")}function TreeviewClick(e){var d=0,b=0;e=e||event;if((e.target||e.srcElement)===this){$(this).removeClass("itm_hlight");var a=this,c=0;while(is_node(a)&&!$(a).hasClass("list_tree")){while((_isnode=is_node(a=a.parentNode))&&(_isstr=is_str(a.tagName))&&(_notul=!/^ul$/i.test(_tagn=a.tagName))){}c++}if($(this).hasClass("collapsed")){$(this).addClass("item_set").children("ul").slideDown(b,function(){$(this).parent("li").removeClass("collapsed")})}else{$(this).removeClass("item_set").children("ul").slideUp(d,function(){$(this).parent("li").addClass("collapsed")})}$("body").trigger("iframeManagerHeightChange");if(e.stopPropagation){e.stopPropagation()}e.cancelBubble=true;if(e.preventDefault){e.preventDefault()}return false}}function TreeviewMouseover(a){a=a||event;if((a.target||a.srcElement)===this){if($(this).hasClass("collapsed")){$(this).addClass("itm_hlight")}}}function TreeviewMouseout(a){a=a||event;if((a.target||a.srcElement)===this){if($(this).hasClass("collapsed")){$(this).removeClass("itm_hlight")}}}$(document).ready(function(){$("ul.list_tree li.children").bind("click",TreeviewClick).bind("mouseover",TreeviewMouseover).bind("mouseout",TreeviewMouseout);$("#treeview-show_boutique, #treeview-show_boutique.picto_boutique").bind("click",function(a){if($("#list_tree_boutique").is(":hidden")==true){$(this).closest("div").find(".picto_boutique.ferme").hide();$(this).closest("div").find(".picto_boutique.ouvert").show();$("#list_tree_boutique").show();$(this).closest("div").addClass("item_set").removeClass("collapsed")}else{$(this).closest("div").find(".picto_boutique.ouvert").hide();$(this).closest("div").find(".picto_boutique.ferme").show();$("#list_tree_boutique").hide();$(this).closest("div").addClass("collapsed").removeClass("item_set")}return false}).bind("mouseover",function(a){if($(this).closest("div").hasClass("collapsed")){$(this).closest("div").addClass("itm_hlight")}}).bind("mouseout",function(a){if($(this).closest("div").hasClass("itm_hlight")){$(this).closest("div").removeClass("itm_hlight")}})});$(document).ready(function(){var assurance_precoche=false;if($("a.paiementpanier").length>0){if($("input._modifier_assurance_retour").length>0){if(__ASSURANCE_RETOUR_POLLICITATION__){assurance_precoche=true;recordOutboundEvent("[Assurance Retour]","Impression_precoche",__GOOGLE_ANALYTICS__)}else{assurance_precoche=false;recordOutboundEvent("[Assurance Retour]","Impression_decoche",__GOOGLE_ANALYTICS__)}$(".paiementpanier").click(function(){if(assurance_precoche){var prefix_ga="Impression_precoche"}else{var prefix_ga="Impression_decoche"}if($("input._modifier_assurance_retour").attr("checked")==true){recordOutboundEventFull("[Assurance Retour]",prefix_ga,"etape_suivante_coche",__GOOGLE_ANALYTICS__)}else{recordOutboundEventFull("[Assurance Retour]",prefix_ga,"etape_suivante_decoche",__GOOGLE_ANALYTICS__)}})}else{recordOutboundEvent("[Assurance Retour]","Impression_non_eligible_assurance",__GOOGLE_ANALYTICS__)}}if($("a.adressepanier").length>0){if($("input[name=promesse_client]").length>0){recordOutboundEvent("[Promesse Client sur page Livraison]",$("input[name=promesse_client]").val(),__GOOGLE_ANALYTICS__);$(".adressepanier").click(function(){var livr=$("input[name=modelivraisonn]:checked").val();var livr2="Etape-suivante_";if(livr=="24"){livr2+="Express"}else{if(livr=="48"){livr2+="Rapide"}else{if(livr=="72"){livr2+="Eco"}else{if(livr=="relai"){livr2+="Relais"}else{if(livr=="relai-correos"){livr2+="Relais"}else{if(livr=="relai-ma"){livr2+="Relais"}else{livr2+=livr}}}}}}recordOutboundEventFull("[Promesse Client sur page Livraison]",$("input[name=promesse_client]").val(),livr2,__GOOGLE_ANALYTICS__)})}}if(is_func($.scrollTo)&&window.location.hash&&window.location.hash!="#"&&window.location.hash!="#undefined"){elem=window.location.hash.substring(1);if(jQuery("#"+elem).length>0){$.scrollTo(elem)}}if($("#cgv_special_klarna").length>0){var mode_paiement=$('#panier_paiment input[type="radio"][name="d"]:checked').parent("span")[0].className.replace(/[\s\S]*?pp_([\S]+)[\s\S]*/gi,function(){return arguments[1]}).toUpperCase();if(mode_paiement.indexOf("KLARNA")>=0){$("#cgv_special_klarna").show()}}if($("#cgv_special_billpay").length>0){var mode_paiement=$('#panier_paiment input[type="radio"][name="d"]:checked').parent("span")[0].className.replace(/[\s\S]*?pp_([\S]+)[\s\S]*/gi,function(){return arguments[1]}).toUpperCase();if(mode_paiement.indexOf("BILLPAY")>=0){$("#cgv_special_billpay").show()}}var updateSession=function(ref,action,redirectToEmptyCart,qte_pas){updateSessionHorsPanier(ref,action,redirectToEmptyCart,null,qte_pas)};var updateSessionHorsPanier=function(ref,action,redirectToEmptyCart,o_tpl,qte_pas){if(is_obj(o_tpl)){var newref=ref.split("*")[0]+"*"+ref.split("*")[1]+"*"+qte_pas,html_qte="";var mpi_offer_chosen=ref.split("*")[4];var price_to_use,display_pnfo;if(mpi_offer_chosen!=undefined){price_to_use=o_tpl["price_"+mpi_offer_chosen];display_pnfo=false}else{price_to_use=o_tpl.price;display_pnfo=true}if(action=="voir_offres"){var output='					<div>						<div class="float_l pad0_8" style="width:186px;height:162px;overflow:hidden;" ><img class="_resizeImage" src="'+o_tpl.img+'" /></div>						<div style="position:absolute;width:50%;top:8%;height:143px;left:48%;" >							<div class="thikbox_caddie_produit" >'+o_tpl.desc+"<br /><small>"+o_tpl.dref+'</small>		<br /><br /><span style="font-weight:normal;font-style:normal">'+o_tpl.stock+"</span></div>"+html_qte+"							</div>						</div>					</div>";$("#_modal_panier-content").html($(output).html())}else{if(action=="add_article"){if($("#_modal_panier .tbox_cart_img").length>0){$("#_modal_panier .tbox_cart_img").attr("src",o_tpl.img);$("#_modal_panier .tbox_cart_desc").html(o_tpl.desc);$("#_modal_panier .tbox_cart_dref").html(o_tpl.dref+($("#_modal_panier .tbox_cart_dref").hasClass("_setqte")?html_qte:""));$("#_modal_panier .tbox_cart_price").html(price_to_use);$("#_modal_panier .tbox_cart_qte_force_alert").html(o_tpl.qte_force_alert);if(display_pnfo){$("#_modal_panier .tbox_cart_pnfo").html(o_tpl.pnfo)}}else{var output='					<div>						<div class="float_l pad0_8" style="width:186px;height:162px;overflow:hidden;" ><img class="_resizeImage" src="'+o_tpl.img+'" /></div>						<div style="position:absolute;width:50%;top:8%;height:143px;left:48%;" >							<div class="thikbox_caddie_produit" >'+o_tpl.desc+"<br /><small>"+o_tpl.dref+'</small></div>							<div style="position: absolute;bottom:0;left:0">								<div class="thikbox_caddie_prix" >'+price_to_use+"</div>"+html_qte+"							</div>						</div>					</div>";$("#_modal_panier-content").html($(output).html())}}else{var output='				<div>					<div class="float_l pad0_8" style="width:186px;height:162px;overflow:hidden;" ><img class="_resizeImage" src="'+o_tpl.img+'" /></div>					<div style="position:absolute;width:50%;top:8%;height:143px;left:48%;" >						<div class="thikbox_caddie_produit" >'+o_tpl.desc+"<br /><small>"+o_tpl.dref+'</small></div>						<div style="position: absolute;bottom:0;left:0">							<div class="thikbox_caddie_prix" >'+o_tpl.price+"</div>"+html_qte+"						</div>					</div>				</div>";$("#_modal_panier-content").html($(output).html())}}if(action=="voir_offres"&&$("#mpi_price_fast").length){$("#mpi_price_slow").html(o_tpl.price_slow);$("#mpi_price_fast").html(o_tpl.price_fast);if($("#mpi-rectangle-fast").find("a._produits_col").length){$("#mpi-rectangle-fast").find("a._produits_col").attr("id",ref+"**fast")}if($("#mpi-rectangle-slow").find("a._produits_col").length){$("#mpi-rectangle-slow").find("a._produits_col").attr("id",ref+"**slow")}}}var stopSession=false;if($(document.getElementById(ref)).hasClass("_addselling_turbos")){var htmlPopup=$("div#_modal_panier_turbo").html()}else{if($(document.getElementById(ref)).hasClass("_voir_les_offres")){var htmlPopup=$("div#_modal_marketplace").html();stopSession=true}else{var htmlPopup=$("div#_modal_panier").html()}}var actionClose=true;if(htmlPopup){var btn_pos;var has_checked=false;if($("._btn_position_haut").length>0){btn_pos="haut"}else{btn_pos="bas"}$.fancybox({padding:0,margin:0,showCloseButton:false,scrolling:"no",titleshow:false,content:htmlPopup,onClosed:function(){if(actionClose){if($("._addselling").length&&!has_checked){recordOutboundEvent("[Comportement thickbox ajout panier]","avec_push_produit_bouton_"+btn_pos+"|sortie|sans_ajout_ad-selling",__GOOGLE_ANALYTICS__)}else{if($("._addselling").length){recordOutboundEvent("[Comportement thickbox ajout panier]","avec_push_produit_bouton_"+btn_pos+"|sortie|avec_ajout_ad-selling",__GOOGLE_ANALYTICS__)}else{recordOutboundEvent("[Comportement thickbox ajout panier]","sans_push_produit|sortie",__GOOGLE_ANALYTICS__)}}}},onComplete:function(){$("._modal_close").click(function(){$.fancybox.close()});if(stopSession){push_data_layer_marketplaceinside();$("#fancybox-content a._ajout_panier").click(addToCartFunction);var mpi_cutoff=$("#fancybox-content span.mpi-cutoff");if(mpi_cutoff.length){if(o_tpl.cpt_rebour!=null){var txt=mpi_cutoff.html();Rebour(mpi_cutoff,o_tpl.cpt_rebour,txt)}else{Rebour(mpi_cutoff,mpi_cutoff.data("rebour"),mpi_cutoff.data("rebour-affichage"))}}}$("._modal_panier-action-shop").click(function(){if($("._addselling").length&&($("._addselling").find("input[type=checkbox]").filter(":checked").length==0)){recordOutboundEvent("[Comportement thickbox ajout panier]","avec_push_produit_bouton_"+btn_pos+"|continuer_achat|sans_ajout_ad-selling",__GOOGLE_ANALYTICS__)}else{if($("._addselling").length){recordOutboundEvent("[Comportement thickbox ajout panier]","avec_push_produit_bouton_"+btn_pos+"|continuer_achat|avec_ajout_ad-selling",__GOOGLE_ANALYTICS__)}else{recordOutboundEvent("[Comportement thickbox ajout panier]","sans_push_produit|continuer_achat",__GOOGLE_ANALYTICS__)}}actionClose=false;$.fancybox.close();return false});$("._modal_panier-action-pay").click(function(){if($("._addselling").length&&($("._addselling").find("input[type=checkbox]").filter(":checked").length==0)){recordOutboundEvent("[Comportement thickbox ajout panier]","avec_push_produit_bouton_"+btn_pos+"|finaliser_commande|sans_ajout_ad-selling",__GOOGLE_ANALYTICS__)}else{if($("._addselling").length){recordOutboundEvent("[Comportement thickbox ajout panier]","avec_push_produit_bouton_"+btn_pos+"|finaliser_commande|avec_ajout_ad-selling",__GOOGLE_ANALYTICS__)}else{recordOutboundEvent("[Comportement thickbox ajout panier]","sans_push_produit|finaliser_commande",__GOOGLE_ANALYTICS__)}}actionClose=false;$.fancybox.close();window.location=$(this).attr("href");return false});$("._addselling_link").click(function(){recordOutboundEvent("[Comportement thickbox ajout panier]","avec_push_produit_bouton_"+btn_pos+"|clic_push_produit",__GOOGLE_ANALYTICS__);actionClose=false});$("#fancybox-content input._updateQte").click(function(){var ref=$(this).val(),$qte=$("#fancybox-content input[class="+ref+"]"),value=parseInt($qte.val());var qte_pas=parseInt(ref.split("*")[2]);if($(this).hasClass("plus")){value+=qte_pas;if(value>99){value=100-qte_pas}else{tooltip.panier.show("none",ref,"add_article")}}else{value-=qte_pas;if(value<1){value=qte_pas}else{tooltip.panier.show("none",ref,"del_article")}}$qte.attr("value",value)});var $adds_list=$("#adds_list","#fancybox-content").children("li"),$adds_length=$adds_list.length,$pa_left=$('<span class="curs_hand picto pa_left" style="display:none;position:absolute;z-index:3;left:-10px;top:32px;"></span>'),$pa_right=$('<span class="curs_hand picto pa_right" style="position:absolute;z-index: 3;right:-10px;top:32px;"></span>');$("#fancybox-content #adds_list div.checkbox").each(function(){var lbl=$("label",this).attr("for");$("input.checkbox",this).attr("name",lbl).attr("id",lbl).bind("change",function(){if(this.checked){var ref=this.value;if($("input#ref_article").attr("value")){ref+="*"+$("input#ref_article").attr("value")}tooltip.panier.show("none",ref,"add_article")}else{tooltip.panier.show("none",this.value,"sdel_article")}if($("._addselling").length&&($("._addselling").find("input[type=checkbox]").filter(":checked").length>0)){has_checked=true}else{has_checked=false}})});if($adds_length>2){$("#adds_list","#fancybox-content").parent().parent().css("position","relative").append($pa_left).append($pa_right);$("#adds_list","#fancybox-content").parent().jCarouselLite({btnNext:".f_addcart .pa_right",btnPrev:".f_addcart .pa_left",visible:2,circular:false,speed:750,afterEnd:function(elm){var elm_all=[],elm_first=$("#adds_list","#fancybox-content").children("li").first()[0],elm_last=$("#adds_list","#fancybox-content").children("li").last()[0],elm_left=$(".f_addcart .pa_left"),elm_right=$(".f_addcart .pa_right");elm_all=$.makeArray(elm);if($.inArray(elm_last,elm_all)>=0){elm_right.css("display","none")}else{elm_right.css("display","inline-block")}if($.inArray(elm_first,elm_all)>=0){elm_left.css("display","none")}else{elm_left.css("display","inline-block")}}})}$("#fancybox-content img._resizeImage").aeImageResize({width:186,height:162}).scale("center")}})}if(stopSession==false){tooltip.panier.show(o_tpl!=null?"none":"none",ref,action,function(){if(redirectToEmptyCart){window.location.href="./"}})}};var newsprice=function(ref,qte,qteI){var retour="";var prixu=$("td [class=prixu-"+ref+"]").html();var prixuConsigne=$("td [class=prixu-CONSIGNE-"+ref+"]").html();if(prixuConsigne==null||prixuConsigne==""){prixuConsigne="0"}prixu=parse_prx(prixu);prixuConsigne=parse_prx(prixuConsigne);var nprice=prixu*parseInt(qte);var npriceConsigne=prixuConsigne*parseInt(qte);nprice=nprice.toFixed(2);npriceConsigne=npriceConsigne.toFixed(2);$("td [class=prixt-"+ref+"]").html(_PRX(nprice));$("td [class=prixt-CONSIGNE-"+ref+"]").html(_PRX(npriceConsigne));var prixtotal=parse_prx($("[class=prixtt]").html());var refSup=qte-qteI;var difprix=(prixu+prixuConsigne)*parseInt(refSup);difprix=difprix.toFixed(2);var prixfinal=prixtotal+parseFloat(difprix);prixfinal=prixfinal.toFixed(2);$("[class=prixtt]").html(_PRX(prixfinal));if($("#contenupanier #bloc_promo").length||$("#contenupanier #bloc_promo_val").length){retour="refresh"}if($("#progressbar").length){progressebar(prixfinal)}return retour};function confirm_pop_promesse(_this,_func,msg,no,yes){var ids=$(_this).data("ids")||+new Date();yes='<span style="display: inline; position: static; background: url(/img/commun/color/gray/button.png) no-repeat scroll right 1px transparent; font-family: Arial,verdana,Helvetica,sans-serif; font-size: 12px; line-height: 27px; margin-left: 12px; padding: 6px 0 7px; height: auto; *padding: 0; zoom:1;"><span style="display: inline; background: url(/img/commun/color/gray/button.png?v=1542113958) no-repeat scroll left -26px transparent; color: #FFFFFF; font-weight: bold; left: -12px; margin: 0; padding: 6px 0 7px; height: auto; *padding: 0; zoom:1; position: relative; font-family: Arial,verdana,Helvetica,sans-serif; font-size: 12px; line-height: 27px;"><input style="background-color: transparent; border: 0 none; clear: both; color: #FFFFFF; cursor: pointer; display: inline-block; font-size: 11px; font-weight: bold; height: 27px; left: 6px; margin: 0; padding: 0 12px; position: relative; text-shadow: 1px 1px 0 rgba(0, 0, 0, 0.333); text-transform: lowercase; vertical-align: baseline; width: auto;" type="submit" id="_'+ids+'_y" value="'+(yes||_lang.Oui)+'" /></span></span>';no='<span style="display: inline; position: static; background: url(/img/commun/color/tangerine/button.png) no-repeat scroll right 1px transparent; font-family: Arial,verdana,Helvetica,sans-serif; font-size: 12px; line-height: 27px; margin-left: 12px; padding: 6px 0 7px; height: auto; *padding: 0; zoom:1;"><span style="display: inline; background: url(/img/commun/color/tangerine/button.png?v=1542113958) no-repeat scroll left -26px transparent; color: #FFFFFF; font-weight: bold; left: -12px; margin: 0; padding: 6px 0 7px; height: auto; *padding: 0; zoom:1; position: relative; font-family: Arial,verdana,Helvetica,sans-serif; font-size: 12px; line-height: 27px;"><input style="background-color: transparent; border: 0 none; clear: both; color: #FFFFFF; cursor: pointer; display: inline-block; font-size: 11px; font-weight: bold; height: 27px; left: 6px; margin: 0; padding: 0 12px; position: relative; text-shadow: 1px 1px 0 rgba(0, 0, 0, 0.333); text-transform: lowercase; vertical-align: baseline; width: auto;" type="submit" id="_'+ids+'_n" value="'+(no||_lang.Non)+'" /></span></span>';$("#_"+ids+"_c").remove();$(_this).removeData("ids");$(_this).removeData("stop");var pop='<span id="_'+ids+'_c" style="position: absolute; left: 50%; top: 0; z-index: 1; width: 0; height: 0; border: 0 none; padding: 0; visibility: hidden;">			<span style="position: absolute; left: 0; top: 0; width: auto; height: 0; margin: -20px 0 0; border: 0 none; padding: 0; background-color: transparent; font-size: 0; line-height: 0;">				<span style="display: block; position: relative; left: -50%; top: 0; width: 329px; height: 115px; margin: -144px 0 0; border-style: solid; border-width: 1px; border-color: #C7CCD5 #939CA9 #939CA9 #C7CCD5; padding: 12px 0 46px; background: url(/img/commun/main/grids/background.png?v=1542113958) repeat-x scroll center 116% #FFFFFF; color: #000000; font-size: 12px; line-height: normal; vertical-align: baseline; font-weight: normal; box-shadow: 1px 2px 3px #9F9F9F; border-radius: 12px; text-align: left; text-shadow: none; text-transform: none; visibility: visible; cursor: default;">					<span style="overflow: auto; display: block; position: relative; left:0; top: 0; width: auto; height: 150px; margin: 0 16px; border-style: solid; border-width: 0px; border-color: #939CA9 #C7CCD5 #C7CCD5 #939CA9; padding: 6px 12px; background: none repeat-y scroll -1874px 0 transparent; color: #373737; font-size: 12px; line-height: normal; vertical-align: baseline; font-weight: bold; border-radius: 0; text-shadow: none; text-transform: none; visibility: visible; cursor: default;" >'+msg+'			</span>					<span style="position: absolute; left: 0; bottom:0; padding: 0 0 10px; width: 100%; height: auto; cursor: default; text-align: center;">						<span style="display: inline; position: static; padding: 0 4px 0 0; height: auto; cursor: default;">'+yes+'</span>						<span style="display: inline; position: static; padding: 0 0 0 4px; height: auto; cursor: default;">'+no+'</span>					</span>					<span style="position: absolute; left: 0; cursor: default; margin: 0; padding: 0; height: 13px; top: 100%; width: 100%;">';for(var cpt=36;cpt>=0;cpt=cpt-4){pop+='<span style="display:block; position: relative; left: 0; top: 0; cursor: default; padding: 1px 0 0; height: 0; overflow: hidden; margin: 0 auto; width: '+cpt+'px; border-style: solid; border-width: 0 1px; border-color: #C7CCD5 #939CA9 #939CA9 #C7CCD5; background-color: #FFFFFF; box-shadow: 1px 2px 2px #9F9F9F;"></span>'}pop+="</span>				</span>			</span>		</span>";$(_this).data("ids",ids);$(_this).parent("*").append(pop);$("#_"+ids+"_y").click(function(){$("#_"+ids+"_c").remove();$(_this).removeData("ids");$(_this).data("stop",false);_func.call(_this)});$("#_"+ids+"_n").click(function(){$("#_"+ids+"_c").remove();$(_this).removeData("ids");$(_this).data("stop",true);_func.call(_this)});return false}function confirm_pop(_this,_func,msg,no,yes){var ids=$(_this).data("ids")||+new Date();if($("#content_ff").exists()){no_js_action="highlight_ff_selector();"}else{no_js_action="void(0);"}yes='<span style="display: inline; position: static; background: url(/img/commun/color/tangerine/button.png) no-repeat scroll right 1px transparent; font-family: Arial,verdana,Helvetica,sans-serif; font-size: 12px; line-height: 27px; margin-left: 12px; padding: 6px 0 7px; height: auto; *padding: 0; zoom:1;"><span style="display: inline; background: url(/img/commun/color/tangerine/button.png?v=1542113958) no-repeat scroll left -26px transparent; color: #FFFFFF; font-weight: bold; left: -12px; margin: 0; padding: 6px 0 7px; height: auto; *padding: 0; zoom:1; position: relative; font-family: Arial,verdana,Helvetica,sans-serif; font-size: 12px; line-height: 27px;"><input style="background-color: transparent; border: 0 none; clear: both; color: #FFFFFF; cursor: pointer; display: inline-block; font-size: 11px; font-weight: bold; height: 27px; left: 6px; margin: 0; padding: 0 12px; position: relative; text-shadow: 1px 1px 0 rgba(0, 0, 0, 0.333); text-transform: lowercase; vertical-align: baseline; width: auto;" type="submit" id="_'+ids+'_y" value="'+(yes||_lang.Oui)+'"/></span></span>';no='<a href="javascript:'+no_js_action+'" style="background-color: transparent; border: 0 none; color: #4F4F4F; cursor: pointer; display: inline-block; font-size: 11px; font-weight: bold; height: auto; margin: 0; padding: 0; position: static; text-shadow: none; vertical-align: baseline; width: auto; text-decoration: underline;" id="_'+ids+'_n" >&laquo; '+(no||_lang.Non)+"</a>";$("#_"+ids+"_c").remove();$(_this).removeData("ids");$(_this).removeData("stop");var pop='<span id="_'+ids+'_c" style="position: absolute; left: 50%; top: 0; z-index: 1; width: 0; height: 0; border: 0 none; padding: 0; visibility: hidden;">			<span style="position: absolute; left: 0; top: 0; width: auto; height: 0; margin: -20px 0 0; border: 0 none; padding: 0; background-color: transparent; font-size: 0; line-height: 0;">				<span style="display: block; position: relative; left: -50%; top: 0; width: 329px; height: 92px; margin: 4px 0 0; border-style: solid; border-width: 1px; border-color: #C7CCD5 #939CA9 #939CA9 #C7CCD5; padding: 12px 0 46px; background: url(/img/commun/main/grids/background.png?v=1542113958) repeat-x scroll center 116% #FFFFFF; color: #000000; font-size: 12px; line-height: normal; vertical-align: baseline; font-weight: normal; box-shadow: 1px 2px 3px #9F9F9F; border-radius: 12px; text-align: left; text-shadow: none; text-transform: none; visibility: visible; cursor: default;">					<span style="overflow: auto; display: block; position: relative; left:0; top: 0; width: auto; height: 80px; margin: 0 16px; border-style: solid; border-width: 0px; border-color: #939CA9 #C7CCD5 #C7CCD5 #939CA9; padding: 6px 12px; background: none repeat-y scroll -1874px 0 transparent; color: #373737; font-size: 12px; line-height: normal; vertical-align: baseline; font-weight: bold; border-radius: 0; text-shadow: none; text-transform: none; visibility: visible; cursor: default;" >'+msg+'			</span>					<span style="position: absolute; left: 0; bottom:0; padding: 0 0 10px; width: 100%; height: auto; cursor: default; text-align: center;">						<span style="display: inline; position: static; padding: 0 4px 0 0; height: auto; cursor: default;">'+no+'</span>						<span style="display: inline; position: static; padding: 0 0 0 4px; height: auto; cursor: default;">'+yes+'</span>					</span>					<span style="position: absolute; left: 0; cursor: default; margin: 0; padding: 0; height: 13px; top: 100%; width: 100%;">';for(var cpt=36;cpt>=0;cpt=cpt-4){pop+='<span style="display:block; position: relative; left: 0; top: 0; cursor: default; padding: 1px 0 0; height: 0; overflow: hidden; margin: 0 auto; width: '+cpt+'px; border-style: solid; border-width: 0 1px; border-color: #C7CCD5 #939CA9 #939CA9 #C7CCD5; background-color: #FFFFFF; box-shadow: 1px 2px 2px #9F9F9F;"></span>'}pop+="</span>				</span>			</span>		</span>";$(_this).data("ids",ids);$(_this).parent("*").append(pop);$("#_"+ids+"_y").click(function(){$("#_"+ids+"_c").remove();$(_this).removeData("ids");$(_this).data("stop",false);_func.call(_this)});$("#_"+ids+"_n").click(function(){$("#_"+ids+"_c").remove();$(_this).removeData("ids");$(_this).data("stop",true);_func.call(_this)});return false}function addToCartFunction(){var html_img,html_desc,html_dref,html_price,html_price_slow,html_price_fast,html_stock,html_pnfo,html_qte_alert,cpt_rebour,cpt_rebour_affichage,html_brand,msg_pop,ref=$(this).attr("id");var qte_pas_force=1;try{var tmpnr=null;tmpnr=ref.split("*")[0];window.ktypenr=tmpnr>0?tmpnr:null}catch(e){window.ktypenr=null}if(ktypenr==null){msg_pop=_lang.veh_selec_check}else{if($(this).hasClass("_add_checked")){msg_pop=_lang.veh_selec_checked}}if(is_str(msg_pop)&&$(this).hasClass("_type_v")){if($(this).data("stop")==undefined){confirm_pop(this,arguments.callee,msg_pop,((ktypenr==null)?_lang.Non_selec_v:null),null);return false}else{var _ok=!$(this).data("stop");$(this).removeData("stop");if(!_ok){if(ktypenr==null){if(__STAGE__=="/eqgeneriqueserie"){$("form#fs_modal").append('<input type="hidden" id="fs_modal_refarticle" value="'+$(this).closest('div[class^="cadre"]').find(".produit_header a").attr("href")+'" />')}$('a[class^="_modal_select_v"]').click()}return false}}}else{if($(this).hasClass("_add_dispo_a_verifier")){if($(this).data("stop")==undefined){confirm_pop_promesse(this,arguments.callee,_lang.dispo_a_verifier,null,null);return false}else{var _ok=!$(this).data("stop");$(this).removeData("stop");if(!_ok){return false}}}else{if($(this).hasClass("_add_qte_pas_multi")){if($(this).data("stop")==undefined){var multi=$(this).attr("id").split("*");var qte_multi=multi[2];confirm_pop(this,arguments.callee,_lang.veh_selec_multi.replace(/%s/g,qte_multi),null,null);return false}else{var _ok=!$(this).data("stop");$(this).removeData("stop");if(!_ok){return false}}}}}var tmpItem=$(this).attr("id").split("*");if(tmpItem.length>3){var item=$(document.getElementById(tmpItem[0]+"*"+tmpItem[1]+"*"+tmpItem[2]))}else{var item=$(this)}if(item.data("dlpmpi")){push_data_layer_mpi_j0()}if(item.hasClass("_article")){html_img=item.closest("div.article").find("div.article_col_left img._mainImage").attr("src");html_desc=item.closest("div.article").find("div.article_header_name").text();html_dref=item.closest("div.article").find("div.article_header_marqueref").text();html_qte_alert=item.closest("div.article").find("div.produit_qte_force_alert").text();html_stock=item.closest("div.article").find("div.produit_header_etat_stock").text();if(item.closest("div.article").find("span.prix_alt").hasClass("disp_b")){html_price="£"+item.closest("div.article").find("span.prix_alt").html().trim().split("£")[1];if(item.closest("div.article").find("span.prix_alt").data("slowprice")){html_price_slow="£"+item.closest("div.article").find("span.prix_alt").data("slowprice").split("£")[1];html_price_fast="£"+item.closest("div.article").find("span.prix_alt").data("fastprice").split("£")[1]}}else{if(item.closest("div.article").find("span.prix_img").hasClass("disp_b")){html_price=item.closest("div.article").find("span.prix_img").html().trim();html_price_slow=item.closest("div.article").find("span.prix_img").data("slowprice");html_price_fast=item.closest("div.article").find("span.prix_img").data("fastprice")}else{html_price=item.closest("div.article").find("span.prix").html().trim();html_price_slow=item.closest("div.article").find("span.prix").data("slowprice");html_price_fast=item.closest("div.article").find("span.prix").data("fastprice")}}html_pnfo=item.closest("div.article").find("span.pnfo").text();html_brand=item.closest("div.article").find("span._equipementier").text();qte_pas_force=item.closest("div.article").find(".qte_pas_force").val()}else{if($(this).hasClass("_produits")){if($("#_modal_marketplace").length){$("#_modal_marketplace").find('a[class~="_ajout_panier"]').addClass("_produits")}html_img=item.closest("div.produit").find("div.produit_visuel img._mainImage").attr("src");html_desc=item.closest("div.produit").find("div.produit_header_name").text();html_dref=item.closest("div.produit").find("div.produit_header_marqueref").text();html_qte_alert=item.closest("div.produit").find("div.produit_qte_force_alert").text();html_stock=item.closest("div.produit").find("div.produit_header_etat_stock").text();if(item.closest("div.produit").find("span.prix_alt").hasClass("disp_b")){html_price="£"+item.closest("div.produit_col").find("span.prix_alt").html().trim().split("£")[1];if(item.closest("div.produit_col").find("span.prix_alt").data("slowprice")){html_price_slow="£"+item.closest("div.produit_col").find("span.prix_alt").data("slowprice").split("£")[1];html_price_fast="£"+item.closest("div.produit_col").find("span.prix_alt").data("fastprice").split("£")[1]}}else{if(item.closest("div.produit").find("span.prix_img").hasClass("disp_b")){html_price=item.closest("div.produit").find("span.prix_img").html().trim();html_price_slow=item.closest("div.produit").find("span.prix_img").data("slowprice");html_price_fast=item.closest("div.produit").find("span.prix_img").data("fastprice")}else{html_price=item.closest("div.produit").find("span.prix").html().trim();html_price_slow=item.closest("div.produit").find("span.prix").data("slowprice");html_price_fast=item.closest("div.produit").find("span.prix").data("fastprice")}}html_pnfo=item.closest("div.produit").find("span.pnfo").text();html_brand=item.closest("div.produit").find("span.equipementier").find("span").text();qte_pas_force=item.closest("div.produit").find(".qte_pas_force").val()}else{if(item.hasClass("_produits_col")){if($("#_modal_marketplace").length){$("#_modal_marketplace").find('a[class~="_ajout_panier"]').addClass("_produits_col")}html_img=item.closest("div.produit_col").find("div.produit_visuel img._mainImage").attr("src");html_desc=item.closest("div.produit_col").find("div.produit_header_name").text();html_dref=item.closest("div.produit_col").find("div.produit_header_marqueref").text();html_qte_alert=item.closest("div.produit_col").find("div.produit_qte_force_alert").text();html_stock=item.closest("div.produit_col").find("div.produit_header_etat_stock").text();if(item.closest("div.produit_col").find("span.prix_alt").hasClass("disp_b")){html_price="£"+item.closest("div.produit_col").find("span.prix_alt").html().trim().split("£")[1];if(item.closest("div.produit_col").find("span.prix_alt").data("slowprice")){html_price_slow="£"+item.closest("div.produit_col").find("span.prix_alt").data("slowprice").split("£")[1];html_price_fast="£"+item.closest("div.produit_col").find("span.prix_alt").data("fastprice").split("£")[1]}}else{if(item.closest("div.produit_col").find("span.prix_img").hasClass("disp_b")){html_price=item.closest("div.produit_col").find("span.prix_img").html().trim();html_price_slow=item.closest("div.produit_col").find("span.prix_img").data("slowprice");html_price_fast=item.closest("div.produit_col").find("span.prix_img").data("fastprice")}else{html_price=item.closest("div.produit_col").find("span.prix").html().trim();html_price_slow=item.closest("div.produit_col").find("span.prix").data("slowprice");html_price_fast=item.closest("div.produit_col").find("span.prix").data("fastprice")}}html_pnfo=item.closest("div.produit_col").find("span.pnfo").text();html_brand=item.closest("div.produit_col").find("span.equipementier").find("span").text();qte_pas_force=item.closest("div.produit_col").find(".qte_pas_force").val()}}}if($(this).hasClass("_voir_les_offres")){var action="voir_offres"}else{var action="add_article"}if(item.data("rebour")){cpt_rebour=item.data("rebour")}var html_price_datalayer=html_price.replace(/&nbsp;/gi," ").replace(/<([^>]+?)([^>]*?)>(.*?)<\/\1>/ig,"");var price_datalayer=Number(html_price_datalayer.replace(/[^0-9\.-]+/g,""));var references_article=ref.split("*");var qte_dl=references_article[2].trim()*qte_pas_force;var category=dataLayer[0]["product_category"];$("input#ref_article").attr("value",references_article[1]);if(action!="voir_offres"){$("#quantitePanier").removeClass("disp_n");var p={name:html_desc.trim(),id:references_article[1].trim(),price:price_datalayer.toString(),brand:html_brand,category:category,quantity:qte_dl.toString()};push_data_layer_product("add",html_desc.trim(),p)}if(__TYPE_PAGE__=="listeproduit"||__STAGE__=="/eqgeneriqueserie"||__STAGE__=="/dimensions"){var attrClass=$(this).parents().find("div.produit").attr("class").split(" ")[4];var id_gen=attrClass.split("_")[2];$.ajax({async:false,type:"POST",url:__AJAX__+"_addselling.php",data:"ref_article="+references_article[1]+"&id_gen="+id_gen+"&country="+__COUNTRY__,success:function(msg){$("#containeraddsell").html(msg)}})}var ajaxCookie=__AJAX__+"majCookieCrossBasket.php";var post={data:{c:"addAds",r:references_article[1]}};$.post(ajaxCookie,post);updateSessionHorsPanier(ref,action,false,{img:html_img,cpt_rebour:cpt_rebour,cpt_rebour_affichage:cpt_rebour_affichage,desc:html_desc,dref:html_dref,stock:html_stock,price:html_price,price_slow:html_price_slow,price_fast:html_price_fast,pnfo:html_pnfo,qte_force_alert:html_qte_alert},ref.split("*")[2]);$.ajax({async:false,type:"POST",url:__AJAX__+"afficher_infos_ope.php",data:"",success:function(infos){$(".frame_modal #afficher_infos_ope").html(infos)}});return false}$("a._ajout_panier").click(addToCartFunction);$("._ajouter_panier_addselling_turbos").click(function(){var MyArray=$(".reference_addselling_turbo:checked");MyArray.each(function(index,value){tooltip.panier.show("none",$(value).attr("id"),"add_article")});return true});$(".ajout_panier_nothickbox").click(function(){var ref=$(this).attr("id");updateSession(ref,"add_article",false,ref.split("*")[2])});$("input._updateQte").click(function(){if($(this).parent().hasClass("_active")){var action;var recalculate;var redirectToEmptyCart=false;var ref=$(this).val();var references=ref.split("*");var qte_pas=parseInt(references[2]);var value=$("[class="+ref+"]").val();if($(this).hasClass("plus")){action="add_article";recalculate=parseInt(value)+qte_pas;if(recalculate>=99){recalculate=99-(99%qte_pas)}}else{action="del_article";recalculate=parseInt(value)-qte_pas;if(recalculate<=qte_pas){recalculate=qte_pas}}$("[class="+ref+"]").attr("value",recalculate);if(newsprice(ref,recalculate,value)=="refresh"){redirectToEmptyCart=true}updateSession(ref,action,redirectToEmptyCart,qte_pas)}});$("input.corbeille").click(function(){if($(this).parent().hasClass("_active")){var value=$(this).val();var i=value.split("*");var id=i["0"];var prixt=$("td [class*=prixt-"+value+"]").html();var prixtConsigne=$("td [class*=prixt-CONSIGNE-"+value+"]").html();if(prixtConsigne==null){prixtConsigne=0}prixt=parse_prx(prixt);prixtConsigne=parse_prx(prixtConsigne);var l=$("[class*=tr-"+id+"]").length;var nbElemeToDelete=$("[class*=tr-"+value+"]").length;var row=parseInt(l)-nbElemeToDelete;var c=$("[class*=tr-"+value+"] td").length;var nbC=6;if($(this).hasClass("_has_consigne")){nbC=11}var tdfirst=$("[class*=tr-"+id+"] td:first").html();if(row<1){row=1}var redirectToEmptyCart=false;if($("#contenupanier tr.groupe td.operation input[class*=corbeille_active]").length==1){redirectToEmptyCart=true}else{$("[class=groupe tr-"+id+" tr-"+value+"]").remove();if(c==nbC&&(l>1||(l-1==1))){$("[class*=tr-"+id+"] td:first").before("<td class='vehicule'>"+tdfirst+"</tr>")}$("[class*=tr-"+id+"] td:first").attr("rowspan",row);var prixtotal=parse_prx($("[class=prixtt]").html());var prixfinal=prixtotal-prixt-prixtConsigne;prixfinal=prixfinal.toFixed(2);$("[class=prixtt]").html(_PRX(prixfinal))}updateSession(value,"corbeille",redirectToEmptyCart,1);if($("#contenupanier #bloc_promo").length){window.location.href=$("[name=formcodepromo]").attr("action")}if($("#contenupanier #bloc_promo_val").length){window.location.href=$("[name=formcodepromo]").attr("action")}if($("#progressbar").length){progressebar(parse_prx($("[class=prixtt]").html()))}}});$("input.corbeille_codepromo").click(function(){$("#formcodepromo").submit()});progressebar=function(prixfinal){$.ajax({type:"POST",url:__AJAX__+"mon_panier-livraison-gratuite.php",success:function(msg){$("#livraison_gratuite .texte").load(__AJAX__+"mon_panier-livraison-gratuite.php").fadeIn("callback",function(){var ratio=$("[class=ratio]").html();var pourcent=parseFloat(prixfinal)*ratio;if(pourcent<=100){$("#progressbar").progressBar(pourcent)}else{$("#progressbar").progressBar(100)}})}})};$(".del").click(function(){var nb_adresses=$.find("._adresse").length;var current_adress=$(this).parents("._adresse").filter(":first");var id_current_adress=current_adress.attr("id").substring(8);var flagme=false;if(nb_adresses>=2){current_adress.remove();var first_adress=$("._adresse").first();first_adress.find("input:radio").attr("checked","checked");if(nb_adresses==2){first_adress.find("a.del").remove()}$.ajax({type:"POST",url:__AJAX__+"mon_panier-adresse.php",data:"id="+id_current_adress+"&action=del",success:function(msg){}});$.ajax({type:"POST",url:__AJAX__+"mon_panier-adresse.php",data:"id="+first_adress.attr("id").substring(8)+"&action=choix",success:function(msg){$("#container [class=mode]").fadeOut("slow",function(){});$("#container").load(__AJAX__+"mon_panier-livraison.php").fadeIn("slow")}})}else{}});$("input[type=radio][name=adresse]").click(function(){$.ajax({type:"POST",url:__AJAX__+"mon_panier-adresse.php",data:"id="+$(this).val()+"&action=choix",success:function(msg){$("#container div.middle").height($("#container div.middle").height());$("#container [class=mode]").fadeOut("slow",function(){});$("#container").load(__AJAX__+"mon_panier-livraison.php").fadeIn("slow")}})});$("a.paiementpanier").click(function(){var $cb=$("input[type=checkbox][class*=conditiongeneralvente]");var $cgvklarna=$("input[type=checkbox][class*=conditiongeneralventeklarna]");var $cgvbillpay=$("input[type=checkbox][class*=conditiongeneralventebillpay]");if($cb.length&&$(this).parents().hasClass("next")&&!$(this).parents().hasClass("disabled")){if(!$cb.is(":checked")){$.validationEngine.buildPromptLarge($cb,_lang["accept-cgv-error"],"error");return false}else{if(($cgvklarna.length&&$cgvklarna.is(":visible")&&!$cgvklarna.is(":checked"))){$.validationEngine.buildPromptLarge($cgvklarna,_lang["accept-cgv-klarna-error"],"error");return false}else{if(($cgvbillpay.length&&$cgvbillpay.is(":visible")&&!$cgvbillpay.is(":checked"))){$.validationEngine.buildPromptLarge($cgvbillpay,_lang["accept-cgv-klarna-error"],"error");return false}else{var mode_paiement=$('#panier_paiment input[type="radio"][name="d"]:checked').parent("span")[0].className.replace(/[\s\S]*?pp_([\S]+)[\s\S]*/gi,function(){return arguments[1]}).toUpperCase();if(mode_paiement.indexOf("BILLPAY")>=0&&$("#b_identifier_billpay").length>0){var input_billpay=$("#b_identifier_billpay");if(input_billpay.val()==""){alert(_lang.id_klarna_invalide);return false}else{var reussi=false;$.fancybox.showActivity();$.ajax({type:"POST",async:false,url:__AJAX__+"billpay_maj.php",data:"billpay_date_naissance="+input_billpay.val(),success:function(msg){$.fancybox.hideActivity();if(msg=="true"){thickboxgenerercommande();reussi=true}else{alert(_lang.id_klarna_invalide)}return false}});if(reussi){return true}else{return false}}}if(mode_paiement.indexOf("KLARNA")>=0&&($("#b_identifier_klarna").length>0||$("#b_identifier_klarna_account").length>0)){if(mode_paiement.indexOf("KLARNA_ACCOUNT")>=0){var input_klarna=$("#b_identifier_klarna_account")}else{var input_klarna=$("#b_identifier_klarna")}if(input_klarna.val()==""){alert(_lang.id_klarna_invalide);return false}else{var reussi=false;$.fancybox.showActivity();$.ajax({type:"POST",async:false,url:__AJAX__+"klarna-commande.php",data:"id_client_klarna="+input_klarna.val(),success:function(msg){$.fancybox.hideActivity();try{var arrayOfObjects=eval(msg)}catch(e){var arrayOfObjects=null}if(arrayOfObjects&&arrayOfObjects.length){var html='<div class="_content_adress_klarna"><center><table cellspacing="10">';for(var i=0;i<arrayOfObjects.length;i++){if(i==0){var selected='checked="checked"'}else{var selected=""}if(arrayOfObjects[i].civilite!==undefined){html+='<tr><td valign="middle"><input type="radio" '+selected+' name="adress_klarna" value="?action=update_adress_klarna&livr_civilite='+arrayOfObjects[i].civilite+"&livr_nom="+arrayOfObjects[i].nom+"&livr_prenom="+arrayOfObjects[i].prenom+"&livr_adresse1="+arrayOfObjects[i].adresse1+"&livr_cp="+arrayOfObjects[i].cp+"&livr_ville="+arrayOfObjects[i].ville+'"></td><td valign="middle" align="left">';html+=arrayOfObjects[i].civilite+" "+arrayOfObjects[i].nom+" "+arrayOfObjects[i].prenom+"<br>"}else{html+='<tr><td valign="middle"><input type="radio" '+selected+' name="adress_klarna" value="?action=update_adress_klarna&livr_nom='+arrayOfObjects[i].nom+"&livr_prenom="+arrayOfObjects[i].prenom+"&livr_adresse1="+arrayOfObjects[i].adresse1+"&livr_cp="+arrayOfObjects[i].cp+"&livr_ville="+arrayOfObjects[i].ville+'"></td><td valign="middle" align="left">';html+=arrayOfObjects[i].nom+" "+arrayOfObjects[i].prenom+"<br>"}html+=arrayOfObjects[i].adresse1+"<br>";html+=arrayOfObjects[i].cp+" "+arrayOfObjects[i].ville+"";html+="</td></tr>"}html+="</table></center></div>";open_thickbox("klarna_adresses");$("._content_adress_klarna").remove();$("._content_modal").html($("._content_modal").html()+html);var href=$("._target_link1").attr("href");$("._target_link1").attr("href","javascript:;");$("._target_link1").click(function(){$("._target_link1").attr("href",$("input[name=adress_klarna]:checked").val())})}else{if(msg=="true"){thickboxgenerercommande();reussi=true}else{if(msg=="error_klarna"){alert(_lang.klarna_error)}else{alert(_lang.id_klarna_invalide)}}}return false}});if(reussi){return true}else{return false}}}if($("div#modal_payment_"+mode_paiement).length){var link_redirect=$(this).attr("href");var cb_redirect=function(){thickboxgenerercommande();window.location=link_redirect};$.fancybox({padding:0,margin:0,showCloseButton:false,scrolling:"no",titleshow:false,content:$("div#modal_payment_"+mode_paiement).html(),onClosed:function(){cb_redirect()},onComplete:function(){$("._modal_close").click(function(){$.fancybox.close()});setTimeout(cb_redirect,4*1000)}});return false}else{thickboxgenerercommande()}}}}}});$("._info_supp_cr").live("click",function(){openmodal("paiement_cr_infos")});$("._info_supp_colisprive").live("click",function(){openmodal("colis_prive_infos")});$("._info_supp_klarna").live("click",function(){if($("div#paiement_klarna_infos").length){openmodal("paiement_klarna_infos")}});var thickboxcgv=function(e){openmodal("avertissement_cgv",e)};var thickboxgenerercommande=function(){var htmlPopup=$("#modal_waiting").html();$.fancybox({padding:0,margin:0,modal:true,showCloseButton:false,scrolling:"no",titleshow:false,content:htmlPopup,onComplete:function(){}})};$(".consultation_cgv").click(function(){thickboxcgv(this);return false});if($("#modal_paiementlivr").length){$(".infopaiementlivr").click(function(){openmodal("modal_paiementlivr",this)})}if($("#progressbar").length){var prixtotal=parse_prx($("[class=prixtt]").html());if(isNaN(prixtotal)){var prixtotal=0}progressebar(prixtotal)}if($("#modal_marketing").length){openmodal("modal_marketing",this)}$("._afficher_assurance_retour").click(function(){openmodal("assurance_retour_infos",this)});$("._modifier_assurance_retour").click(function(){var action;if($(this).attr("checked")==false){action="false"}else{action="true"}showFancyboxWaiting();window.document.location=$("input#url_action").val()+action+"#"+window.pageYOffset});$("#no_user").change(function(){var id_user=$(this).val();var url=$("[class=next]").children().children().children().attr("href");var url=url.split("?");var new_url=url[0]+"?id_user="+id_user;$("[class=next]").children().children().children().attr("href",new_url)});$(".bonachat").change(function(){redirectToEmptyCart=false;$.ajax({type:"POST",url:__AJAX__+"mon_panier-bonachat.php",data:"id_ba="+$(this).val(),success:function(msg){if(redirectToEmptyCart){$(location).attr("href","./")}location.reload()}})});$(".print").click(function(){print()});$("input.retourlivraison").click(function(){var url=$("[class=urldestination]").html();window.location.href=url});$(".utilisationcodepromo").click(function(){$(".utilisationcodepromo").hide();$(".formcodepromo").attr("class","")});$(".ajoutcodepromo").click(function(){$("[name=formcodepromo]").submit()});if($("#livraison_information").length>0){open_thickbox("livraison_information")}if($("input[name='modelivraisonn']:checked").val()=="relai"){if($("#_modal_relai").hasClass("_show_relai")){open_thickbox("_modal_relai")}}if($("input[name='modelivraisonn']:checked").val()=="relai24"){if($("#_modal_relai24").hasClass("_show_relai")){open_thickbox("_modal_relai24")}}if($("input[name='modelivraisonn']:checked").val()=="relai-correos"){if($("#_modal_relai-correos").hasClass("_show_relai")){open_thickbox("_modal_relai-correos")}}if($("input[name='modelivraisonn']:checked").val()=="relai-postnord"){if($("#_modal_relai-postnord").hasClass("_show_relai")){open_thickbox("_modal_relai-postnord")}}if($("input[name='modelivraisonn']:checked").val()=="relai-ma"){if($("#_modal_relai-ma").hasClass("_show_relai")){open_thickbox("_modal_relai-ma")}}if($(".ref_cadeau").find("input[type=radio]:checked")){if($(".ref_cadeau").find("input[type=radio]:checked").parent().parent().attr("id")!=undefined){$("#ref_cadeau").val($(".ref_cadeau").find("input[type=radio]:checked").parent().parent().attr("id"))}}$(".ref_cadeau").not(".no_stock").click(function(){$(this).find("input[type=radio]").attr("checked","checked");$("#ref_cadeau").val($(this).attr("id"));$(".ref_cadeau").removeClass("borderHighlight");$(this).addClass("borderHighlight")})});var modedelivraison=function(b){if(b!="24"&&b!="48"&&b!="relai"&&b!="relai-proximite"&&b!="relai24"&&b!="relai-correos"&&b!="relai-postnord"&&b!="relai-ma"&&b!="pointretrait"&&b!="paiementlivraison"&&b!="72"){b="48"}if(b!="paiementlivraison"){if($(".optionpaiementlivr input[name=modelivraisonn]").length){$(".optionpaiementlivr input[name=modelivraisonn]").attr("checked",false)}}if(b=="paiementlivraison"){if($(".optionpaiementlivr input[name=modelivraisonn]").length){if($(".optionpaiementlivr input[name=modelivraisonn]").is(":checked")==false){b="48"}if($(".optionpaiementlivr input[name=modelivraisonn]").is(":checked")==true){$("input:radio[class=livraisonrapide48]").attr("checked",true);$(".optionpaiementlivr input[name=modelivraisonn]").attr("checked",true)}}}$.ajax({type:"POST",url:__AJAX__+"mon_panier-modelivraison.php",data:"mode="+b,success:function(c){if(b=="relai"){open_thickbox("_modal_relai")}else{if(b=="relai24"){open_thickbox("_modal_relai24")}else{if(b=="relai-correos"){open_thickbox("_modal_relai-correos")}else{if(b=="relai-postnord"){open_thickbox("_modal_relai-postnord")}else{if(b=="relai-ma"){open_thickbox("_modal_relai-ma")}}}}}}});var a=$("._adresse").find("input:radio:checked").val();if(!(a>0)){a=$("._adresse:first").find("input:radio").attr("checked","checked").val()}if(b=="relai"||b=="relai24"||b=="relai-correos"||b=="relai-postnord"||b=="relai-ma"||b=="pointretrait"){$.ajax({type:"POST",url:__AJAX__+"mon_panier-adresse.php",data:b+"=true"})}else{$.ajax({type:"POST",url:__AJAX__+"mon_panier-adresse.php",data:"id="+a+"&action=choix",success:function(c){}})}};function tcd_callback(a){switch(a.tcd.t){case"paiement":switch(a.tcd.c){case"del":break;case"add":break;case"see":break;default:break}break;default:break}if(is_str(a.loc)){location=a.loc}}function change_ref_cadeau(a){a.find("input[type=radio]").attr("checked","checked");$("#ref_cadeau").val($(".ref_cadeau").find("input[type=radio]:checked").parent().parent().attr("id"));$(".ref_cadeau").removeClass("borderHighlight");a.addClass("borderHighlight")}$(document).ready(function(){var d=[];var b=null;if($("input#autocomplete_b_search_engine_example_values").length){var i=$("input#autocomplete_b_search_engine_example_values").val().split("|");var a=3000;var h=i.length;if(h>1){$("input#autocomplete_b_search_engine").val(_lang.exemple+i[0])}else{$("input#autocomplete_b_search_engine").val("")}var g=0;var b=setInterval(function(){if(g==h-1){g=0}else{g++}if(h>1){$("input#autocomplete_b_search_engine").val(_lang.exemple+i[g])}},a)}if(typeof search_data!="undefined"){$.each(search_data,function(j,k){d.push({text:k.libelle,link:k.url,type:k.type,type_item:k.type_item,ids_enfants:k.ids_enfants,weight:k.weight,noshow:k.noshow,libelle_ok:k.libelle_ok})});c(d)}$("._trigger_autocomplete").click(function(){if($("input#autocomplete_b_search_engine").val().indexOf(_lang.exemple)==0){$("input#autocomplete_b_search_engine").val("");clearInterval(b)}f()});$("._clear_autocomplete").click(function(){$("input#autocomplete_b_search_engine").val("").focus();clearInterval(b)});function f(){var t=false;var u=[];var j=$.trim($("input#autocomplete_b_search_engine").val()).toLowerCase();if(!t){try{if($.md5(j)!=__VARCN__){var k=search_data_selected.length;if(k==1&&search_data_selected[0].value==""){if(__TYPE_PAGE__=="cataloguevehicule"){recordOutboundEventFull("[Clicks sur catalogue v4]","Utilisation mdr","Click_bouton | no_result",__GOOGLE_ANALYTICS__)}}else{if(__TYPE_PAGE__=="cataloguevehicule"){recordOutboundEventFull("[Clicks sur catalogue v4]","Utilisation mdr","Click_bouton | result",__GOOGLE_ANALYTICS__)}}}}catch(p){}u=search_data_selected;var r=20;var s=u.length;var o="false";var n=u.slice(0,r);var m=[];var l=(($(".raw_category").length));if(s>0){m=$.toJSON(n)}if(s>r){o="true"}var v=0;if($("input#type_produit").val()=="vehicule"){v=ktypenr}$.ajax({type:"POST",data:"JSON",url:__AJAX__+"select-search.php",data:"params="+m+"&q="+j+"&overflow="+o+"&limit="+r+"&ktypenr="+v,success:function(q){$.fancybox({padding:0,margin:0,showCloseButton:false,scrolling:"no",titleshow:false,content:q,onComplete:function(){$("._modal_close").click(function(){$.fancybox.close()});$("a._modal_waiting").click(function(){if($(this).attr("href")){var w=$(this).attr("href").split("#");var x="autre";if($(this).hasClass("_is_article")){x="article"}else{if($(this).hasClass("_is_generique")){x="generique"}else{if($(this).hasClass("_is_famille")){x="famille"}else{if($(this).hasClass("_is_categorie")){x="categorie"}}}}if(__TYPE_PAGE__=="cataloguevehicule"){recordOutboundEventFull("[Clicks sur catalogue v4]","Utilisation mdr","Click_suggestion | "+x,__GOOGLE_ANALYTICS__)}if(w[1]){blocat.slide.anchor(w[1]);if(l){$.fancybox.close();return false}}showFancyboxWaiting()}})}})}})}}function c(l){var j=true;var m={text:_lang.no_result,link:""};var k=_lang.approximated_search;$("input#autocomplete_b_search_engine").autocomplete(l,{width:0,max:20,minChars:1,matchContains:true,noResult:true,selectFirst:false,nbClicFocus:1,approximatedSearch:k,noResultValues:m,formatItem:function(n){return n.text}}).result(function(n,p,o){if(p.link){e(p);j=false}else{$(this).val("")}}).focus(function(){if($(this).val().indexOf(_lang.exemple)==0){$(this).val("");clearInterval(b)}}).blur(function(){if($(this).val()==""){}else{if(j){}}}).bind("keypress",function(o){var n=(o.keyCode?o.keyCode:o.which);if(n==13){$(".ac_results").hide();f()}})}function e(l){var k=ktypenr;if(l.type_item=="boutique"){k=""}if(l.type=="famille"){$.ajax({type:"POST",url:__AJAX__+"select-generique.php",data:"ids="+l.ids_enfants+"&ktypenr="+k,success:function(m){$.fancybox({padding:0,margin:0,showCloseButton:false,scrolling:"no",titleshow:false,content:m,onComplete:function(){$("._modal_close").click(function(){$.fancybox.close()});$("a._modal_waiting").click(function(){showFancyboxWaiting()})}})}})}else{if(l.type=="categorie"&&__TYPE_PAGE__=="cataloguevehicule"){if(__TYPE_PAGE__=="cataloguevehicule"){recordOutboundEventFull("[Clicks sur catalogue v4]","Utilisation mdr","Click_suggestion | "+l.type,__GOOGLE_ANALYTICS__)}var j=l.link.split("#")[1];blocat.slide.anchor(j)}else{window.location.href=l.link;showFancyboxWaiting()}}}});(function(a){a.fn.aeImageResize=function(d){var b=a(this),f=Math.floor,c=a.browser,h=c.msie&&(parseInt(c.version)==6),e=0,g=a.extend({height:0,width:0},d);if(!g.height&&!g.width){return b}if(g.height&&g.width){e=g.width/g.height}return b.one("load",function(){a(this).removeAttr("height").removeAttr("width").css({height:"",width:""});var i=this.height,j=this.width,m=j/i,k=g.height,l=g.width,n=e;if(!n){if(k===0){n=m-1}else{n=m+1}}if((k&&i>k)||(l&&j>l)){if(m>e){k=f(i/j*l)}else{l=f(j/i*k)}a(this).attr({height:k,width:l})}}).each(function(){if(this.complete||h){a(this).trigger("load")}})}})(jQuery);(function(a){a.fn.extend({scale:function(d,c,b){return this.each(function(){i("jquery.scale is starting...");i('jquery.scale: Using browser "'+navigator.appName+'" version "'+navigator.appVersion+'"');var e=false;var f=false;var g=false;if(d=="center"||c=="center"||b=="center"){e=true}if(d=="stretch"||c=="stretch"||b=="stretch"){f=true}if(d=="debug"||c=="debug"||b=="debug"){g=true}var m=a(this);if(m.attr("src")&&!m.attr("jquery_scale_orig-height")){i("jquery.scale: object is an image");var j=new Date();var n=m.attr("src");var o=n;if(n.indexOf("?")!=-1){o=n.substring(0,n.indexOf("?"))}o=o+"?"+j.getTime();m.attr("src",o);i("jquery.scale: img src changed to "+o+" to force a reload");this.onload=k}else{i("jquery.scale: object is NOT an image");k()}function k(){if(!m.attr("jquery_scale_orig-height")){m.attr("jquery_scale_orig-height",m.height());m.attr("jquery_scale_orig-width",m.width());i("jquery.scale: is starting for the first time. Captured the original dimensions of "+m.width()+"x"+m.height())}else{m.height(parseInt(m.attr("jquery_scale_orig-height")));m.width(parseInt(m.attr("jquery_scale_orig-width")));i("jquery.scale: has been run before. Reset the object to its original dimensions of "+m.width()+"x"+m.height())}i("jquery.scale: BEFORE scaling, object's outer size = "+m.outerWidth()+"x"+m.outerHeight()+", object's parent's inner size = "+m.parent().width()+"x"+m.parent().height());if(m.outerHeight()>m.parent().height()&&m.outerWidth()<=m.parent().width()){i("jquery.scale: object is too tall, but width is OK");h()}else{if(m.outerWidth()>m.parent().width()&&m.outerHeight()<=m.parent().height()){i("jquery.scale: object is too wide, but height is OK");l()}else{if(m.outerWidth()<m.parent().width()&&m.outerHeight()<m.parent().height()&&f){i("jquery.scale: object is too short and skinny, and stretch option enabled");if(m.parent().height()/m.outerHeight()<=m.parent().width()/m.outerWidth()){i("jquery.scale: height is closer to being correct, or height and width are equally close to being correct");h()}else{i("jquery.scale: width is closer to being correct");l()}}else{if(m.outerWidth()>m.parent().width()&&m.outerHeight()>m.parent().height()){i("jquery.scale: object is too tall and wide");if(m.parent().height()/m.outerHeight()>m.parent().width()/m.outerWidth()){i("jquery.scale: width is closer to being correct");l()}else{i("jquery.scale: height is closer to being correct, or height and width are equally close to being correct");h()}}}}}if(e){i("jquery.scale: centering option enabled");m.css("position","relative");m.css("margin-top",m.parent().height()/2-m.outerHeight()/2);m.css("margin-left",m.parent().width()/2-m.outerWidth()/2)}this.onload=null;i("jquery.scale: AFTER scaling, object's size = "+m.outerWidth()+"x"+m.outerHeight()+", object's parent's size = "+m.parent().width()+"x"+m.parent().height()+".'")}function h(){i("jquery.scale: matching height");m.width(m.outerWidth()*m.parent().height()/m.outerHeight()-(m.outerWidth()-m.width()));m.height(m.parent().height()-(m.outerHeight()-m.height()))}function l(){i("jquery.scale: matching width");m.height(m.outerHeight()*m.parent().width()/m.outerWidth()-(m.outerHeight()-m.height()));m.width(m.parent().width()-(m.outerWidth()-m.width()))}function i(p){if(window.console&&g){console.log(p)}}})}})})(jQuery);(function(d){d.fn.jCarouselLite=function(e){e=d.extend({btnPrev:null,btnNext:null,btnGo:null,mouseWheel:false,auto:null,speed:200,easing:null,vertical:false,circular:true,visible:3,start:0,scroll:1,beforeStart:null,afterEnd:null},e||{});return this.each(function(){var n=false,l=e.vertical?"top":"left",g=e.vertical?"height":"width";var f=d(this),p=d("ul",f),i=d("li",p),t=i.size(),s=e.visible;if(e.circular){p.prepend(i.slice(t-s-1+1).clone()).append(i.slice(0,s).clone());e.start+=s}var r=d("li",p),o=r.size(),u=e.start;f.css("visibility","visible");r.css({overflow:"hidden"});p.css({margin:"0",padding:"0",position:"relative","list-style-type":"none","z-index":"1"});f.css({overflow:"hidden",position:"relative","z-index":"2",left:"0px"});var k=e.vertical?a(r):c(r);var q=k*o;var m=k*s;r.css({width:r.width(),height:r.height()});p.css(g,q+"px").css(l,-(u*k));f.css(g,m+"px");if(e.btnPrev){d(e.btnPrev).click(function(){return j(u-e.scroll)})}if(e.btnNext){d(e.btnNext).click(function(){return j(u+e.scroll)})}if(e.btnGo){d.each(e.btnGo,function(v,w){d(w).click(function(){return j(e.circular?e.visible+v:v)})})}if(e.mouseWheel&&f.mousewheel){f.mousewheel(function(v,w){return w>0?j(u-e.scroll):j(u+e.scroll)})}if(e.auto){setInterval(function(){j(u+e.scroll)},e.auto+e.speed)}function h(){return r.slice(u).slice(0,s)}function j(v){if(!n){if(e.beforeStart){e.beforeStart.call(this,h())}if(e.circular){if(v<=e.start-s-1){p.css(l,-((o-(s*2))*k)+"px");u=v==e.start-s-1?o-(s*2)-1:o-(s*2)-e.scroll}else{if(v>=o-s+1){p.css(l,-((s)*k)+"px");u=v==o-s+1?s+1:s+e.scroll}else{u=v}}}else{if(v<0||v>o-s){return}else{u=v}}n=true;p.animate(l=="left"?{left:-(u*k)}:{top:-(u*k)},e.speed,e.easing,function(){if(e.afterEnd){e.afterEnd.call(this,h())}n=false});if(!e.circular){d(e.btnPrev+","+e.btnNext).removeClass("disabled");d((u-e.scroll<0&&e.btnPrev)||(u+e.scroll>o-s&&e.btnNext)||[]).addClass("disabled")}}return false}})};function b(e,f){return parseInt(d.css(e[0],f))||0}function c(e){return e[0].offsetWidth+b(e,"marginLeft")+b(e,"marginRight")}function a(e){return e[0].offsetHeight+b(e,"marginTop")+b(e,"marginBottom")}})(jQuery);(function(c){var a=new RegExp("[^a-z0-9]","gi");c.fn.extend({autocomplete:function(e,f){var g=typeof e=="string";f=c.extend({},c.Autocompleter.defaults,{url:g?e:null,data:g?null:e,delay:g?c.Autocompleter.defaults.delay:10,max:f&&!f.scroll?10:150,noResult:false,characToExclude:["le","la","de","a","un","une","d"],unselectOnMouseOut:true,noResultValues:{},approximatedSearch:"",nbClicFocus:2},f);f.highlight=f.highlight||function(h){return h};f.formatMatch=f.formatMatch||f.formatItem;f.nbClicFocus=f.nbClicFocus-1;return this.each(function(){new c.Autocompleter(this,f)})},result:function(e){return this.bind("result",e)},search:function(e){return this.trigger("search",[e])},flushCache:function(){return this.trigger("flushCache")},setOptions:function(e){return this.trigger("setOptions",[e])},unautocomplete:function(){return this.trigger("unautocomplete")}});c.Autocompleter=function(p,j){var f={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8};var e=c(p).attr("autocomplete","off").addClass(j.inputClass);var n;var t="";var q=c.Autocompleter.Cache(j);var h=0;var y;var B={mouseDownOnSelect:false};var v=c.Autocompleter.Select(j,p,g,B);var A;c.browser.opera&&c(p.form).bind("submit.autocomplete",function(){if(A){A=false;return false}});e.bind((c.browser.opera?"keypress":"keydown")+".autocomplete",function(C){h=1;y=C.keyCode;switch(C.keyCode){case f.UP:C.preventDefault();if(v.visible()){v.prev()}else{x(0,true)}break;case f.DOWN:C.preventDefault();if(v.visible()){v.next()}else{x(0,true)}break;case f.PAGEUP:C.preventDefault();if(v.visible()){v.pageUp()}else{x(0,true)}break;case f.PAGEDOWN:C.preventDefault();if(v.visible()){v.pageDown()}else{x(0,true)}break;case j.multiple&&c.trim(j.multipleSeparator)==","&&f.COMMA:case f.TAB:case f.RETURN:if(g()){C.preventDefault();A=true;return false}break;case f.ESC:v.hide();break;default:clearTimeout(n);n=setTimeout(x,j.delay);break}}).focus(function(){h++}).blur(function(){h=0;if(!B.mouseDownOnSelect){w()}}).click(function(){if(h++>j.nbClicFocus&&!v.visible()){x(0,true)}}).bind("search",function(){var C=(arguments.length>1)?arguments[1]:null;function D(H,G){var E;if(G&&G.length){for(var F=0;F<G.length;F++){if(G[F].result.toLowerCase()==H.toLowerCase()){E=G[F];break}}}if(typeof C=="function"){C(E)}else{e.trigger("result",E&&[E.data,E.value])}}c.each(k(e.val()),function(E,F){i(F,D,D)})}).bind("flushCache",function(){q.flush()}).bind("setOptions",function(){c.extend(j,arguments[1]);if("data" in arguments[1]){q.populate()}}).bind("unautocomplete",function(){v.unbind();e.unbind();c(p.form).unbind(".autocomplete")});function g(){var F=v.selected();if(!F){return false}var C=F.result;t=C;if(j.multiple){var I=k(e.val());if(I.length>1){var E=j.multipleSeparator.length;var H=c(p).selection().start;var G,D=0;c.each(I,function(J,K){D+=K.length;if(H<=D){G=J;return false}D+=E});I[G]=C;C=I.join(j.multipleSeparator)}C+=j.multipleSeparator}e.val(C);z();e.trigger("result",[F.data,F.value]);return true}function x(E,D){if(y==f.DEL){v.hide();return}var C=e.val();if(!D&&C==t){return}t=C;C=m(C);if(C.length>=j.minChars){e.addClass(j.loadingClass);if(!j.matchCase){C=C.toLowerCase()}i(C,o,z)}else{r();v.hide()}}function k(C){if(!C){return[""]}if(!j.multiple){return[c.trim(C)]}return c.map(C.split(j.multipleSeparator),function(D){return c.trim(C).length?c.trim(D):null})}function m(C){if(!j.multiple){return C}var E=k(C);if(E.length==1){return E[0]}var D=c(p).selection().start;if(D==C.length){E=k(C)}else{E=k(C.replace(C.substring(D),""))}return E[E.length-1]}function u(C,D){if(j.autoFill&&(m(e.val()).toLowerCase()==C.toLowerCase())&&y!=f.BACKSPACE){e.val(e.val()+D.substring(m(t).length));c(p).selection(t.length,t.length+D.length)}}function w(){clearTimeout(n);n=setTimeout(z,200)}function z(){var C=v.visible();v.hide();clearTimeout(n);r();if(j.mustMatch){e.search(function(D){if(!D){if(j.multiple){var E=k(e.val()).slice(0,-1);e.val(E.join(j.multipleSeparator)+(E.length?j.multipleSeparator:""))}else{e.val("");e.trigger("result",null)}}})}}function o(D,C){if(C&&C.length&&h){r();v.display(C,D);u(D,C[0].value);v.show()}else{z()}}function l(E,D){var H=parseInt(E.data.weight);var G=E.data.link;var C=parseInt(D.data.weight);var F=D.data.link;if((C==H)){if(F<=G){return 1}else{return -1}}else{if(C<H){return -1}else{return 1}}}function i(E,I,D){if(!j.matchCase){E=E.toLowerCase()}var G=q.load(E);if(G!=null&&j.noResult&&G.length==0){G[0]={value:"",data:j.noResultValues}}var H=[];var C=[];var F=[];c.each(G,function(L,K){if(K.data.noshow){var M=clone(K);if(jQuery.inArray(serialize(K.data.libelle_ok),C)==-1){M.value=K.data.libelle_ok;H.push(M);C.push(serialize(K.data.libelle_ok))}}else{F.push(K)}});if(F.length==0&&H.length>0){G=[];c.each(H,function(L,K){c.each(K.value,function(N,M){G.push({value:M,data:{text:M,link:K.data.link}})})});G.push({value:"",data:{text:j.approximatedSearch,link:""}})}else{G=F}if(G&&G.length){G.sort(l);search_data_selected=G;I(E,G)}else{if((typeof j.url=="string")&&(j.url.length>0)){var J={timestamp:+new Date()};c.each(j.extraParams,function(K,L){J[K]=typeof L=="function"?L():L});c.ajax({mode:"abort",port:"autocomplete"+p.name,dataType:j.dataType,url:j.url,data:c.extend({q:m(E),limit:j.max},J),success:function(L){var K=j.parse&&j.parse(L)||s(L);q.add(E,K);I(E,K)}})}else{v.emptyList();D(E)}}}function s(F){var C=[];var E=F.split("\n");for(var D=0;D<E.length;D++){var G=c.trim(E[D]);if(G){G=G.split("|");C[C.length]={data:G,value:G[0],result:j.formatResult&&j.formatResult(G,G[0])||G[0]}}}return C}function r(){e.removeClass(j.loadingClass)}};function b(f,e){if(f.position<=e.position){return -1}else{return 1}}function d(f,e){if(f.length<=e.length){return 1}else{return -1}}c.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:false,matchSubset:true,matchContains:false,cacheLength:10,max:100,mustMatch:false,extraParams:{},selectFirst:true,formatItem:function(e){return e[0]},formatMatch:null,autoFill:false,width:0,multiple:false,multipleSeparator:", ",highlight:function(m,h){var i=m;var e=true;var k=0;var n=remove_accent(m).toLowerCase();var l=remove_accent(h).toLowerCase().split(a).sort(d);var j=[];var g=[];c.each(l,function(p,o){o=c.trim(o);if(o.length>0){var q=true;c.each(g,function(t,s){if(s.indexOf(o)!=-1){q=false}});if(q){g.push(o);k=0;e=true;while(e){var r=n.indexOf(o,k);if(r>=0&&o.length>0){j.push({position:r,longueur:o.length})}else{e=false}k+=r+o.length+1}}}});j.sort(b);var f=0;c.each(j,function(p,o){f+=o.position;i=i.substr(0,f)+"<strong>"+i.substr(f,o.longueur)+"</strong>"+i.substring(f+o.longueur);f=(p+1)*17});return i},scroll:true,scrollHeight:180};c.Autocompleter.Cache=function(f){var i={};var g=0;function k(r,q){r=remove_accent(r);q=remove_accent(q);if(!f.matchCase){r=r.toLowerCase()}for(var u in f.characToExclude){var t=q.indexOf(f.characToExclude[u]);var m=f.characToExclude[u].length;if(t==-1){q=q}else{if(t==0){q=q.replace(f.characToExclude[u]+" "," ")}else{if(t+m==u.strlen){q=q.replace(" "+f.characToExclude[u]," ")}else{q=q.replace(" "+f.characToExclude[u]+" "," ")}}}}var n=q.split(a);var o=0;c.each(n,function(l,p){if(o!=-1){o=r.indexOf(p);if(f.matchContains=="word"){o=r.toLowerCase().search("\\b"+p.toLowerCase())}}});if(o==-1){return false}return o==0||f.matchContains}function j(m,l){if(g>f.cacheLength){e()}if(!i[m]){g++}i[m]=l}function h(){if(!f.data){return false}var m={},l=0;if(!f.url){f.cacheLength=1}m[""]=[];for(var o=0,n=f.data.length;o<n;o++){var r=f.data[o];r=(typeof r=="string")?[r]:r;var q=f.formatMatch(r,o+1,f.data.length);if(q===false){continue}var p=q.charAt(0).toLowerCase();if(!m[p]){m[p]=[]}var s={value:q,data:r,result:f.formatResult&&f.formatResult(r)||q};m[p].push(s);if(l++<f.max){m[""].push(s)}}c.each(m,function(t,u){f.cacheLength++;j(t,u)})}setTimeout(h,25);function e(){i={};g=0}return{flush:e,add:j,populate:h,load:function(o){if(!f.cacheLength||!g){return null}if(!f.url&&f.matchContains){var n=[];for(var l in i){if(l.length>0){var p=i[l];c.each(p,function(r,q){if(k(q.value,o)){n.push(q)}})}}return n}else{if(i[o]){return i[o]}else{if(f.matchSubset){for(var m=o.length-1;m>=f.minChars;m--){var p=i[o.substr(0,m)];if(p){var n=[];c.each(p,function(r,q){if(k(q.value,o)){n[n.length]=q}});return n}}}}}return null}}};c.Autocompleter.Select=function(h,m,o,s){var l={ACTIVE:"ac_over"};var n,i=-1,u,p="",v=true,f,r;function q(){if(!v){return}f=c("<div/>").hide().addClass(h.resultsClass).css("position","absolute").appendTo(document.body);r=c("<ul/>").appendTo(f).mousemove(function(w){if(t(w).nodeName&&t(w).nodeName.toUpperCase()=="LI"){i=c("li",r).removeClass(l.ACTIVE).index(t(w));c(t(w)).addClass(l.ACTIVE)}}).click(function(w){c(t(w)).addClass(l.ACTIVE);o();return false}).mousedown(function(){s.mouseDownOnSelect=true}).mouseup(function(){s.mouseDownOnSelect=false}).mouseout(function(w){if(h.unselectOnMouseOut){i=c("li",r).removeClass(l.ACTIVE).index(t(w))}});if(h.width>0){f.css("width",h.width)}v=false}function t(x){var w=x.target;while(w&&w.tagName!="LI"){w=w.parentNode}if(!w){return[]}return w}function k(w){n.slice(i,i+1).removeClass(l.ACTIVE);j(w);var y=n.slice(i,i+1).addClass(l.ACTIVE);if(h.scroll){var x=0;n.slice(0,i).each(function(){x+=this.offsetHeight});if((x+y[0].offsetHeight-r.scrollTop())>r[0].clientHeight){r.scrollTop(x+y[0].offsetHeight-r.innerHeight())}else{if(x<r.scrollTop()){r.scrollTop(x)}}}}function j(w){i+=w;if(i<0){i=n.size()-1}else{if(i>=n.size()){i=0}}}function e(w){return h.max&&h.max<w?h.max:w}function g(){r.empty();var y=e(u.length);for(var A=0;A<y;A++){if(!u[A]){continue}var z=u[A].data.link;var C=new RegExp("^[^,]+_g([0-9]+)","i");var x=z.match(C);var D="";if(x!=null&&x.length>=2&&parseInt(x[1]).toString()==x[1].toString()){D=x[1]}var B=h.formatItem(u[A].data,A+1,y,u[A].value,p);if(B===false){continue}var w=c("<li/>").html(h.highlight(B,p)).addClass(A%2==0?"ac_even":"ac_odd").attr("id-generique",D).appendTo(r)[0];c.data(w,"ac_data",u[A])}n=r.find("li");if(h.selectFirst){n.slice(0,1).addClass(l.ACTIVE);i=0}if(c.fn.bgiframe){r.bgiframe()}}return{display:function(x,w){q();u=x;p=w;g()},next:function(){k(1)},prev:function(){k(-1)},pageUp:function(){if(i!=0&&i-8<0){k(-i)}else{k(-8)}},pageDown:function(){if(i!=n.size()-1&&i+8>n.size()){k(n.size()-1-i)}else{k(8)}},hide:function(){f&&f.hide();n&&n.removeClass(l.ACTIVE);i=-1},visible:function(){return f&&f.is(":visible")},current:function(){return this.visible()&&(n.filter("."+l.ACTIVE)[0]||h.selectFirst&&n[0])},show:function(){var y=c(m).offset();f.css({width:typeof h.width=="string"||h.width>0?h.width:Math.max(c(m).width()+44,320),top:y.top+m.offsetHeight,left:y.left}).show();if(h.scroll){r.scrollTop(0);r.css({maxHeight:h.scrollHeight,overflow:"auto"});if(c.browser.msie&&typeof document.body.style.maxHeight==="undefined"){var w=0;n.each(function(){w+=this.offsetHeight});var x=w>h.scrollHeight;r.css("height",x?h.scrollHeight:w);if(!x){n.width(r.width()-parseInt(n.css("padding-left"))-parseInt(n.css("padding-right")))}}}},selected:function(){var w=n&&n.filter("."+l.ACTIVE).removeClass(l.ACTIVE);return w&&w.length&&c.data(w[0],"ac_data")},emptyList:function(){r&&r.empty()},unbind:function(){f&&f.remove()}}};c.fn.selection=function(l,e){if(l!==undefined){return this.each(function(){if(this.createTextRange){var m=this.createTextRange();if(e===undefined||l==e){m.move("character",l);m.select()}else{m.collapse(true);m.moveStart("character",l);m.moveEnd("character",e);m.select()}}else{if(this.setSelectionRange){this.setSelectionRange(l,e)}else{if(this.selectionStart){this.selectionStart=l;this.selectionEnd=e}}}})}var j=this[0];if(j.createTextRange){var f=document.selection.createRange(),k=j.value,i="<->",g=f.text.length;f.text=i;var h=j.value.indexOf(i);j.value=k;this.selection(h,h+g);return{start:h,end:h+g}}else{if(j.selectionStart!==undefined){return{start:j.selectionStart,end:j.selectionEnd}}}}})(jQuery);$(document).ready(function(){var d="tyre_dim",a="."+__DOMAIN__;$(".pneus_listepdt-show_selector").bind("click",function(i){$(this).hide();$(this).closest("div").find(".pneus_lstpdt_selecteur").toggle("fast");return false});function c(){for(var j=0;j<arguments.length;j++){var k=arguments[j];if(k=="pneus-filtres_90012"||k=="pneus-filtres_202"){$("select#"+k).find("option").remove().end().append('<option value="-1"> -- </option>')}else{var l=$("select#"+k+" option:first");$("select#"+k).find("option").remove().end().append('<option value="">'+l.html()+"</option>").val(l.html())}}}function f(m){var k=$("select#pneus-filtres_475").val();var j=$("select#pneus-filtres_90012").val();var i=$("select#pneus-filtres_202").val();var l={};if(m=="pneus-filtres_90012"){l={largeur:k,hauteur:"all"}}else{if(m=="pneus-filtres_202"){l={largeur:k,hauteur:j,diametre:"all"}}else{if(m=="pneus-filtres_1431"){l={largeur:k,hauteur:j,diametre:i,charge:"all"}}}}$('select#pneus-filtres_1432 option[value=""]').attr("selected","selected");$("._select_pneus_input").attr("disabled","disabled");$.post(__AJAX__+"pneus/select-pneus.php",l,function(n){$.each(n,function(){$("#"+m).append('<option value="'+this+'">'+this+"</option>")});$("select#"+m+" option:first").attr("selected","selected");$("._select_pneus_input").removeAttr("disabled")},"json");e()}function e(){var k=$("select#pneus-filtres_475").val()!="-1"&&$("select#pneus-filtres_90012").val()!="-1"&&$("select#pneus-filtres_202").val()!="-1";var j=$("a.pneus_selector-submit");var i=$("a.pneus_selector-submit_disabled");if(k){i.hide();j.show()}else{j.hide();i.show()}}function h(u,n,m){var x=$("select#pneus-filtres_475").val();var y=$("select#pneus-filtres_90012").val();var j=$("select#pneus-filtres_202").val();var v=$("select#pneus-filtres_90021").val();var p=$("select#pneus-filtres_equipementier").val();var i=$("select#pneus-filtres_1431").val();var o=$("#pneus-filtres_90013").val();var r=$("select#pneus-filtres_1432").val();var s=$("input[name=pneus-filtres_90019]:checked").val();var l=$("#pneus-filtres_TRI_PNEU_RUNFLAT").is(":checked")?$("#pneus-filtres_TRI_PNEU_RUNFLAT").val():null;var q=$("#pneus-filtres_TRI_PNEU_RENFORCE").is(":checked")?$("#pneus-filtres_TRI_PNEU_RENFORCE").val():null;u=n=="default"?"pneus-filtres_202":u;var k=$("#"+u).closest("form");var w=$(".pneus_selector-submit",k);if(u=="pneus-filtres_475"){c("pneus-filtres_90012","pneus-filtres_202","pneus-filtres_1431");f("pneus-filtres_90012")}else{if(u=="pneus-filtres_90012"&&x>0){c("pneus-filtres_202","pneus-filtres_1431");f("pneus-filtres_202")}else{if(u=="pneus-filtres_202"&&x>0&&y||n=="default"||j>0&&x&&y){var t={largeur:x,hauteur:y,diametre:j,usage:v,equipementier:p,charge:i,vitesse:r,saison:s,runflat:l,renforces:q,modele:o};$.post(__AJAX__+"pneus/get_url_search-pneus.php",t,function(z){$(k).attr("action",z);$(w).attr("href",z);if(n=="default"){e()}if(m=="execute_search"){push_data_layer("selecteur","pneu",JSON.stringify(t));window.location.href=z}},"json");if(((u=="pneus-filtres_475")||(u=="pneus-filtres_90012")||(u=="pneus-filtres_202"))&&n!="default"){c("pneus-filtres_1431");f("pneus-filtres_1431")}}}}}function g(j,i,k){var l=j.removeClass("shadow_"+i).addClass("shadow_"+k).find(".boxtext_"+i);l.removeClass("boxtext_"+i).addClass("boxtext_"+k);j.find(".puce_"+i).removeClass("puce_"+i).addClass("puce_"+k);if(k!="grey"){l.removeClass("boxtext_grey_no_hover")}else{l.addClass("boxtext_grey_no_hover")}}$("._select_pneus_input").change(function(){var i=$(this).attr("id");h(i)});$("._select_pneus_input").hover(function(){$("#pneus_selector-visu").removeClass().addClass($(this).attr("id"));$("#pneus_selector-visu_mini").removeClass().addClass($(this).attr("id"))});$("._select_pneus_option").change(function(){h(true,"default")});$("a.pneus_selector-submit").click(function(i){h(true,"default","execute_search");return false});if($("form#pneus_selector-form").length>0){h(true,"default")}var b=$(".pneus_selector-filters-tooltip").text();$("a.pneus_selector-submit_disabled").miniTip({content:b,event:"hover",maxW:"350px",event:"click",addClasses:"red"})});